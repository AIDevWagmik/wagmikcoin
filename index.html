 <!-- Optimized WAGMIK Site -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- All original and functional code preserved -->
  <style>
    html {
      scroll-behavior: smooth;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #1a0e2d;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    section {
      padding: 60px 20px;
      max-width: 960px;
      margin: auto;
    }
    h1, h2, h3 {
      color: #ffe06b;
      text-shadow: 2px 2px 6px rgba(0,0,0,0.75);
    }
    p {
      color: #fff;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
    }

   body, .section p, .tokenomics-content li {
  text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.75);
}
   
   body {
  position: relative;
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: url('background.png') no-repeat center top;
  background-size: 110%; /* Zoomed-out look while covering */
  background-attachment: scroll; /* Moves with scroll */
  background-repeat: no-repeat;
  background-color: #1a0e2d; /* fallback behind transparent areas */
  color: #fff;
  overflow-x: hidden;
}

  body {
  overflow-x: hidden;
}

html, body {
  max-width: 100%;
  overflow-x: hidden;
}


   header::before {
  content: none;
}

    header h1, header p {
      position: relative;
      z-index: 2;
    }

    .section {
      padding: 60px 20px;
      max-width: 900px;
      margin: auto;
      text-align: center;
    }

    .section h2 {
      font-size: 2.2em;
      color: #FFDE6A;
      text-align: center;
    }

    .about p, .lore p {
      font-size: 1.4em;
      line-height: 1.6;
      text-align: center;
      margin: 0 auto;
    }

    .quote {
      margin-top: 30px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 10px;
      font-style: italic;
      text-align: center;
    }

    .cta {
      display: block;
      width: fit-content;
      margin: 30px auto;
      background-color: #ff4fd8;
      color: #000;
      font-weight: bold;
      padding: 14px 28px;
      border-radius: 25px;
      text-decoration: none;
    }


/* Meme Gallery */
.gallery-wrapper {
  overflow: hidden;
  width: 100%;
  margin-top: 30px;
  border-radius: 12px;
  position: relative;
}

.gallery-track {
  display: flex;
  gap: 18px;
  animation: scrollGallery 20s linear infinite;
  padding: 10px;
}

.gallery-meme {
  height: 160px;
  border-radius: 8px;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  cursor: pointer;
}

.gallery-meme:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 18px rgba(255, 255, 255, 0.25);
}

/* Lightbox effect */
.lightbox {
  display: none;
  position: fixed;
  z-index: 999;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.85);
  justify-content: center;
  align-items: center;
}

.lightbox img {
  max-width: 90%;
  max-height: 90%;
  border-radius: 12px;
  box-shadow: 0 0 30px rgba(255,255,255,0.3);
  animation: fadeIn 0.4s ease-in-out;
}

@keyframes scrollGallery {
  0%   { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

.floating-lore-wrapper {
  position: relative;
  min-height: 0px; /* Make this large enough to show all chapters */
  z-index: 5;
}

/* Hide floating lore by default */
.floating-lore {
  display: none;
}

@media (min-width: 769px) {
  .floating-lore {
    position: absolute;
    top: 80px;
    right: 40px;
    max-width: 240px;
    z-index: 10;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 24px;
    pointer-events: none;
  }

  .floating-lore .lore-chapter {
    background: rgba(0, 0, 0, 0.65);
    color: #ffde6a;
    padding: 10px 14px;
    border-radius: 12px;
    font-size: 1em;
    text-align: right;
    text-shadow: 1px 1px 3px black;
    max-width: 100%;
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }

  .floating-lore .lore-chapter.visible {
    opacity: 1;
    transform: translateY(0);
  }
}

.coin-fall {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 2;
  }

.coin {
  position: absolute;
  width: 32px;
  height: 32px;
  background: url('circle.png') center/cover no-repeat;
  animation: fall 6s linear infinite;
  }

    @keyframes fall {
      0% { transform: translateY(-50px) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }


footer {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  width: 100%;
  text-align: center;
  padding: 20px 0;
  font-size: 0.95em;
  color: #fff;
  margin: 0 auto;
}

.body-background-fade {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 120px; /* adjust for stronger/softer fade */
  background: linear-gradient(to bottom, rgba(26, 14, 45, 1), rgba(26, 14, 45, 0));
  z-index: 1;
  pointer-events: none;
}


/* Floating Buttons */
.floating-button {
  position: fixed;
  right: 20px;
  z-index: 1001;
  padding: 12px 18px;
  border-radius: 20px;
  font-weight: 600;
  border: none;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  transition: background 0.3s;
}

.lore-toggle-btn {
  bottom: 140px;
  background: #ff4fd8;
}

.degen-toggle-btn {
  bottom: 80px;
  background: #ffe06b;
}

.meme-toggle-btn {
  bottom: 20px;
  background: #50f7ff;
}

@media (max-width: 768px) {
  body {
    background-size: cover; /* fix zoomed background */
  }

  header {
    padding: 60px 10px 30px;
    background-position: center top;
  }

  .section {
    padding: 40px 15px;
  }

  .section h2 {
    font-size: 1.8em;
  }

  .about p,
  .lore p,
  .tokenomics-content li {
    font-size: 1.1em;
    padding: 0 5px;
  }

  .cta {
    font-size: 0.95em;
    padding: 10px 20px;
  }

  .lore-chapter {
    font-size: 1.1em;
    padding: 10px 12px;
    max-width: 90vw;
  }

  iframe {
    height: 400px;
  }

  .gallery-meme {
    height: 120px;
  }

  .token-logo {
    width: 90px;
  }

  footer {
    font-size: 0.85em;
    padding: 16px 10px;
  }
}

@media (max-width: 768px) {

  .section.about {
    margin-top: -20;
  }

    .meme-toggle-btn {
      bottom: 20px;
      background: #50f7ff;
    }
  }

   /* Modal Base */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(20, 10, 40, 0.92);
      backdrop-filter: blur(6px);
      z-index: 1000;
      padding: 40px 20px;
      overflow-y: auto;
      box-sizing: border-box;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }

    .modal.active {
  z-index: 9999;
  display: flex;
  flex-direction: column;
}

    .modal .close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 1.8em;
      background: transparent;
      border: none;
      color: white;
      cursor: pointer;
    }

  .modal {
  pointer-events: auto;
  touch-action: manipulation;
  z-index: 9999;
}

    /* Lore Modal */
    #loreModal {
      background: linear-gradient(rgba(20, 10, 40, 0.4), rgba(20, 10, 40, 0.4)), url('lore.png') center center no-repeat;
      background-size: cover;
    }

    .lore-chapter {
      margin-bottom: 18px;
      font-size: 1.2em;
      max-width: 600px;
      background: rgba(0,0,0,0.5);
      padding: 12px;
      border-radius: 10px;
    }

    /* Degen Modal */
    #degenModal h2 {
      color: #ffe06b;
      margin-bottom: 16px;
    }

    #degenProphecy {
      font-size: 1.4em;
      font-style: italic;
      text-align: center;
    }

/* Meme Modal */
#memeModal {
  background: linear-gradient(rgba(20, 10, 40, 0.9), rgba(20, 10, 40, 0.9)), url('console-layout.png') center center no-repeat;
  background-size: cover;
}

#memeModal select,
#memeModal input,
#memeModal button {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* Base Styles */
.console-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  max-width: 800px;
  margin: 0 auto;
  position: relative;
}

.console-controls {
  display: flex;
  flex-direction: column;
  gap: 12px;
  width: 100%;
  max-width: 400px;
}

.console-controls input,
.console-controls select,
.console-controls button {
  padding: 10px;
  font-size: 1em;
  border-radius: 8px;
  border: none;
  background: linear-gradient(135deg, #ff4fd8 0%, #ffe06b 100%);
  color: #000;
  font-weight: bold;
  cursor: pointer;
}

.button-row {
  display: flex;
  gap: 10px;
  justify-content: space-between;
}

canvas#memeCanvas {
  width: 90%;
  max-width: 360px;
  height: auto;
  margin: 20px auto 0;
  display: block;
  border: 2px dashed white;
  touch-action: none;
}

.console-container img.console-bg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  opacity: 0.15; /* lighter so controls stand out */
  pointer-events: none;
}

.console-controls,
.console-canvas {
  position: relative;
  z-index: 1;
}

.floating-buttons {
  position: fixed;
  right: 20px;
  bottom: 20px;
  display: flex;
  flex-direction: column;
  gap: 20px;
  z-index: 1001;
}

/* Mobile Styles */
@media (max-width: 768px) {
  .console-bg {
    content: url('mobile-console-layout.png');
    position: absolute;
    top: 0;
    left: 0;
    z-index: 0;
    opacity: 0.3;
  }

  .console-controls {
    padding: 0 10px; /* ‚¨ÖÔ∏è NEW: give mobile some horizontal breathing room */
  }

  .console-controls input,
  .console-controls select,
  .console-controls button {
    font-size: 0.95em;       /* ‚¨ÖÔ∏è NEW: slightly larger text for readability */
    padding: 10px;
    border-radius: 8px;
    border: none;
    font-family: inherit;
    font-weight: 600;        /* ‚¨ÖÔ∏è NEW: make labels bold for clarity */
    pointer-events: auto !important;
    touch-action: manipulation;
  }

  .button-row {
    flex-direction: column;  /* ‚¨ÖÔ∏è NEW: stack buttons vertically */
    gap: 10px;
    width: 100%;
    margin-top: 10px;
  }

  .button-row button {
    width: 100%;             /* ‚¨ÖÔ∏è NEW: make each button full width */
    background: linear-gradient(135deg, #ff4fd8 0%, #ffe06b 100%);
    color: #000;
    font-weight: bold;
    border: none;
    border-radius: 10px;
    padding: 12px 16px;
  }

  .console-btn:hover {
    background: #ffd700;
    color: #000;
    font-weight: bold;
  }

  .floating-button:hover {
    opacity: 0.9;
    transform: scale(1.05);
  }
}

/* Desktop override */
@media (min-width: 768px) {
  .console-container {
    flex-direction: row;
    align-items: flex-start;
    justify-content: center;
  }

  .console-controls {
    width: 300px;
    max-width: 300px;
  }

  canvas#memeCanvas {
    width: 360px;
    height: 360px;
  }
}

/* Floating App Logos (Left Center) */
.floating-apps {
  position: fixed;
  top: 50%;
  left: 12px;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 16px;
  z-index: 1002;
  pointer-events: auto;
}

.app-logo {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.5);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  cursor: pointer;
  pointer-events: auto;
}

.app-logo:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 14px rgba(255, 255, 255, 0.3);
}

/* Mobile adjustments */
@media (max-width: 768px) {
  .floating-apps {
    left: 6px;
    gap: 12px;
  }

  .app-logo {
    width: 36px;
    height: 36px;
  }
}

@media (min-width: 769px) {
  .lore-toggle-btn,
  .degen-toggle-btn,
  .meme-toggle-btn {
    visibility: visible;   /* fix this line */
    pointer-events: auto;
  }
}

canvas {
  touch-action: none; /* üî• Stops browser scroll when touching canvas */
}

@media (max-width: 768px) {
  #rotationSliderWrapper {
    display: none !important;
  }
}

@media (max-width: 768px) {
  .console-controls .button-row button:nth-child(1), /* Preview */
  .console-controls .button-row button:nth-child(2)  /* Download */ {
    display: none;
  }

  /* Move Reset up where Preview was */
  .console-controls .button-row button:nth-child(3) {
    width: 100%;
    margin-top: 0;
  }
}

input, select, textarea, button {
  touch-action: manipulation !important;
}

#controlsWrapper select,
#controlsWrapper input[type="text"] {
  pointer-events: auto;
  z-index: 10;
  position: relative;
}

@media (max-width: 768px) {
  .console-container {
    flex-direction: column;
    align-items: center;
    max-height: unset;
    overflow-y: auto;
    padding-bottom: 20px;
    overscroll-behavior: contain;
    touch-action: manipulation; /* allows input while preventing scroll gestures */
  }

  .console-controls {
    position: relative;
    margin-bottom: 0;
    z-index: 2;
  }

  #memeCanvas {
    touch-action: none;
    margin-top: 12px;
    margin-bottom: 20px;
    display: block;
    z-index: 1;
    max-width: 95%;
    height: auto;
    box-sizing: border-box;
    touch-action: none;
  }

  canvas {
    max-width: 100%;
    display: block;
    margin: 0 auto;
  }
}

@media (max-width: 768px) {
  #memeModal select,
  #memeModal input[type="text"] {
    pointer-events: auto !important;
    z-index: 1000 !important;
    position: relative;
  }
}

@media (max-width: 768px) {
  .console-controls {
    order: 1;
  }
  .console-canvas {
    order: 2;
    margin-top: -20px;
  }
}


@media (min-width: 768px) {
  .lore-toggle-btn {
    display: none;
  }
}

   @media (max-width: 768px) {
  #rotationSliderWrapper,
  .console-btn:nth-child(1),  /* Preview */
  .console-btn:nth-child(2) { /* Download */
    display: none !important;
  }

  .console-btn:nth-child(3) {
    width: 100%;
    margin-top: 0.5rem;
  }

  .console-container {
    overflow-y: auto;
    max-height: 85vh;
    touch-action: none;
  }

  .lore-toggle-btn {
    display: block;
  }
}

canvas#memeCanvas {
¬† touch-action: none; /* allow full drag behavior */
}

body, html {
¬† touch-action: auto !important; /* reset global block if it lingers */
}

@media (max-width: 768px) {
¬† .modal.active {
¬† ¬† max-height: 100vh !important;
¬† ¬† overflow-y: auto !important;
¬† ¬† display: flex !important;
¬† ¬† flex-direction: column;
¬† }
}

 @media (max-width: 768px) {
¬† #memeModal.modal.active {
¬† ¬† max-height: 100vh;
¬† ¬† overflow-y: auto;
¬† ¬† display: flex !important;
¬† ¬† flex-direction: column;
¬† ¬† justify-content: flex-start;
¬† ¬† padding-bottom: 24px; /* ü©π Make room for canvas */
¬† }

¬† .console-container {
¬† ¬† padding-bottom: 24px; /* extra scroll space on small viewports */
¬† ¬† box-sizing: border-box;
¬† }
}

   /* üü£ Share Modal Wrapper */
.share-modal.hidden {
  display: none;
}

.share-modal {
  position: fixed;
  z-index: 9999;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.85);
  backdrop-filter: blur(6px);
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 16px;
  box-sizing: border-box;
}

/* üü° Share Modal Inner Content */
.share-modal .modal-content {
  background: #1a1a1a;
  color: white;
  border-radius: 12px;
  padding: 20px;
  max-width: 340px;
  width: 100%;
  text-align: center;
  box-shadow: 0 0 10px rgba(255,255,255,0.2);
}

.share-modal .modal-content h2 {
  margin-top: 0;
  font-size: 1.3em;
}

.share-modal .modal-content ul {
  list-style: none;
  padding: 0;
  margin: 16px 0;
  text-align: left;
  font-size: 0.95em;
}

.share-modal .modal-content li {
  margin-bottom: 8px;
  line-height: 1.4;
}

/* üü¢ Button Group */
.share-modal .button-container {
  display: flex;
  gap: 10px;
  margin-top: 20px;
  justify-content: center;
  flex-wrap: wrap;
}

.share-modal .button-container button {
  flex: 1;
  padding: 10px;
  font-weight: bold;
  border: none;
  border-radius: 8px;
  background: linear-gradient(to right, #ff00cc, #ffcc00);
  color: black;
  cursor: pointer;
  font-size: 1em;
}

   @media (max-width: 768px) {
  .share-modal {
    align-items: flex-start;
    padding-top: 60px;
    padding-bottom: 40px;
    overflow-y: auto;
  }

  .share-modal .modal-content {
    max-width: 95%;
    font-size: 0.95em;
    padding: 16px;
  }

  .share-modal .modal-content ul {
    font-size: 0.9em;
    line-height: 1.5;
  }

  .share-modal .button-container {
    flex-direction: column;
    gap: 12px;
  }

  .share-modal .button-container button {
    width: 100%;
    font-size: 1em;
    padding: 12px;
  }
}

section.about *,
section.lore *,
section.bonk-tribute *,     /* Bonk Tribute */
section#meme-gallery *,
section:nth-of-type(6) *,     /* Jupiter Buy */
.tokenomics-section * {
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.85);
}

.hero-banner {
  background-image: url('banner.png');
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
  width: 100%;
  height: 600px; /* Desktop default */
}
    
@media (min-width: 768px) {
  .hero-banner {
    height: 600px; /* Adjust until green line hits bottom on desktop */
  }
}

/* Mobile override (‚â§767px) */
@media (max-width: 767px) {
  .hero-banner {
  width: 100vw;
  height: 480px; /* Adjust if needed */
  background-image: url('banner.png');
  background-size: cover;
  background-position: top center;
  background-repeat: no-repeat;
  margin: 0;
  padding: 0;
  display: block;
}

  body {
    background-image: url('background.png');
    background-size: contain;
    background-repeat: repeat-y;
    background-position: top center;
    
  }
}

@media (max-width: 768px) {
  .about .quote {
    position: relative;
    top: 20px; /* Adjust as needed: -10px, -15px, etc. */
  }
}

@media (max-width: 768px) {
  section.lore {
    position: relative;
    top: -30px; /* Tweak as needed: -10px, -15px */
  }
}

@media (max-width: 768px) {
  .bonk-tribute {
    position: relative;
    top: 30px;
  }
}

@media (max-width: 768px) {
  .tokenomics-section {
    background-image: url('background-tokenomics.png');
    background-repeat: no-repeat;
    background-size: cover;
    background-position: bottom center;

    display: flex;
    flex-direction: column;
    align-items: center;          /* Center contents horizontally */
    justify-content: flex-start;  /* Let us control spacing manually */

    padding: 40px 20px 80px;      /* Top, side, bottom */
    min-height: 100vh;
  }

  .tokenomics-content {
    margin-top: 40px;             /* Move the tokenomics text down */
    align-self: stretch;          /* Let it fill width if needed */
    text-align: center;           /* Optional: center content */
  }

  .tokenomics-section footer {
    margin-top: auto;             /* Push footer to the bottom */
    text-align: center;
    color: #fff;
    font-size: 0.9rem;
  }

  .tokenomics-section *,
  .lore *,
  .about *,
  .bonk-tribute *,
  .quote,
  footer,
  h1, h2, h3, h4, h5, h6,
  p, li, a, span {
    text-shadow: 0 2px 6px rgba(0, 0, 0, 0.75); /* Still here for contrast */
  }
}

 @media (max-width: 768px) {
  section.section:nth-of-type(4) {
    position: relative;
    top: -20px;
  }
}

 @media (max-width: 768px) {
  /* ‚úÖ BACKDROP BLUR & STYLE FOR KEY SECTIONS */
   .glass-box {
  display: inline-block;                /* Shrink to content size */
  background: rgba(0, 0, 0, 0.25);      /* Subtle dark blur */
  backdrop-filter: blur(4px);          /* Softer blur */
  -webkit-backdrop-filter: blur(4px);  /* Safari support */
  border-radius: 12px;                 /* Slightly rounded */
  padding: 8px 12px;                   /* Minimal padding */
  margin: 10px auto;                   /* Center horizontally */
  box-shadow: 0 0 6px rgba(0, 0, 0, 0.2); /* Light outer glow */
  text-align: center;                  /* Ensure text stays centered */
}

  /* ‚úÖ POSITION TWEAKS */
  .tokenomics-content {
    margin-top: 140px;
  }

  .lore {
    position: relative;
    top: -80px;
  }

  section.section:nth-of-type(4) {
    position: relative;
    top: -20px;
  }
}

@media screen and (min-width: 768px) {
  .tokenomics-section {
    position: relative;
    width: 100%;
    background-color: #0b003d; /* fallback background */
    padding: 100px 20px 180px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    overflow: hidden;
  }

  .tokenomics-section::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 300px; /* adjust based on image height */
    background: url('bottom-banner.png') no-repeat center bottom;
    background-size: cover;
    pointer-events: none; /* don't block clicks */
    z-index: 0;
  }

  .tokenomics-content {
    max-width: 800px;
    color: #fff;
    text-align: center;
    padding-bottom: 40px;
    z-index: 1;
  }

  .tokenomics-section footer {
    font-size: 14px;
    padding-top: 20px;
    color: #ffffff;
    text-align: center;
    opacity: 0.8;
    z-index: 1;
  }
}

  </style>

  <script src="https://terminal.jup.ag/main-v4.js"></script>
  
 </head>
 
 <body>

<header class="hero-banner"></header>
  
<div class="body-background-fade"></div>

<div class="coin-fall" id="coin-fall"></div>

<div class="fade-line-header-bottom"></div>

<section class="section about">
  <h2>üöÄ About</h2>
 <div class="glass-box">
  <p>$WAGMIK is the coin for every Solana degen who bought the top, paper-handed the bottom, and still thinks memes are a valid investment strategy.
  </p>
   </div>
  <div class="quote">
    ‚ÄúThis coin has no utility, and that‚Äôs the utility.‚Äù<br>
    <span>‚Äì A true degen prophet</span>
  </div>
  <a href="https://letsbonk.fun" target="_blank" class="cta">Buy on Bonk Launchpad</a>
</section>

<section class="floating-lore-wrapper">
  <div class="floating-lore">
    <div class="lore-chapter">In the deep shadows of Solana memecoin culture...</div>
    <div class="lore-chapter">While BONK soared to memetic greatness, $WAGMIK sat quietly in the trenches...</div>
    <div class="lore-chapter">He wasn‚Äôt the fastest dog. He wasn‚Äôt airdropped to influencers...</div>
    <div class="lore-chapter">He was BONK‚Äôs underdog cousin...</div>
    <div class="lore-chapter">But instead of giving up, he asked ChatGPT for advice...</div>
    <div class="lore-chapter">Born from regret and refined by copium, $WAGMIK clawed into existence...</div>
    <div class="lore-chapter">Now, $WAGMIK isn‚Äôt here to change the world...</div>
    <div class="lore-chapter">He‚Äôs not just a token. He‚Äôs a story. A meme. A movement.</div>
  </div>
</section>

<section class="section lore">
  <h2>üß¨ Lore</h2>
    <div class="glass-box">
  <p>Forged from chart tears and bottom buys, $WAGMIK was born in the depths of Solana Twitter and raised on hopium. Bonk was the cousin who made it. WAGMIK was left behind. Until now.</p>
      </div>
</section>

<section class="section bonk-tribute">
  <h2>üî• The Bonk Tribute</h2>
  <iframe
    src="https://dexscreener.com/solana/ysq96dvzrrmvrassyb2vr5chfwosqdrzqrgnmrrtr1l"
    frameborder="0"
    style="width:100%; height:500px; border:none; border-radius:12px;"
    allowfullscreen
  ></iframe>
</section>

<!-- üöÄ Meme Gallery Section -->
<section class="section memes-section" id="meme-gallery">
  <h2>üòÇ Community Memes</h2>
  <div class="gallery-wrapper">
    <div class="gallery-track" id="memeTrack">
      <!-- REPLACE src with your meme file paths -->
      <img src="meme1.png" alt="Meme 1" class="gallery-meme" />
      <img src="meme2.png" alt="Meme 2" class="gallery-meme" />
      <img src="meme3.png" alt="Meme 3" class="gallery-meme" />
      <img src="meme4.png" alt="Meme 4" class="gallery-meme" />
      <img src="meme5.png" alt="Meme 5" class="gallery-meme" />
      <img src="meme6.png" alt="Meme 6" class="gallery-meme" />
      <img src="meme7.png" alt="Meme 7" class="gallery-meme" />
      <img src="meme8.png" alt="Meme 8" class="gallery-meme" />
      <img src="meme9.png" alt="Meme 9" class="gallery-meme" />
      <img src="meme10.png" alt="Meme 10" class="gallery-meme" />
      <img src="meme11.png" alt="Meme 11" class="gallery-meme" />
      <img src="meme12.png" alt="Meme 12" class="gallery-meme" />
      <!-- Add as many as needed -->
    </div>
  </div>

   <!-- Lightbox -->
  <div id="lightbox" class="lightbox">
    <img src="" alt="Zoomed Meme" id="lightbox-img" />
  </div>
</section>

<!-- Jupiter Swap Section -->
<section class="section jupiter-section">
¬† <h2>üõí Use Jupiter to Buy $WAGMIK</h2>
¬† <div id="jupiter-terminal"></div>
</section>
 
<section class="tokenomics-section">
  <div class="tokenomics-content glass-box">
    <ul>
      <li><strong>Total Supply:</strong> 1,000,000,000</li>
      <li><strong>Tax:</strong> 0%</li>
      <li><strong>Chain:</strong> Solana</li>
      <li><strong>Utility:</strong> Vibes, Lore & Copium</li>
    </ul>
  </div>
   <footer>
   Made with memes, madness, and moon math ‚ú®
   <br/>
   ¬© 2025 $WAGMIK. No rights reserved.
  </footer>
</section>


<!-- Lore Button & Modal -->
<button class="floating-button lore-toggle-btn" onclick="toggleLore()">üìú Read Lore</button>
<div class="modal" id="loreModal">
  <button class="close-btn" onclick="toggleLore()">‚úñ</button>
  <div class="lore-chapter">In the deep shadows of Solana memecoin culture...</div>
  <div class="lore-chapter">While BONK soared to memetic greatness, $WAGMIK sat quietly in the trenches...</div>
  <div class="lore-chapter">He wasn‚Äôt the fastest dog. He wasn‚Äôt airdropped to influencers...</div>
  <div class="lore-chapter">He was BONK‚Äôs underdog cousin...</div>
  <div class="lore-chapter">But instead of giving up, he asked ChatGPT for advice...</div>
  <div class="lore-chapter">Born from regret and refined by copium, $WAGMIK clawed into existence...</div>
  <div class="lore-chapter">Now, $WAGMIK isn‚Äôt here to change the world...</div>
  <div class="lore-chapter">He‚Äôs not just a token. He‚Äôs a story. A meme. A movement.</div>
</div>

<!-- Degen Button & Modal -->
<button class="floating-button degen-toggle-btn" onclick="toggleDegen()">üß† Degen Mode</button>
<div class="modal" id="degenModal">
  <button class="close-btn" onclick="toggleDegen()">‚úñ</button>
  <h2>Degen Prophecies by $WAGMIK</h2>
  <p id="degenProphecy">Loading prophecy...</p>
</div>

<!-- Meme Generator Button & Modal -->
<button class="floating-button meme-toggle-btn" onclick="toggleMeme()">üé≠ Meme Generator</button>
<div class="modal" id="memeModal">
  <button class="close-btn" onclick="toggleMeme()">‚úñ</button>
  <div class="console-container">
    <img src="console-layout.png" class="console-bg" alt="MEME Generator">

    <!-- üéõ Controls Section -->
    <div class="console-controls">
      <label>MEME Generator</label>

      <select id="bgSelect">
        <option value="">None</option>
        <option value="bg-trading.png">Trading Setup</option>
        <option value="bg-luxury.png">Luxury Lifestyle</option>
        <option value="bg-degen.png">Degen House</option>
        <option value="casino.png">Casino</option>
        <option value="jet.png">Jet</option>
        <option value="Liberty.png">Liberty Statue</option>
        <option value="GTA 6.png">GTA 6</option>
        <option value="dubai.png">Dubai</option>
        <option value="Office.png">Office</option>
        <option value="elon-meme.png">Elon</option>
      </select>

      <select id="hatSelect">
        <option value="">None</option>
        <option value="wagmik-hat.png">WAGMIK Hat</option>
        <option value="WAGMIK-mask.png">WAGMIK Mask</option>
        <option value="wif-hat.png">WIF Hat</option>
        <option value="bonk-hat2.png">BONK Hat</option>
        <option value="bonk-mask.png">BONK Mask</option>
        <option value="degen-hat.png">DEGEN Hat</option>
        <option value="degen-hat2.png">DEGEN Hat2</option>
        <option value="pepe-hat.png">PEPE Hat</option>
        <option value="Pepe-mask.png">PEPE Mask</option>
        <option value="tom-mask.png">TOM Mask</option>
      </select>

      <select id="chainSelect">
        <option value="">None</option>
        <option value="chain-wagmik.png">WAGMIK Chain</option>
        <option value="chain2.png">Cuban Chain</option>
        <option value="glasses.png">Meme Glasses</option>
        <option value="god-candle.png">God Candle</option>
        <option value="bro-look.png">Bro Look</option>
        <option value="wojak.png">Wojak</option>
        <option value="wojak-mystery.png">Wojak 2</option>
        <option value="wojak-boomer.png">Wojak Boomer</option>
      </select>

      <select id="characterSelect">
        <option value="">None</option>
        <option value="wagmik-cheering.png">WAGMIK Cheering</option>
        <option value="ponke.png">Ponke</option>
        <option value="pepe.png">Pepe</option>
        <option value="wolf.png">Wolf</option>
        <option value="wolf-rich.png">Wolf Rich</option>
        <option value="ansem.png">Ansem</option>
        <option value="mert.png">Mert</option>
        <option value="bossman.png">Bossman</option>
        <option value="DJ.png">DJ</option>
        <option value="goku-ui.png">Goku UI</option>
        <option value="saitama.png">Saitama</option>
      </select>

     <input autocapitalize="off" autocomplete="off" id="topText" inputmode="text" placeholder="Top Text" tabindex="0" type="text"/>
     <input autocapitalize="off" autocomplete="off" id="bottomText" inputmode="text" placeholder="Bottom Text" tabindex="0" type="text"/>

      <!-- üß† Stylish Buttons -->
      <div class="button-row">
        <button onclick="drawMeme()" class="console-btn">Preview</button>
        <button onclick="downloadMeme()" class="console-btn">Download</button>
        <button onclick="resetMeme()" class="console-btn full-width">Reset</button>
        <button id="shareBtn">Share on X</button>
      </div>
    </div>
   
    <!-- üñº Preview Canvas -->
    <canvas id="memeCanvas" class="console-canvas" width="360" height="360"></canvas>

    <!-- üîÅ Rotation Slider -->
    <div id="rotationSliderWrapper" style="display:none; margin-top: 10px;">
      <label style="color: white;">Rotate</label>
      <input id="rotationSlider" type="range" min="-180" max="180" value="0" />
      <button id="deleteBtn" style="margin-top: 8px;">üóë Delete</button>
    </div>
  </div>
</div>

 <!-- üì¢ Share Rules Modal -->
<div id="shareModal" class="share-modal hidden">
¬† <div class="modal-content">
¬† ¬† <h2>üìú Meme Sharing Rules</h2>
¬† ¬† <ul>
¬† ¬† ¬† <li>‚úÖ Tag <strong>@wagmikdotsol</strong></li>
¬† ¬† ¬† <li>‚úÖ Follow the official account</li>
¬† ¬† ¬† <li>‚úÖ Use the meme generator</li>
¬† ¬† ¬† <li>‚úÖ Verified X accounts only</li>
¬† ¬† ¬† <li>üìå Upload the meme you downloaded</li>
¬† ¬† </ul>
¬† ¬† <p style="margin-top: 20px;">
¬† ¬† ¬† üöÄ Press <strong>Continue</strong> to go to X and post your meme.
¬† ¬† ¬† <br />
¬† ¬† ¬† üß† Don‚Äôt forget to <strong>attach your image</strong>!
¬† ¬† </p>
¬† ¬† <div class="button-container">
¬† ¬† ¬† <button id="confirmShare">Continue to X</button>
¬† ¬† ¬† <button id="cancelShare">Cancel</button>
¬† ¬† </div>
¬† </div>
</div>

<!-- üåê Floating App Links (Left Center) -->
<div class="floating-apps">
 <a href="https://x.com/WAGMIKdotSOL" target="_blank">
    <img src="x_image.png" alt="Twitter X" class="app-logo" />
  </a>
  <a href="https://bullx.io/login?redirectUrl=" target="_blank">
    <img src="bullx.png" alt="BullX" class="app-logo" />
  </a>
  <a href="https://axiom.trade/" target="_blank">
    <img src="axiom.png" alt="Axiom" class="app-logo" />
  </a>
  <a href="https://photon-sol.tinyastro.io/" target="_blank">
    <img src="photon.png" alt="Photon" class="app-logo" />
  </a>
</div>

  
  <script>
   function createCoin() {
    const coin = document.createElement("div");
    coin.classList.add("coin");
    coin.style.left = Math.random() * 100 + "vw";
    coin.style.animationDuration = (Math.random() * 3 + 3) + "s";
    document.getElementById("coin-fall").appendChild(coin);
    setTimeout(() => coin.remove(), 7000);
  }
  setInterval(createCoin, 400);
  </script>
  <script>
   // Lightbox Logic
  const lightbox = document.getElementById("lightbox");
  const lightboxImg = document.getElementById("lightbox-img");
  const memes = document.querySelectorAll(".gallery-meme");

  memes.forEach((meme) => {
    meme.addEventListener("click", () => {
      lightboxImg.src = meme.src;
      lightbox.style.display = "flex";
    });
  });

  lightbox.addEventListener("click", () => {
    lightbox.style.display = "none";
  });
  </script>
  <script>
   const chapters = document.querySelectorAll('.lore-chapter');

  window.addEventListener('scroll', () => {
    const scrollY = window.scrollY;

    chapters.forEach((chapter, index) => {
      // Reveal each chapter after a certain scroll depth
      const triggerPoint = 200 + index * 150;

      if (scrollY > triggerPoint) {
        chapter.classList.add('visible');
      } else {
        chapter.classList.remove('visible');
      }
    });
  });
  </script>
  <script>
  function toggleLore() {
  const modal = document.getElementById('loreModal');
  modal.classList.toggle('active');

  // üëá Fix focus issue on mobile
  if (window.innerWidth < 768 && modal.classList.contains('active')) {
    modal.focus();
  }
}

function toggleDegen() {
  const modal = document.getElementById('degenModal');
  const lines = [
    "Buy high, hold higher.",
    "You only lose when you sell.",
    "Gas fees are a state of mind.",
    "If it dumps, double down.",
    "Degen rule #88: Never check the chart.",
    "Real utility is in the meme.",
    "WAGMIK is a vibe, not a roadmap.",
    "Coins come and go, but hopium is eternal.",
    "He who panics last, panics best.",
    "Trust the vibes, not the volume."
  ];

  if (!modal.classList.contains('active')) {
    document.getElementById('degenProphecy').textContent =
      `"${lines[Math.floor(Math.random() * lines.length)]}"`;
  }

  modal.classList.toggle('active');

  if (window.innerWidth < 768 && modal.classList.contains('active')) {
    modal.focus();
  }
}

function toggleMeme() {
  const memeModal = document.getElementById('memeModal');
  const loreBtn = document.querySelector('.lore-toggle-btn');
  const degenBtn = document.querySelector('.degen-toggle-btn');
  const memeBtn = document.querySelector('.meme-toggle-btn');

  memeModal.classList.toggle('active');

  if (window.innerWidth < 768) {
    const isActive = memeModal.classList.contains('active');
    const visibility = isActive ? 'hidden' : 'visible';

    loreBtn.style.visibility = visibility;
    degenBtn.style.visibility = visibility;
    memeBtn.style.visibility = visibility;

    document.body.style.overflow = isActive ? 'hidden' : '';
  }
}
  </script>

<script>
  window.Jupiter.init({
    displayMode: "integrated",
    integratedTargetId: "jupiter-terminal", // üëà attaches to your div
    endpoint: "https://api.mainnet-beta.solana.com",
    formProps: {
      fixedOutputMint: "EPjFWdd5AufqSSqeM2qN1xzxybapC8G4wEGGkZwyTDt1", // ‚¨ÖÔ∏è Replace with actual WAGMIK mint
      initialAmount: "1"
    },
    containerStyles: {
      width: "100%",
      maxWidth: "400px",
      margin: "0 auto",
      borderRadius: "12px",
      zIndex: 9999,
      boxShadow: "0 0 12px rgba(0,0,0,0.3)",
      overflow: "hidden"
    }
  });
</script>

<script>

// --- Canvas Setup ---
const canvas = document.getElementById('memeCanvas');
const ctx = canvas.getContext('2d');

// Only block gestures if touches are inside canvas bounds
function shouldBlockCanvasGesture(e) {
¬† const rect = canvas.getBoundingClientRect();
¬† const x = e.touches[0]?.clientX;
¬† const y = e.touches[0]?.clientY;
¬† return (
¬† ¬† x >= rect.left &&
¬† ¬† x <= rect.right &&
¬† ¬† y >= rect.top &&
¬† ¬† y <= rect.bottom
¬† );
}

// ‚úÖ Attach listeners to canvas touch events
["touchstart", "touchmove", "touchend"].forEach(eventType => {
¬† canvas.addEventListener(eventType, (e) => {
¬† ¬† if (shouldBlockCanvasGesture(e)) {
¬† ¬† ¬† e.preventDefault(); // ‚õî prevent browser from hijacking gesture
¬† ¬† }
¬† }, { passive: false });
});

const bgSelect = document.getElementById('bgSelect');
const hatSelect = document.getElementById('hatSelect');
const chainSelect = document.getElementById('chainSelect');
const characterSelect = document.getElementById('characterSelect');
const topTextInput = document.getElementById('topText');
const bottomTextInput = document.getElementById('bottomText');

const rotationSlider = document.getElementById("rotationSlider");
const sliderWrapper = document.getElementById("rotationSliderWrapper");

let selectedObj = null;
let activeTouchObj = null;
let lockedObj = null;
let selectedTouchTarget = null;

const hats = [];
const chains = [];
const characters = [];

const backgrounds = {
  "bg-trading.png": new Image(),
  "bg-luxury.png": new Image(),
  "bg-degen.png": new Image(),
  "casino.png": new Image(),
  "jet.png": new Image(),
  "Liberty.png": new Image(),
  "GTA 6.png": new Image(),
  "dubai.png": new Image(),
  "Office.png": new Image(),
  "elon-meme.png": new Image()
};

Object.keys(backgrounds).forEach(key => backgrounds[key].src = key);

rotationSlider.addEventListener("input", () => {
  if (selectedObj) {
    selectedObj.rotation = parseFloat(rotationSlider.value) * Math.PI / 180;
    drawCanvas();
  }
});

document.getElementById('deleteBtn').addEventListener('click', deleteSelectedObject);

function drawMeme() {
¬† const hatVal = hatSelect.value;
¬† const chainVal = chainSelect.value;
¬† const charVal = characterSelect.value;

¬† if (hatVal && !hats.some(obj => obj.img.src.includes(hatVal))) {
¬† ¬† createAccessory('hat', hatVal, 0.7);
¬† }

¬† if (chainVal && !chains.some(obj => obj.img.src.includes(chainVal))) {
¬† ¬† createAccessory('chain', chainVal, 0.8);
¬† }

¬† if (charVal && !characters.some(obj => obj.img.src.includes(charVal))) {
¬† ¬† createAccessory('character', charVal, 1.0);
¬† }
}

function createAccessory(type, imgSrc, scale = 1.0) {
¬† const targetArray = type === 'hat' ? hats : type === 'chain' ? chains : characters;
¬† if (targetArray.some(obj => obj.img.src === imgSrc)) return;

¬† const img = new Image();
¬† img.src = imgSrc;

¬† const obj = {
  role: type, // üëà ADD THIS LINE
  img,
  x: 0,
  y: 0,
¬† ¬† scale,
¬† ¬† rotation: 0,
¬† ¬† dragging: false,
¬† ¬† gestureActive: false,
¬† ¬† offsetX: 0,
¬† ¬† offsetY: 0,
¬† ¬† initialScale: scale,
¬† ¬† initialRotation: 0,
¬† };

¬† targetArray.push(obj);

¬† // ‚úÖ Always attach handlers
¬† setupDragAndResize(obj);
¬† setupTouchHandlers(obj); // ‚Üê Move here, outside of onload

¬† // ‚úÖ Only rely on onload for redraw, not logic
¬†img.onload = () => {
  setupDragAndResize(obj);
  setupTouchHandlers(obj);      // ‚úÖ Ensure handlers are bound on first load
  window.activeTouchObj = null; // ‚úÖ Reset active touch in case it's stuck
  drawCanvas();
 };
}

function drawCanvas() {
¬† ctx.clearRect(0, 0, canvas.width, canvas.height);

¬† const bg = backgrounds[bgSelect.value];
¬† if (bg && bg.complete) {
¬† ¬† ctx.drawImage(bg, 0, 0, canvas.width, canvas.height);
¬† }
 
const allObjects = [...hats, ...chains, ...characters];

allObjects.sort((a, b) => {
  const getPriority = (obj) =>
    obj.img.src.includes('hat') ? 3 :
    obj.img.src.includes('chain') ? 2 :
    obj.img.src.includes('character') ? 1 : 0;
  return getPriority(a) - getPriority(b);
});

allObjects.forEach(obj => {
  if (!obj.img || !obj.img.src) return;

  const w = obj.img.width * obj.scale;
  const h = obj.img.height * obj.scale;

  ctx.save();
  ctx.translate(obj.x + w / 2, obj.y + h / 2);
  ctx.rotate(obj.rotation);
  ctx.drawImage(obj.img, -w / 2, -h / 2, w, h);

  if (window.innerWidth < 768 && obj === activeTouchObj) {
    ctx.strokeStyle = 'rgba(255, 255, 255, 0.6)';
    ctx.lineWidth = 2;
    ctx.setLineDash([6, 4]);
    ctx.strokeRect(-w / 2, -h / 2, w, h);
    ctx.setLineDash([]);

    const btnSize = 24;
    const btnX = -w / 2 - btnSize / 2;
    const btnY = -h / 2 - btnSize / 2;

    ctx.fillStyle = 'red';
    ctx.beginPath();
    ctx.arc(btnX + btnSize / 2, btnY + btnSize / 2, btnSize / 2, 0, Math.PI * 2);
    ctx.fill();
    ctx.fillStyle = 'white';
    ctx.font = '16px sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText('‚úï', btnX + btnSize / 2, btnY + btnSize / 2);

    const cos = Math.cos(obj.rotation);
    const sin = Math.sin(obj.rotation);
    const centerX = obj.x + (obj.img.width * obj.scale) / 2;
    const centerY = obj.y + (obj.img.height * obj.scale) / 2;

    const btnCenterX = centerX + (btnX * cos - btnY * sin);
    const btnCenterY = centerY + (btnX * sin + btnY * cos);

    obj.deleteBtnBounds = {
      x: btnCenterX - btnSize / 2,
      y: btnCenterY - btnSize / 2,
      size: btnSize,
      centerX: btnCenterX,
      centerY: btnCenterY
    };
  }

  if (window.innerWidth >= 768) {
    delete obj.deleteBtnBounds;
  }

  ctx.restore();
});


  ctx.textBaseline = 'top'; // add this
  ctx.font = '28px Impact, sans-serif';
  ctx.textAlign = 'center';
  ctx.fillStyle = 'white';
  ctx.strokeStyle = 'black';
  ctx.lineWidth = 2;

  const top = topTextInput.value.toUpperCase();
  const bot = bottomTextInput.value.toUpperCase();
  if (top) { ctx.fillText(top, canvas.width / 2, 40); ctx.strokeText(top, canvas.width / 2, 40); }
  if (bot) { ctx.fillText(bot, canvas.width / 2, canvas.height - 40); ctx.strokeText(bot, canvas.width / 2, canvas.height - 40); }
}

function resetMeme() {
  // Clear object arrays
  hats.length = 0;
  chains.length = 0;
  characters.length = 0;

  // Clear all selection references
  selectedObj = null;
  activeTouchObj = null;
  lockedObj = null;
  selectedTouchTarget = null;

  // Reset dropdowns to index 0 (which should be "None")
  bgSelect.selectedIndex = 0;
  hatSelect.selectedIndex = 0;
  chainSelect.selectedIndex = 0;
  characterSelect.selectedIndex = 0;

  // Explicitly clear .value in case options didn‚Äôt trigger a 'change' event
  bgSelect.value = "";
  hatSelect.value = "";
  chainSelect.value = "";
  characterSelect.value = "";

  // Hide the rotation slider (if visible)
  sliderWrapper.style.display = 'none';

  // Force redraw to clear canvas contents
  drawCanvas();

setTimeout(() => {
  [...hats, ...chains, ...characters].forEach(obj => {
    setupTouchHandlers(obj);
    obj.dragging = false;
    obj.gestureActive = false;
  });
  window.activeTouchObj = null;
 }, 50); // short delay ensures canvas is ready
}

function downloadMeme() {
  const link = document.createElement('a');
  link.download = 'wagmik-meme.png';
  link.href = canvas.toDataURL('image/png');
  link.click();
}

function enforceLayerOrder() {
¬† const allObjects = [...characters, ...chains, ...hats];
¬† allObjects.forEach(obj => {
¬† ¬† if (obj.role === 'character') {
¬† ¬† ¬† // Characters should draw behind
¬† ¬† ¬† const index = allObjects.indexOf(obj);
¬† ¬† ¬† if (index > -1) {
¬† ¬† ¬† ¬† allObjects.splice(index, 1);
¬† ¬† ¬† ¬† allObjects.unshift(obj);
¬† ¬† ¬† }
¬† ¬† }
¬† });
}

function deleteSelectedObject() {
¬† if (!selectedObj) return;

¬† // Remove selectedObj from its corresponding array
¬† [hats, chains, characters].forEach(arr => {
¬† ¬† const index = arr.indexOf(selectedObj);
¬† ¬† if (index !== -1) arr.splice(index, 1);
¬† });

¬† selectedObj = null;
¬† activeTouchObj = null;
¬† lockedObj = null;
¬† selectedTouchTarget = null;

  hatSelect.value = '';
  chainSelect.value = '';
  characterSelect.value = '';

¬† sliderWrapper.style.display = 'none'; // hide desktop slider
¬† drawCanvas();
}

function isInside(mx, my, x, y, w, h) {
  return mx >= x && mx <= x + w && my >= y && my <= y + h;
}

function setupDragAndResize(obj) {
  let dragging = null;
  canvas.addEventListener("mousedown", (e) => {
    const { left, top } = canvas.getBoundingClientRect();
    const mx = e.clientX - left;
    const my = e.clientY - top;
    [...characters, ...chains, ...hats].forEach(item => {
      const w = item.img.width * item.scale;
      const h = item.img.height * item.scale;
      if (isInside(mx, my, item.x, item.y, w, h)) {
        item.dragging = true; dragging = item;
        selectedObj = item;
        if (!/Mobi|Android/i.test(navigator.userAgent)) {
          sliderWrapper.style.display = 'block';
          rotationSlider.value = (item.rotation * 180 / Math.PI).toFixed(0);
        }
      }
    });
    if (!dragging) {
      selectedObj = null;
      sliderWrapper.style.display = 'none';
    }
  });

  canvas.addEventListener("mousemove", (e) => {
    if (!dragging) return;
    const rect = canvas.getBoundingClientRect();
    dragging.x = e.clientX - rect.left - (dragging.img.width * dragging.scale) / 2;
    dragging.y = e.clientY - rect.top - (dragging.img.height * dragging.scale) / 2;
    drawCanvas();
  });

  ["mouseup", "mouseleave"].forEach(evt => {
    canvas.addEventListener(evt, () => {
      if (dragging) dragging.dragging = false;
      dragging = null;
    });
  });

 canvas.addEventListener("wheel", (e) => {
  if (!dragging) return;
  e.preventDefault();

  const zoomFactor = 1.05;
  dragging.scale *= e.deltaY < 0 ? zoomFactor : 1 / zoomFactor;
  dragging.scale = Math.max(0.05, Math.min(4.0, dragging.scale));
  drawCanvas();
});
}

["touchstart", "touchmove", "touchend"].forEach(eventType => {
¬† canvas.addEventListener(eventType, (e) => {
¬† ¬† if (shouldBlockCanvasGesture(e)) {
¬† ¬† ¬† e.preventDefault();
¬† ¬† }
¬† }, { passive: false });
});

function setupTouchHandlers(obj) {
  const touchStartHandler = (e) => {
    const rect = canvas.getBoundingClientRect();
    const touch = e.touches[0];
    const x = touch.clientX - rect.left;
    const y = touch.clientY - rect.top;

    // Check if tapping delete button
    if (e.touches.length === 1 && obj.deleteBtnBounds) {
      const { centerX, centerY, size } = obj.deleteBtnBounds;
      const dx = x - centerX;
      const dy = y - centerY;
      const dist = Math.sqrt(dx * dx + dy * dy);
      if (dist <= size / 2) {
        e.preventDefault(); // prevent accidental drag
        selectedObj = obj;
        deleteSelectedObject();
        return;
      }
    }

    const w = obj.img.width * obj.scale;
    const h = obj.img.height * obj.scale;

    const isInside = (
      x >= obj.x && x <= obj.x + w &&
      y >= obj.y && y <= obj.y + h
    );

    // Single-finger drag
    if (e.touches.length === 1 && isInside) {
      if (!lockedObj || lockedObj === obj) {
        if (selectedTouchTarget && selectedTouchTarget !== obj) {
          selectedTouchTarget = null;
        }
        selectedTouchTarget = obj;
        lockedObj = obj;
        obj.dragging = true;
        activeTouchObj = obj;
      }
    }

    // Two-finger gesture
    if (e.touches.length === 2 && (!lockedObj || lockedObj === obj)) {
      const [t1, t2] = e.touches;
      const dx = t2.clientX - t1.clientX;
      const dy = t2.clientY - t1.clientY;

      initialDist = Math.hypot(dx, dy);
      initialAngle = Math.atan2(dy, dx);
      initialScale = obj.scale;
      initialRotation = obj.rotation;

      const centerX = (t1.clientX + t2.clientX) / 2;
      const centerY = (t1.clientY + t2.clientY) / 2;

      const objCenterX = obj.x + w / 2;
      const objCenterY = obj.y + h / 2;

      obj.offsetX = objCenterX - (centerX - rect.left);
      obj.offsetY = objCenterY - (centerY - rect.top);

      lockedObj = obj;
      obj.gestureActive = true;
      activeTouchObj = obj;
    }
  };

  // ‚úÖ Clean up any previous handler for this object
  if (obj._touchStartHandler) {
    canvas.removeEventListener('touchstart', obj._touchStartHandler);
  }

  // ‚úÖ Bind and store
  canvas.addEventListener('touchstart', touchStartHandler, { passive: false });
  obj._touchStartHandler = touchStartHandler;

¬† canvas.addEventListener('touchmove', (e) => {
¬† ¬† e.preventDefault();

¬† ¬† if (e.touches.length === 1 && obj === activeTouchObj && obj.dragging) {
¬† ¬† ¬† const rect = canvas.getBoundingClientRect();
¬† ¬† ¬† obj.x = e.touches[0].clientX - rect.left - (obj.img.width * obj.scale) / 2;
¬† ¬† ¬† obj.y = e.touches[0].clientY - rect.top - (obj.img.height * obj.scale) / 2;
¬† ¬† ¬† drawCanvas();
¬† ¬† }

¬† ¬† if (e.touches.length === 2 && obj === activeTouchObj && obj.gestureActive) {
¬† ¬† ¬† const [touch1, touch2] = [e.touches[0], e.touches[1]];
¬† ¬† ¬† const dx = touch2.clientX - touch1.clientX;
¬† ¬† ¬† const dy = touch2.clientY - touch1.clientY;

¬† ¬† ¬† const newDist = Math.hypot(dx, dy);
¬† ¬† ¬† const newAngle = Math.atan2(dy, dx);

¬† ¬† ¬† const minScale = window.innerWidth < 768 ? 0.05 : 0.2;
¬† ¬† ¬† const maxScale = 2.5;

¬† ¬† ¬† obj.scale = Math.max(minScale, Math.min(maxScale, initialScale * newDist / initialDist));
¬† ¬† ¬† obj.rotation = initialRotation + (newAngle - initialAngle);

¬† ¬† ¬† const centerX = (touch1.clientX + touch2.clientX) / 2;
¬† ¬† ¬† const centerY = (touch1.clientY + touch2.clientY) / 2;
¬† ¬† ¬† const rect = canvas.getBoundingClientRect();

¬† ¬† ¬† const w = obj.img.width * obj.scale;
¬† ¬† ¬† const h = obj.img.height * obj.scale;

¬† ¬† ¬† obj.x = centerX - rect.left - w / 2 + obj.offsetX;
¬† ¬† ¬† obj.y = centerY - rect.top - h / 2 + obj.offsetY;

¬† ¬† ¬† drawCanvas();
¬† ¬† }
¬† }, { passive: false });

¬† canvas.addEventListener('touchend', () => {
¬† ¬† if (obj === activeTouchObj) {
¬† ¬† ¬† obj.dragging = false;
¬† ¬† ¬† obj.gestureActive = false;
¬† ¬† ¬† activeTouchObj = null;
¬† ¬† ¬† lockedObj = null;
      selectedTouchTarget = null;
¬† ¬† }
¬† }, { passive: false });
}

[...hats, ...chains, ...characters].forEach(obj => {
  setupDragAndResize(obj);
  setupTouchHandlers(obj);
});

[bgSelect, hatSelect, chainSelect, characterSelect].forEach(el => el.addEventListener('change', drawMeme));
bgSelect.addEventListener('change', drawCanvas);
[topTextInput, bottomTextInput].forEach(el => el.addEventListener('input', drawCanvas));
</script>

<script>
function shareToX() {
¬† const shareBtn = document.getElementById("shareBtn");
¬† const shareModal = document.getElementById("shareModal");
¬† const confirmBtn = document.getElementById("confirmShare");
¬† const cancelBtn = document.getElementById("cancelShare");

¬† shareBtn.addEventListener("click", async () => {
¬† ¬† canvas.toBlob(async (blob) => {
¬† ¬† ¬† if (!blob) return;
¬† ¬† ¬† const reader = new FileReader();
¬† ¬† ¬† reader.onloadend = () => {
¬† ¬† ¬† ¬† const link = document.createElement("a");
¬† ¬† ¬† ¬† link.href = reader.result;
¬† ¬† ¬† ¬† link.download = "wagmik-meme.png";
¬† ¬† ¬† ¬† document.body.appendChild(link);
¬† ¬† ¬† ¬† link.click();
¬† ¬† ¬† ¬† document.body.removeChild(link);

¬† ¬† ¬† ¬† shareModal.classList.remove("hidden");
¬† ¬† ¬† };
¬† ¬† ¬† reader.readAsDataURL(blob);
¬† ¬† });
¬† });

¬† cancelBtn.onclick = () => {
¬† ¬† shareModal.classList.add("hidden");
¬† };

¬† confirmBtn.onclick = () => {
¬† ¬† shareModal.classList.add("hidden");

¬† ¬† const top = topTextInput.value.trim();
¬† ¬† const bottom = bottomTextInput.value.trim();
¬† ¬† const memeText = `${top} ${bottom}`.replace(/\s+/g, ' ').trim();

¬† ¬† const tweetText = `${memeText}\n\nI just made a $WAGMIK meme! üíÄüî•\n\nüìåTry it üëâ https://wagmik.xyz`;
¬† ¬† const tweetURL = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}`;

¬† ¬† window.open(tweetURL, '_blank');
¬† };
}
</script>

 <script>
¬† shareToX(); 
</script>
  
 </body>
</html>
</body>
</html>
