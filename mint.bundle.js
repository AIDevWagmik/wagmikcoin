(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();class lf extends Error{name="UmiError";constructor(e,t,r,s){super(e),this.source=t,this.sourceDetails=r,this.cause=s,this.message=`${this.message}

Source: ${this.getFullSource()}${this.cause?`

Caused By: ${this.cause}`:""}
`}getCapitalizedSource(){return this.source==="sdk"||this.source==="rpc"?this.source.toUpperCase():this.source[0].toUpperCase()+this.source.slice(1)}getFullSource(){const e=this.getCapitalizedSource(),t=this.sourceDetails?` > ${this.sourceDetails}`:"";return e+t}toString(){return`[${this.name}] ${this.message}`}}class ff extends lf{name="SdkError";constructor(e,t){super(e,"sdk",void 0,t)}}class Br extends ff{name="InterfaceImplementationMissingError";constructor(e,t){const r=e.replace(/Interface$/,""),s=`Tried using ${e} but no implementation of that interface was found. Make sure an implementation is registered, e.g. via "context.${t} = new My${r}();".`;super(s)}}function hf(){const n=()=>{throw new Br("DownloaderInterface","downloader")};return{download:n,downloadJson:n}}function df(){const n=()=>{throw new Br("EddsaInterface","eddsa")};return{generateKeypair:n,createKeypairFromSecretKey:n,createKeypairFromSeed:n,createKeypairFromFile:n,createKeypairFromSolanaConfig:n,isOnCurve:n,findPda:n,sign:n,verify:n}}function pf(){return{send:()=>{throw new Br("HttpInterface","http")}}}function yf(){const n=()=>{throw new Br("ProgramRepositoryInterface","programs")};return{has:n,get:n,getPublicKey:n,all:n,add:n,bind:n,unbind:n,clone:n,resolveError:n}}function gf(){const n=()=>{throw new Br("RpcInterface","rpc")};return{getEndpoint:n,getCluster:n,getAccount:n,getAccounts:n,getProgramAccounts:n,getBlockTime:n,getBalance:n,getRent:n,getSlot:n,getGenesisHash:n,getLatestBlockhash:n,getTransaction:n,getSignatureStatuses:n,accountExists:n,airdrop:n,call:n,sendTransaction:n,simulateTransaction:n,confirmTransaction:n}}function mf(){const n=()=>{throw new Br("SerializerInterface","serializer")};return{tuple:n,array:n,map:n,set:n,option:n,nullable:n,struct:n,enum:n,dataEnum:n,string:n,bool:n,unit:n,u8:n,u16:n,u32:n,u64:n,u128:n,i8:n,i16:n,i32:n,i64:n,i128:n,f32:n,f64:n,bytes:n,publicKey:n}}function ga(){const n=new Error("Trying to use a NullSigner. Did you forget to set a Signer on your Umi instance? See the `signerIdentity` method for more information."),e=()=>{throw n};return{get publicKey(){throw n},signMessage:e,signTransaction:e,signAllTransactions:e}}function bf(){const n=()=>{throw new Br("TransactionFactoryInterface","transactions")};return{create:n,serialize:n,deserialize:n,serializeMessage:n,deserializeMessage:n}}function wf(){const n=()=>{throw new Br("UploaderInterface","uploader")};return{upload:n,uploadJson:n,getUploadPrice:n}}const kf=()=>({downloader:hf(),eddsa:df(),http:pf(),identity:ga(),payer:ga(),programs:yf(),rpc:gf(),serializer:mf(),transactions:bf(),uploader:wf()}),Ef=(n,e,t)=>{const r=n.message.header.numRequiredSignatures,i=n.message.accounts.slice(0,r).findIndex(c=>c===t);if(i<0)throw new Error("The provided signer is not required to sign this transaction.");const o=[...n.signatures];return o[i]=e,{...n,signatures:o}},Af=n=>Sf(n,n.eddsa.generateKeypair()),Sf=(n,e)=>({publicKey:e.publicKey,secretKey:e.secretKey,async signMessage(t){return n.eddsa.sign(t,e)},async signTransaction(t){const r=t.serializedMessage,s=n.eddsa.sign(r,e);return Ef(t,s,e.publicKey)},async signAllTransactions(t){return Promise.all(t.map(r=>this.signTransaction(r)))}}),vf=(n,e=!0)=>({install(t){t.identity=n,e&&(t.payer=n)}}),_f=()=>({...kf(),use(n){return n.install(this),this}});function Xi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function di(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var xr={},Rr={},Us={},ma;function Kn(){return ma||(ma=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenStandard=n.UseMethod=n.MetadataKey=void 0,function(e){e[e.Uninitialized=0]="Uninitialized",e[e.MetadataV1=4]="MetadataV1",e[e.EditionV1=1]="EditionV1",e[e.MasterEditionV1=2]="MasterEditionV1",e[e.MasterEditionV2=6]="MasterEditionV2",e[e.EditionMarker=7]="EditionMarker",e[e.UseAuthorityRecord=8]="UseAuthorityRecord",e[e.CollectionAuthorityRecord=9]="CollectionAuthorityRecord"}(n.MetadataKey||(n.MetadataKey={})),function(e){e[e.Burn=0]="Burn",e[e.Single=1]="Single",e[e.Multiple=2]="Multiple"}(n.UseMethod||(n.UseMethod={})),function(e){e[e.NonFungible=0]="NonFungible",e[e.FungibleAsset=1]="FungibleAsset",e[e.Fungible=2]="Fungible",e[e.NonFungibleEdition=3]="NonFungibleEdition"}(n.TokenStandard||(n.TokenStandard={}))}(Us)),Us}var Mr={},Pr={},Tr={},Cr={},Os={},$n={},ba;function If(){if(ba)return $n;ba=1,$n.byteLength=c,$n.toByteArray=m,$n.fromByteArray=v;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)n[s]=r[s],e[r.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(w){var B=w.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var R=w.indexOf("=");R===-1&&(R=B);var C=R===B?0:4-R%4;return[R,C]}function c(w){var B=o(w),R=B[0],C=B[1];return(R+C)*3/4-C}function f(w,B,R){return(B+R)*3/4-R}function m(w){var B,R=o(w),C=R[0],D=R[1],V=new t(f(w,C,D)),W=0,X=D>0?C-4:C,Y;for(Y=0;Y<X;Y+=4)B=e[w.charCodeAt(Y)]<<18|e[w.charCodeAt(Y+1)]<<12|e[w.charCodeAt(Y+2)]<<6|e[w.charCodeAt(Y+3)],V[W++]=B>>16&255,V[W++]=B>>8&255,V[W++]=B&255;return D===2&&(B=e[w.charCodeAt(Y)]<<2|e[w.charCodeAt(Y+1)]>>4,V[W++]=B&255),D===1&&(B=e[w.charCodeAt(Y)]<<10|e[w.charCodeAt(Y+1)]<<4|e[w.charCodeAt(Y+2)]>>2,V[W++]=B>>8&255,V[W++]=B&255),V}function b(w){return n[w>>18&63]+n[w>>12&63]+n[w>>6&63]+n[w&63]}function A(w,B,R){for(var C,D=[],V=B;V<R;V+=3)C=(w[V]<<16&16711680)+(w[V+1]<<8&65280)+(w[V+2]&255),D.push(b(C));return D.join("")}function v(w){for(var B,R=w.length,C=R%3,D=[],V=16383,W=0,X=R-C;W<X;W+=V)D.push(A(w,W,W+V>X?X:W+V));return C===1?(B=w[R-1],D.push(n[B>>2]+n[B<<4&63]+"==")):C===2&&(B=(w[R-2]<<8)+w[R-1],D.push(n[B>>10]+n[B>>4&63]+n[B<<2&63]+"=")),D.join("")}return $n}var Si={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var wa;function Bf(){return wa||(wa=1,Si.read=function(n,e,t,r,s){var i,o,c=s*8-r-1,f=(1<<c)-1,m=f>>1,b=-7,A=t?s-1:0,v=t?-1:1,w=n[e+A];for(A+=v,i=w&(1<<-b)-1,w>>=-b,b+=c;b>0;i=i*256+n[e+A],A+=v,b-=8);for(o=i&(1<<-b)-1,i>>=-b,b+=r;b>0;o=o*256+n[e+A],A+=v,b-=8);if(i===0)i=1-m;else{if(i===f)return o?NaN:(w?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-m}return(w?-1:1)*o*Math.pow(2,i-r)},Si.write=function(n,e,t,r,s,i){var o,c,f,m=i*8-s-1,b=(1<<m)-1,A=b>>1,v=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=r?0:i-1,B=r?1:-1,R=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,o=b):(o=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-o))<1&&(o--,f*=2),o+A>=1?e+=v/f:e+=v*Math.pow(2,1-A),e*f>=2&&(o++,f/=2),o+A>=b?(c=0,o=b):o+A>=1?(c=(e*f-1)*Math.pow(2,s),o=o+A):(c=e*Math.pow(2,A-1)*Math.pow(2,s),o=0));s>=8;n[t+w]=c&255,w+=B,c/=256,s-=8);for(o=o<<s|c,m+=s;m>0;n[t+w]=o&255,w+=B,o/=256,m-=8);n[t+w-B]|=R*128}),Si}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var ka;function mr(){return ka||(ka=1,function(n){const e=If(),t=Bf(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=c,n.SlowBuffer=V,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const h=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(h,a),h.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(h){if(h>s)throw new RangeError('The value "'+h+'" is invalid for option "size"');const a=new Uint8Array(h);return Object.setPrototypeOf(a,c.prototype),a}function c(h,a,u){if(typeof h=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(h)}return f(h,a,u)}c.poolSize=8192;function f(h,a,u){if(typeof h=="string")return v(h,a);if(ArrayBuffer.isView(h))return B(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(qe(h,ArrayBuffer)||h&&qe(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(qe(h,SharedArrayBuffer)||h&&qe(h.buffer,SharedArrayBuffer)))return R(h,a,u);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const g=h.valueOf&&h.valueOf();if(g!=null&&g!==h)return c.from(g,a,u);const S=C(h);if(S)return S;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return c.from(h[Symbol.toPrimitive]("string"),a,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}c.from=function(h,a,u){return f(h,a,u)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function m(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function b(h,a,u){return m(h),h<=0?o(h):a!==void 0?typeof u=="string"?o(h).fill(a,u):o(h).fill(a):o(h)}c.alloc=function(h,a,u){return b(h,a,u)};function A(h){return m(h),o(h<0?0:D(h)|0)}c.allocUnsafe=function(h){return A(h)},c.allocUnsafeSlow=function(h){return A(h)};function v(h,a){if((typeof a!="string"||a==="")&&(a="utf8"),!c.isEncoding(a))throw new TypeError("Unknown encoding: "+a);const u=W(h,a)|0;let g=o(u);const S=g.write(h,a);return S!==u&&(g=g.slice(0,S)),g}function w(h){const a=h.length<0?0:D(h.length)|0,u=o(a);for(let g=0;g<a;g+=1)u[g]=h[g]&255;return u}function B(h){if(qe(h,Uint8Array)){const a=new Uint8Array(h);return R(a.buffer,a.byteOffset,a.byteLength)}return w(h)}function R(h,a,u){if(a<0||h.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<a+(u||0))throw new RangeError('"length" is outside of buffer bounds');let g;return a===void 0&&u===void 0?g=new Uint8Array(h):u===void 0?g=new Uint8Array(h,a):g=new Uint8Array(h,a,u),Object.setPrototypeOf(g,c.prototype),g}function C(h){if(c.isBuffer(h)){const a=D(h.length)|0,u=o(a);return u.length===0||h.copy(u,0,0,a),u}if(h.length!==void 0)return typeof h.length!="number"||Ue(h.length)?o(0):w(h);if(h.type==="Buffer"&&Array.isArray(h.data))return w(h.data)}function D(h){if(h>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return h|0}function V(h){return+h!=h&&(h=0),c.alloc(+h)}c.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==c.prototype},c.compare=function(a,u){if(qe(a,Uint8Array)&&(a=c.from(a,a.offset,a.byteLength)),qe(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),!c.isBuffer(a)||!c.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===u)return 0;let g=a.length,S=u.length;for(let M=0,O=Math.min(g,S);M<O;++M)if(a[M]!==u[M]){g=a[M],S=u[M];break}return g<S?-1:S<g?1:0},c.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(a,u){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return c.alloc(0);let g;if(u===void 0)for(u=0,g=0;g<a.length;++g)u+=a[g].length;const S=c.allocUnsafe(u);let M=0;for(g=0;g<a.length;++g){let O=a[g];if(qe(O,Uint8Array))M+O.length>S.length?(c.isBuffer(O)||(O=c.from(O)),O.copy(S,M)):Uint8Array.prototype.set.call(S,O,M);else if(c.isBuffer(O))O.copy(S,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=O.length}return S};function W(h,a){if(c.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||qe(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);const u=h.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&u===0)return 0;let S=!1;for(;;)switch(a){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return Ce(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return Ne(h).length;default:if(S)return g?-1:Ce(h).length;a=(""+a).toLowerCase(),S=!0}}c.byteLength=W;function X(h,a,u){let g=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,a>>>=0,u<=a))return"";for(h||(h="utf8");;)switch(h){case"hex":return U(this,a,u);case"utf8":case"utf-8":return l(this,a,u);case"ascii":return x(this,a,u);case"latin1":case"binary":return P(this,a,u);case"base64":return E(this,a,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,a,u);default:if(g)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),g=!0}}c.prototype._isBuffer=!0;function Y(h,a,u){const g=h[a];h[a]=h[u],h[u]=g}c.prototype.swap16=function(){const a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<a;u+=2)Y(this,u,u+1);return this},c.prototype.swap32=function(){const a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<a;u+=4)Y(this,u,u+3),Y(this,u+1,u+2);return this},c.prototype.swap64=function(){const a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<a;u+=8)Y(this,u,u+7),Y(this,u+1,u+6),Y(this,u+2,u+5),Y(this,u+3,u+4);return this},c.prototype.toString=function(){const a=this.length;return a===0?"":arguments.length===0?l(this,0,a):X.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(a){if(!c.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:c.compare(this,a)===0},c.prototype.inspect=function(){let a="";const u=n.INSPECT_MAX_BYTES;return a=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(a+=" ... "),"<Buffer "+a+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(a,u,g,S,M){if(qe(a,Uint8Array)&&(a=c.from(a,a.offset,a.byteLength)),!c.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(u===void 0&&(u=0),g===void 0&&(g=a?a.length:0),S===void 0&&(S=0),M===void 0&&(M=this.length),u<0||g>a.length||S<0||M>this.length)throw new RangeError("out of range index");if(S>=M&&u>=g)return 0;if(S>=M)return-1;if(u>=g)return 1;if(u>>>=0,g>>>=0,S>>>=0,M>>>=0,this===a)return 0;let O=M-S,ie=g-u;const fe=Math.min(O,ie),le=this.slice(S,M),ye=a.slice(u,g);for(let se=0;se<fe;++se)if(le[se]!==ye[se]){O=le[se],ie=ye[se];break}return O<ie?-1:ie<O?1:0};function Z(h,a,u,g,S){if(h.length===0)return-1;if(typeof u=="string"?(g=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,Ue(u)&&(u=S?0:h.length-1),u<0&&(u=h.length+u),u>=h.length){if(S)return-1;u=h.length-1}else if(u<0)if(S)u=0;else return-1;if(typeof a=="string"&&(a=c.from(a,g)),c.isBuffer(a))return a.length===0?-1:oe(h,a,u,g,S);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?S?Uint8Array.prototype.indexOf.call(h,a,u):Uint8Array.prototype.lastIndexOf.call(h,a,u):oe(h,[a],u,g,S);throw new TypeError("val must be string, number or Buffer")}function oe(h,a,u,g,S){let M=1,O=h.length,ie=a.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(h.length<2||a.length<2)return-1;M=2,O/=2,ie/=2,u/=2}function fe(ye,se){return M===1?ye[se]:ye.readUInt16BE(se*M)}let le;if(S){let ye=-1;for(le=u;le<O;le++)if(fe(h,le)===fe(a,ye===-1?0:le-ye)){if(ye===-1&&(ye=le),le-ye+1===ie)return ye*M}else ye!==-1&&(le-=le-ye),ye=-1}else for(u+ie>O&&(u=O-ie),le=u;le>=0;le--){let ye=!0;for(let se=0;se<ie;se++)if(fe(h,le+se)!==fe(a,se)){ye=!1;break}if(ye)return le}return-1}c.prototype.includes=function(a,u,g){return this.indexOf(a,u,g)!==-1},c.prototype.indexOf=function(a,u,g){return Z(this,a,u,g,!0)},c.prototype.lastIndexOf=function(a,u,g){return Z(this,a,u,g,!1)};function ee(h,a,u,g){u=Number(u)||0;const S=h.length-u;g?(g=Number(g),g>S&&(g=S)):g=S;const M=a.length;g>M/2&&(g=M/2);let O;for(O=0;O<g;++O){const ie=parseInt(a.substr(O*2,2),16);if(Ue(ie))return O;h[u+O]=ie}return O}function F(h,a,u,g){return xe(Ce(a,h.length-u),h,u,g)}function K(h,a,u,g){return xe(ze(a),h,u,g)}function q(h,a,u,g){return xe(Ne(a),h,u,g)}function H(h,a,u,g){return xe(En(a,h.length-u),h,u,g)}c.prototype.write=function(a,u,g,S){if(u===void 0)S="utf8",g=this.length,u=0;else if(g===void 0&&typeof u=="string")S=u,g=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(g)?(g=g>>>0,S===void 0&&(S="utf8")):(S=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const M=this.length-u;if((g===void 0||g>M)&&(g=M),a.length>0&&(g<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");S||(S="utf8");let O=!1;for(;;)switch(S){case"hex":return ee(this,a,u,g);case"utf8":case"utf-8":return F(this,a,u,g);case"ascii":case"latin1":case"binary":return K(this,a,u,g);case"base64":return q(this,a,u,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,a,u,g);default:if(O)throw new TypeError("Unknown encoding: "+S);S=(""+S).toLowerCase(),O=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(h,a,u){return a===0&&u===h.length?e.fromByteArray(h):e.fromByteArray(h.slice(a,u))}function l(h,a,u){u=Math.min(h.length,u);const g=[];let S=a;for(;S<u;){const M=h[S];let O=null,ie=M>239?4:M>223?3:M>191?2:1;if(S+ie<=u){let fe,le,ye,se;switch(ie){case 1:M<128&&(O=M);break;case 2:fe=h[S+1],(fe&192)===128&&(se=(M&31)<<6|fe&63,se>127&&(O=se));break;case 3:fe=h[S+1],le=h[S+2],(fe&192)===128&&(le&192)===128&&(se=(M&15)<<12|(fe&63)<<6|le&63,se>2047&&(se<55296||se>57343)&&(O=se));break;case 4:fe=h[S+1],le=h[S+2],ye=h[S+3],(fe&192)===128&&(le&192)===128&&(ye&192)===128&&(se=(M&15)<<18|(fe&63)<<12|(le&63)<<6|ye&63,se>65535&&se<1114112&&(O=se))}}O===null?(O=65533,ie=1):O>65535&&(O-=65536,g.push(O>>>10&1023|55296),O=56320|O&1023),g.push(O),S+=ie}return k(g)}const y=4096;function k(h){const a=h.length;if(a<=y)return String.fromCharCode.apply(String,h);let u="",g=0;for(;g<a;)u+=String.fromCharCode.apply(String,h.slice(g,g+=y));return u}function x(h,a,u){let g="";u=Math.min(h.length,u);for(let S=a;S<u;++S)g+=String.fromCharCode(h[S]&127);return g}function P(h,a,u){let g="";u=Math.min(h.length,u);for(let S=a;S<u;++S)g+=String.fromCharCode(h[S]);return g}function U(h,a,u){const g=h.length;(!a||a<0)&&(a=0),(!u||u<0||u>g)&&(u=g);let S="";for(let M=a;M<u;++M)S+=Ve[h[M]];return S}function N(h,a,u){const g=h.slice(a,u);let S="";for(let M=0;M<g.length-1;M+=2)S+=String.fromCharCode(g[M]+g[M+1]*256);return S}c.prototype.slice=function(a,u){const g=this.length;a=~~a,u=u===void 0?g:~~u,a<0?(a+=g,a<0&&(a=0)):a>g&&(a=g),u<0?(u+=g,u<0&&(u=0)):u>g&&(u=g),u<a&&(u=a);const S=this.subarray(a,u);return Object.setPrototypeOf(S,c.prototype),S};function I(h,a,u){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+a>u)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(a,u,g){a=a>>>0,u=u>>>0,g||I(a,u,this.length);let S=this[a],M=1,O=0;for(;++O<u&&(M*=256);)S+=this[a+O]*M;return S},c.prototype.readUintBE=c.prototype.readUIntBE=function(a,u,g){a=a>>>0,u=u>>>0,g||I(a,u,this.length);let S=this[a+--u],M=1;for(;u>0&&(M*=256);)S+=this[a+--u]*M;return S},c.prototype.readUint8=c.prototype.readUInt8=function(a,u){return a=a>>>0,u||I(a,1,this.length),this[a]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(a,u){return a=a>>>0,u||I(a,2,this.length),this[a]|this[a+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(a,u){return a=a>>>0,u||I(a,2,this.length),this[a]<<8|this[a+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(a,u){return a=a>>>0,u||I(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(a,u){return a=a>>>0,u||I(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},c.prototype.readBigUInt64LE=Qe(function(a){a=a>>>0,kt(a,"offset");const u=this[a],g=this[a+7];(u===void 0||g===void 0)&&ve(a,this.length-8);const S=u+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24,M=this[++a]+this[++a]*2**8+this[++a]*2**16+g*2**24;return BigInt(S)+(BigInt(M)<<BigInt(32))}),c.prototype.readBigUInt64BE=Qe(function(a){a=a>>>0,kt(a,"offset");const u=this[a],g=this[a+7];(u===void 0||g===void 0)&&ve(a,this.length-8);const S=u*2**24+this[++a]*2**16+this[++a]*2**8+this[++a],M=this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+g;return(BigInt(S)<<BigInt(32))+BigInt(M)}),c.prototype.readIntLE=function(a,u,g){a=a>>>0,u=u>>>0,g||I(a,u,this.length);let S=this[a],M=1,O=0;for(;++O<u&&(M*=256);)S+=this[a+O]*M;return M*=128,S>=M&&(S-=Math.pow(2,8*u)),S},c.prototype.readIntBE=function(a,u,g){a=a>>>0,u=u>>>0,g||I(a,u,this.length);let S=u,M=1,O=this[a+--S];for(;S>0&&(M*=256);)O+=this[a+--S]*M;return M*=128,O>=M&&(O-=Math.pow(2,8*u)),O},c.prototype.readInt8=function(a,u){return a=a>>>0,u||I(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},c.prototype.readInt16LE=function(a,u){a=a>>>0,u||I(a,2,this.length);const g=this[a]|this[a+1]<<8;return g&32768?g|4294901760:g},c.prototype.readInt16BE=function(a,u){a=a>>>0,u||I(a,2,this.length);const g=this[a+1]|this[a]<<8;return g&32768?g|4294901760:g},c.prototype.readInt32LE=function(a,u){return a=a>>>0,u||I(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},c.prototype.readInt32BE=function(a,u){return a=a>>>0,u||I(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},c.prototype.readBigInt64LE=Qe(function(a){a=a>>>0,kt(a,"offset");const u=this[a],g=this[a+7];(u===void 0||g===void 0)&&ve(a,this.length-8);const S=this[a+4]+this[a+5]*2**8+this[a+6]*2**16+(g<<24);return(BigInt(S)<<BigInt(32))+BigInt(u+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24)}),c.prototype.readBigInt64BE=Qe(function(a){a=a>>>0,kt(a,"offset");const u=this[a],g=this[a+7];(u===void 0||g===void 0)&&ve(a,this.length-8);const S=(u<<24)+this[++a]*2**16+this[++a]*2**8+this[++a];return(BigInt(S)<<BigInt(32))+BigInt(this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+g)}),c.prototype.readFloatLE=function(a,u){return a=a>>>0,u||I(a,4,this.length),t.read(this,a,!0,23,4)},c.prototype.readFloatBE=function(a,u){return a=a>>>0,u||I(a,4,this.length),t.read(this,a,!1,23,4)},c.prototype.readDoubleLE=function(a,u){return a=a>>>0,u||I(a,8,this.length),t.read(this,a,!0,52,8)},c.prototype.readDoubleBE=function(a,u){return a=a>>>0,u||I(a,8,this.length),t.read(this,a,!1,52,8)};function d(h,a,u,g,S,M){if(!c.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>S||a<M)throw new RangeError('"value" argument is out of bounds');if(u+g>h.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(a,u,g,S){if(a=+a,u=u>>>0,g=g>>>0,!S){const ie=Math.pow(2,8*g)-1;d(this,a,u,g,ie,0)}let M=1,O=0;for(this[u]=a&255;++O<g&&(M*=256);)this[u+O]=a/M&255;return u+g},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(a,u,g,S){if(a=+a,u=u>>>0,g=g>>>0,!S){const ie=Math.pow(2,8*g)-1;d(this,a,u,g,ie,0)}let M=g-1,O=1;for(this[u+M]=a&255;--M>=0&&(O*=256);)this[u+M]=a/O&255;return u+g},c.prototype.writeUint8=c.prototype.writeUInt8=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,1,255,0),this[u]=a&255,u+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,2,65535,0),this[u]=a&255,this[u+1]=a>>>8,u+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,2,65535,0),this[u]=a>>>8,this[u+1]=a&255,u+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,4,4294967295,0),this[u+3]=a>>>24,this[u+2]=a>>>16,this[u+1]=a>>>8,this[u]=a&255,u+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,4,4294967295,0),this[u]=a>>>24,this[u+1]=a>>>16,this[u+2]=a>>>8,this[u+3]=a&255,u+4};function p(h,a,u,g,S){Pe(a,g,S,h,u,7);let M=Number(a&BigInt(4294967295));h[u++]=M,M=M>>8,h[u++]=M,M=M>>8,h[u++]=M,M=M>>8,h[u++]=M;let O=Number(a>>BigInt(32)&BigInt(4294967295));return h[u++]=O,O=O>>8,h[u++]=O,O=O>>8,h[u++]=O,O=O>>8,h[u++]=O,u}function _(h,a,u,g,S){Pe(a,g,S,h,u,7);let M=Number(a&BigInt(4294967295));h[u+7]=M,M=M>>8,h[u+6]=M,M=M>>8,h[u+5]=M,M=M>>8,h[u+4]=M;let O=Number(a>>BigInt(32)&BigInt(4294967295));return h[u+3]=O,O=O>>8,h[u+2]=O,O=O>>8,h[u+1]=O,O=O>>8,h[u]=O,u+8}c.prototype.writeBigUInt64LE=Qe(function(a,u=0){return p(this,a,u,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Qe(function(a,u=0){return _(this,a,u,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(a,u,g,S){if(a=+a,u=u>>>0,!S){const fe=Math.pow(2,8*g-1);d(this,a,u,g,fe-1,-fe)}let M=0,O=1,ie=0;for(this[u]=a&255;++M<g&&(O*=256);)a<0&&ie===0&&this[u+M-1]!==0&&(ie=1),this[u+M]=(a/O>>0)-ie&255;return u+g},c.prototype.writeIntBE=function(a,u,g,S){if(a=+a,u=u>>>0,!S){const fe=Math.pow(2,8*g-1);d(this,a,u,g,fe-1,-fe)}let M=g-1,O=1,ie=0;for(this[u+M]=a&255;--M>=0&&(O*=256);)a<0&&ie===0&&this[u+M+1]!==0&&(ie=1),this[u+M]=(a/O>>0)-ie&255;return u+g},c.prototype.writeInt8=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,1,127,-128),a<0&&(a=255+a+1),this[u]=a&255,u+1},c.prototype.writeInt16LE=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,2,32767,-32768),this[u]=a&255,this[u+1]=a>>>8,u+2},c.prototype.writeInt16BE=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,2,32767,-32768),this[u]=a>>>8,this[u+1]=a&255,u+2},c.prototype.writeInt32LE=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,4,2147483647,-2147483648),this[u]=a&255,this[u+1]=a>>>8,this[u+2]=a>>>16,this[u+3]=a>>>24,u+4},c.prototype.writeInt32BE=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[u]=a>>>24,this[u+1]=a>>>16,this[u+2]=a>>>8,this[u+3]=a&255,u+4},c.prototype.writeBigInt64LE=Qe(function(a,u=0){return p(this,a,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Qe(function(a,u=0){return _(this,a,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function T(h,a,u,g,S,M){if(u+g>h.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function z(h,a,u,g,S){return a=+a,u=u>>>0,S||T(h,a,u,4),t.write(h,a,u,g,23,4),u+4}c.prototype.writeFloatLE=function(a,u,g){return z(this,a,u,!0,g)},c.prototype.writeFloatBE=function(a,u,g){return z(this,a,u,!1,g)};function G(h,a,u,g,S){return a=+a,u=u>>>0,S||T(h,a,u,8),t.write(h,a,u,g,52,8),u+8}c.prototype.writeDoubleLE=function(a,u,g){return G(this,a,u,!0,g)},c.prototype.writeDoubleBE=function(a,u,g){return G(this,a,u,!1,g)},c.prototype.copy=function(a,u,g,S){if(!c.isBuffer(a))throw new TypeError("argument should be a Buffer");if(g||(g=0),!S&&S!==0&&(S=this.length),u>=a.length&&(u=a.length),u||(u=0),S>0&&S<g&&(S=g),S===g||a.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("sourceEnd out of bounds");S>this.length&&(S=this.length),a.length-u<S-g&&(S=a.length-u+g);const M=S-g;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,g,S):Uint8Array.prototype.set.call(a,this.subarray(g,S),u),M},c.prototype.fill=function(a,u,g,S){if(typeof a=="string"){if(typeof u=="string"?(S=u,u=0,g=this.length):typeof g=="string"&&(S=g,g=this.length),S!==void 0&&typeof S!="string")throw new TypeError("encoding must be a string");if(typeof S=="string"&&!c.isEncoding(S))throw new TypeError("Unknown encoding: "+S);if(a.length===1){const O=a.charCodeAt(0);(S==="utf8"&&O<128||S==="latin1")&&(a=O)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(u<0||this.length<u||this.length<g)throw new RangeError("Out of range index");if(g<=u)return this;u=u>>>0,g=g===void 0?this.length:g>>>0,a||(a=0);let M;if(typeof a=="number")for(M=u;M<g;++M)this[M]=a;else{const O=c.isBuffer(a)?a:c.from(a,S),ie=O.length;if(ie===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(M=0;M<g-u;++M)this[M+u]=O[M%ie]}return this};const te={};function ae(h,a,u){te[h]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:a.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${h}]`,this.stack,delete this.name}get code(){return h}set code(S){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:S,writable:!0})}toString(){return`${this.name} [${h}]: ${this.message}`}}}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(h){return h?`${h} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(h,a){return`The "${h}" argument must be of type number. Received type ${typeof a}`},TypeError),ae("ERR_OUT_OF_RANGE",function(h,a,u){let g=`The value of "${h}" is out of range.`,S=u;return Number.isInteger(u)&&Math.abs(u)>2**32?S=Ee(String(u)):typeof u=="bigint"&&(S=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(S=Ee(S)),S+="n"),g+=` It must be ${a}. Received ${S}`,g},RangeError);function Ee(h){let a="",u=h.length;const g=h[0]==="-"?1:0;for(;u>=g+4;u-=3)a=`_${h.slice(u-3,u)}${a}`;return`${h.slice(0,u)}${a}`}function Se(h,a,u){kt(a,"offset"),(h[a]===void 0||h[a+u]===void 0)&&ve(a,h.length-(u+1))}function Pe(h,a,u,g,S,M){if(h>u||h<a){const O=typeof a=="bigint"?"n":"";let ie;throw a===0||a===BigInt(0)?ie=`>= 0${O} and < 2${O} ** ${(M+1)*8}${O}`:ie=`>= -(2${O} ** ${(M+1)*8-1}${O}) and < 2 ** ${(M+1)*8-1}${O}`,new te.ERR_OUT_OF_RANGE("value",ie,h)}Se(g,S,M)}function kt(h,a){if(typeof h!="number")throw new te.ERR_INVALID_ARG_TYPE(a,"number",h)}function ve(h,a,u){throw Math.floor(h)!==h?(kt(h,u),new te.ERR_OUT_OF_RANGE("offset","an integer",h)):a<0?new te.ERR_BUFFER_OUT_OF_BOUNDS:new te.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${a}`,h)}const We=/[^+/0-9A-Za-z-_]/g;function kn(h){if(h=h.split("=")[0],h=h.trim().replace(We,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function Ce(h,a){a=a||1/0;let u;const g=h.length;let S=null;const M=[];for(let O=0;O<g;++O){if(u=h.charCodeAt(O),u>55295&&u<57344){if(!S){if(u>56319){(a-=3)>-1&&M.push(239,191,189);continue}else if(O+1===g){(a-=3)>-1&&M.push(239,191,189);continue}S=u;continue}if(u<56320){(a-=3)>-1&&M.push(239,191,189),S=u;continue}u=(S-55296<<10|u-56320)+65536}else S&&(a-=3)>-1&&M.push(239,191,189);if(S=null,u<128){if((a-=1)<0)break;M.push(u)}else if(u<2048){if((a-=2)<0)break;M.push(u>>6|192,u&63|128)}else if(u<65536){if((a-=3)<0)break;M.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((a-=4)<0)break;M.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return M}function ze(h){const a=[];for(let u=0;u<h.length;++u)a.push(h.charCodeAt(u)&255);return a}function En(h,a){let u,g,S;const M=[];for(let O=0;O<h.length&&!((a-=2)<0);++O)u=h.charCodeAt(O),g=u>>8,S=u%256,M.push(S),M.push(g);return M}function Ne(h){return e.toByteArray(kn(h))}function xe(h,a,u,g){let S;for(S=0;S<g&&!(S+u>=a.length||S>=h.length);++S)a[S+u]=h[S];return S}function qe(h,a){return h instanceof a||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===a.name}function Ue(h){return h!==h}const Ve=function(){const h="0123456789abcdef",a=new Array(256);for(let u=0;u<16;++u){const g=u*16;for(let S=0;S<16;++S)a[g+S]=h[u]+h[S]}return a}();function Qe(h){return typeof BigInt>"u"?$e:h}function $e(){throw new Error("BigInt not supported")}}(Os)),Os}var pe=mr();const An=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function pi(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function si(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function gr(n,...e){if(!pi(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function gu(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");si(n.outputLen),si(n.blockLen)}function On(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function mu(n,e){gr(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function xf(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Ir(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function Ls(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Gt(n,e){return n<<32-e|n>>>e}const Rf=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Mf(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function Pf(n){for(let e=0;e<n.length;e++)n[e]=Mf(n[e]);return n}const Ea=Rf?n=>n:Pf,bu=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Tf=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function fn(n){if(gr(n),bu)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=Tf[n[t]];return e}const ar={_0:48,_9:57,A:65,F:70,a:97,f:102};function Aa(n){if(n>=ar._0&&n<=ar._9)return n-ar._0;if(n>=ar.A&&n<=ar.F)return n-(ar.A-10);if(n>=ar.a&&n<=ar.f)return n-(ar.a-10)}function Fi(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(bu)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=Aa(n.charCodeAt(i)),c=Aa(n.charCodeAt(i+1));if(o===void 0||c===void 0){const f=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+i)}r[s]=o*16+c}return r}function Cf(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Ji(n){return typeof n=="string"&&(n=Cf(n)),gr(n),n}function Xt(...n){let e=0;for(let r=0;r<n.length;r++){const s=n[r];gr(s),e+=s.length}const t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){const i=n[r];t.set(i,s),s+=i.length}return t}class Ro{}function Mo(n){const e=r=>n().update(Ji(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Po(n=32){if(An&&typeof An.getRandomValues=="function")return An.getRandomValues(new Uint8Array(n));if(An&&typeof An.randomBytes=="function")return Uint8Array.from(An.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function Uf(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),c=Number(t&i),f=r?4:0,m=r?0:4;n.setUint32(e+f,o,r),n.setUint32(e+m,c,r)}function Of(n,e,t){return n&e^~n&t}function Lf(n,e,t){return n&e^n&t^e&t}class wu extends Ro{constructor(e,t,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Ls(this.buffer)}update(e){On(this),e=Ji(e),gr(e);const{view:t,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const c=Math.min(s-this.pos,i-o);if(c===s){const f=Ls(e);for(;s<=i-o;o+=s)this.process(f,o);continue}r.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){On(this),mu(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,Ir(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let A=o;A<s;A++)t[A]=0;Uf(r,s-8,BigInt(this.length*8),i),this.process(r,0);const c=Ls(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const m=f/4,b=this.get();if(m>b.length)throw new Error("_sha2: outputLen bigger than state");for(let A=0;A<m;A++)c.setUint32(4*A,b[A],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:i,destroyed:o,pos:c}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=c,s%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const wr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Bt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),vi=BigInt(2**32-1),Sa=BigInt(32);function Nf(n,e=!1){return e?{h:Number(n&vi),l:Number(n>>Sa&vi)}:{h:Number(n>>Sa&vi)|0,l:Number(n&vi)|0}}function ku(n,e=!1){const t=n.length;let r=new Uint32Array(t),s=new Uint32Array(t);for(let i=0;i<t;i++){const{h:o,l:c}=Nf(n[i],e);[r[i],s[i]]=[o,c]}return[r,s]}const va=(n,e,t)=>n>>>t,_a=(n,e,t)=>n<<32-t|e>>>t,Sn=(n,e,t)=>n>>>t|e<<32-t,vn=(n,e,t)=>n<<32-t|e>>>t,_i=(n,e,t)=>n<<64-t|e>>>t-32,Ii=(n,e,t)=>n>>>t-32|e<<64-t,Ff=(n,e,t)=>n<<t|e>>>32-t,Df=(n,e,t)=>e<<t|n>>>32-t,Kf=(n,e,t)=>e<<t-32|n>>>64-t,Wf=(n,e,t)=>n<<t-32|e>>>64-t;function cr(n,e,t,r){const s=(e>>>0)+(r>>>0);return{h:n+t+(s/2**32|0)|0,l:s|0}}const zf=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),qf=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,Vf=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),$f=(n,e,t,r,s)=>e+t+r+s+(n/2**32|0)|0,Hf=(n,e,t,r,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),jf=(n,e,t,r,s,i)=>e+t+r+s+i+(n/2**32|0)|0,Yf=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),kr=new Uint32Array(64);class Gf extends wu{constructor(e=32){super(64,e,8,!1),this.A=wr[0]|0,this.B=wr[1]|0,this.C=wr[2]|0,this.D=wr[3]|0,this.E=wr[4]|0,this.F=wr[5]|0,this.G=wr[6]|0,this.H=wr[7]|0}get(){const{A:e,B:t,C:r,D:s,E:i,F:o,G:c,H:f}=this;return[e,t,r,s,i,o,c,f]}set(e,t,r,s,i,o,c,f){this.A=e|0,this.B=t|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=c|0,this.H=f|0}process(e,t){for(let A=0;A<16;A++,t+=4)kr[A]=e.getUint32(t,!1);for(let A=16;A<64;A++){const v=kr[A-15],w=kr[A-2],B=Gt(v,7)^Gt(v,18)^v>>>3,R=Gt(w,17)^Gt(w,19)^w>>>10;kr[A]=R+kr[A-7]+B+kr[A-16]|0}let{A:r,B:s,C:i,D:o,E:c,F:f,G:m,H:b}=this;for(let A=0;A<64;A++){const v=Gt(c,6)^Gt(c,11)^Gt(c,25),w=b+v+Of(c,f,m)+Yf[A]+kr[A]|0,R=(Gt(r,2)^Gt(r,13)^Gt(r,22))+Lf(r,s,i)|0;b=m,m=f,f=c,c=o+w|0,o=i,i=s,s=r,r=w+R|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,f=f+this.F|0,m=m+this.G|0,b=b+this.H|0,this.set(r,s,i,o,c,f,m,b)}roundClean(){Ir(kr)}destroy(){this.set(0,0,0,0,0,0,0,0),Ir(this.buffer)}}const Eu=ku(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Zf=Eu[0],Xf=Eu[1],Er=new Uint32Array(80),Ar=new Uint32Array(80);class Jf extends wu{constructor(e=64){super(128,e,16,!1),this.Ah=Bt[0]|0,this.Al=Bt[1]|0,this.Bh=Bt[2]|0,this.Bl=Bt[3]|0,this.Ch=Bt[4]|0,this.Cl=Bt[5]|0,this.Dh=Bt[6]|0,this.Dl=Bt[7]|0,this.Eh=Bt[8]|0,this.El=Bt[9]|0,this.Fh=Bt[10]|0,this.Fl=Bt[11]|0,this.Gh=Bt[12]|0,this.Gl=Bt[13]|0,this.Hh=Bt[14]|0,this.Hl=Bt[15]|0}get(){const{Ah:e,Al:t,Bh:r,Bl:s,Ch:i,Cl:o,Dh:c,Dl:f,Eh:m,El:b,Fh:A,Fl:v,Gh:w,Gl:B,Hh:R,Hl:C}=this;return[e,t,r,s,i,o,c,f,m,b,A,v,w,B,R,C]}set(e,t,r,s,i,o,c,f,m,b,A,v,w,B,R,C){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=c|0,this.Dl=f|0,this.Eh=m|0,this.El=b|0,this.Fh=A|0,this.Fl=v|0,this.Gh=w|0,this.Gl=B|0,this.Hh=R|0,this.Hl=C|0}process(e,t){for(let W=0;W<16;W++,t+=4)Er[W]=e.getUint32(t),Ar[W]=e.getUint32(t+=4);for(let W=16;W<80;W++){const X=Er[W-15]|0,Y=Ar[W-15]|0,Z=Sn(X,Y,1)^Sn(X,Y,8)^va(X,Y,7),oe=vn(X,Y,1)^vn(X,Y,8)^_a(X,Y,7),ee=Er[W-2]|0,F=Ar[W-2]|0,K=Sn(ee,F,19)^_i(ee,F,61)^va(ee,F,6),q=vn(ee,F,19)^Ii(ee,F,61)^_a(ee,F,6),H=Vf(oe,q,Ar[W-7],Ar[W-16]),E=$f(H,Z,K,Er[W-7],Er[W-16]);Er[W]=E|0,Ar[W]=H|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:c,Cl:f,Dh:m,Dl:b,Eh:A,El:v,Fh:w,Fl:B,Gh:R,Gl:C,Hh:D,Hl:V}=this;for(let W=0;W<80;W++){const X=Sn(A,v,14)^Sn(A,v,18)^_i(A,v,41),Y=vn(A,v,14)^vn(A,v,18)^Ii(A,v,41),Z=A&w^~A&R,oe=v&B^~v&C,ee=Hf(V,Y,oe,Xf[W],Ar[W]),F=jf(ee,D,X,Z,Zf[W],Er[W]),K=ee|0,q=Sn(r,s,28)^_i(r,s,34)^_i(r,s,39),H=vn(r,s,28)^Ii(r,s,34)^Ii(r,s,39),E=r&i^r&c^i&c,l=s&o^s&f^o&f;D=R|0,V=C|0,R=w|0,C=B|0,w=A|0,B=v|0,{h:A,l:v}=cr(m|0,b|0,F|0,K|0),m=c|0,b=f|0,c=i|0,f=o|0,i=r|0,o=s|0;const y=zf(K,H,l);r=qf(y,F,q,E),s=y|0}({h:r,l:s}=cr(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=cr(this.Bh|0,this.Bl|0,i|0,o|0),{h:c,l:f}=cr(this.Ch|0,this.Cl|0,c|0,f|0),{h:m,l:b}=cr(this.Dh|0,this.Dl|0,m|0,b|0),{h:A,l:v}=cr(this.Eh|0,this.El|0,A|0,v|0),{h:w,l:B}=cr(this.Fh|0,this.Fl|0,w|0,B|0),{h:R,l:C}=cr(this.Gh|0,this.Gl|0,R|0,C|0),{h:D,l:V}=cr(this.Hh|0,this.Hl|0,D|0,V|0),this.set(r,s,i,o,c,f,m,b,A,v,w,B,R,C,D,V)}roundClean(){Ir(Er,Ar)}destroy(){Ir(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Au=Mo(()=>new Gf),Qf=Mo(()=>new Jf);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const To=BigInt(0),po=BigInt(1);function dn(n,e=""){if(typeof n!="boolean"){const t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof n)}return n}function Ht(n,e,t=""){const r=pi(n),s=n?.length,i=e!==void 0;if(!r||i&&s!==e){const o=t&&`"${t}" `,c=i?` of length ${e}`:"",f=r?`length=${s}`:`type=${typeof n}`;throw new Error(o+"expected Uint8Array"+c+", got "+f)}return n}function Bi(n){const e=n.toString(16);return e.length&1?"0"+e:e}function Su(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?To:BigInt("0x"+n)}function Qi(n){return Su(fn(n))}function oi(n){return gr(n),Su(fn(Uint8Array.from(n).reverse()))}function Co(n,e){return Fi(n.toString(16).padStart(e*2,"0"))}function vu(n,e){return Co(n,e).reverse()}function Xe(n,e,t){let r;if(typeof e=="string")try{r=Fi(e)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(pi(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof t=="number"&&s!==t)throw new Error(n+" of length "+t+" expected, got "+s);return r}function Ia(n){return Uint8Array.from(n)}const Ns=n=>typeof n=="bigint"&&To<=n;function eh(n,e,t){return Ns(n)&&Ns(e)&&Ns(t)&&e<=n&&n<t}function yo(n,e,t,r){if(!eh(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function _u(n){let e;for(e=0;n>To;n>>=po,e+=1);return e}const yi=n=>(po<<BigInt(n))-po;function th(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const r=w=>new Uint8Array(w),s=w=>Uint8Array.of(w);let i=r(n),o=r(n),c=0;const f=()=>{i.fill(1),o.fill(0),c=0},m=(...w)=>t(o,i,...w),b=(w=r(0))=>{o=m(s(0),w),i=m(),w.length!==0&&(o=m(s(1),w),i=m())},A=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let w=0;const B=[];for(;w<e;){i=m();const R=i.slice();B.push(R),w+=i.length}return Xt(...B)};return(w,B)=>{f(),b(w);let R;for(;!(R=B(A()));)b();return f(),R}}function gi(n,e,t={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(s,i,o){const c=n[s];if(o&&c===void 0)return;const f=typeof c;if(f!==i||c===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${f}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(t).forEach(([s,i])=>r(s,i,!0))}function Di(n){const e=new WeakMap;return(t,...r)=>{const s=e.get(t);if(s!==void 0)return s;const i=n(t,...r);return e.set(t,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nt=BigInt(0),It=BigInt(1),an=BigInt(2),Iu=BigInt(3),Bu=BigInt(4),xu=BigInt(5),rh=BigInt(7),Ru=BigInt(8),nh=BigInt(9),Mu=BigInt(16);function wt(n,e){const t=n%e;return t>=Nt?t:e+t}function Ze(n,e,t){let r=n;for(;e-- >Nt;)r*=r,r%=t;return r}function Ba(n,e){if(n===Nt)throw new Error("invert: expected non-zero number");if(e<=Nt)throw new Error("invert: expected positive modulus, got "+e);let t=wt(n,e),r=e,s=Nt,i=It;for(;t!==Nt;){const c=r/t,f=r%t,m=s-i*c;r=t,t=f,s=i,i=m}if(r!==It)throw new Error("invert: does not exist");return wt(s,e)}function Uo(n,e,t){if(!n.eql(n.sqr(e),t))throw new Error("Cannot find square root")}function Pu(n,e){const t=(n.ORDER+It)/Bu,r=n.pow(e,t);return Uo(n,r,e),r}function ih(n,e){const t=(n.ORDER-xu)/Ru,r=n.mul(e,an),s=n.pow(r,t),i=n.mul(e,s),o=n.mul(n.mul(i,an),s),c=n.mul(i,n.sub(o,n.ONE));return Uo(n,c,e),c}function sh(n){const e=gn(n),t=Tu(n),r=t(e,e.neg(e.ONE)),s=t(e,r),i=t(e,e.neg(r)),o=(n+rh)/Mu;return(c,f)=>{let m=c.pow(f,o),b=c.mul(m,r);const A=c.mul(m,s),v=c.mul(m,i),w=c.eql(c.sqr(b),f),B=c.eql(c.sqr(A),f);m=c.cmov(m,b,w),b=c.cmov(v,A,B);const R=c.eql(c.sqr(b),f),C=c.cmov(m,b,R);return Uo(c,C,f),C}}function Tu(n){if(n<Iu)throw new Error("sqrt is not defined for small field");let e=n-It,t=0;for(;e%an===Nt;)e/=an,t++;let r=an;const s=gn(n);for(;xa(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return Pu;let i=s.pow(r,e);const o=(e+It)/an;return function(f,m){if(f.is0(m))return m;if(xa(f,m)!==1)throw new Error("Cannot find square root");let b=t,A=f.mul(f.ONE,i),v=f.pow(m,e),w=f.pow(m,o);for(;!f.eql(v,f.ONE);){if(f.is0(v))return f.ZERO;let B=1,R=f.sqr(v);for(;!f.eql(R,f.ONE);)if(B++,R=f.sqr(R),B===b)throw new Error("Cannot find square root");const C=It<<BigInt(b-B-1),D=f.pow(A,C);b=B,A=f.sqr(D),v=f.mul(v,A),w=f.mul(w,D)}return w}}function oh(n){return n%Bu===Iu?Pu:n%Ru===xu?ih:n%Mu===nh?sh(n):Tu(n)}const ah=(n,e)=>(wt(n,e)&It)===It,ch=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function uh(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=ch.reduce((r,s)=>(r[s]="function",r),e);return gi(n,t),n}function lh(n,e,t){if(t<Nt)throw new Error("invalid exponent, negatives unsupported");if(t===Nt)return n.ONE;if(t===It)return e;let r=n.ONE,s=e;for(;t>Nt;)t&It&&(r=n.mul(r,s)),s=n.sqr(s),t>>=It;return r}function Cu(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),s=e.reduce((o,c,f)=>n.is0(c)?o:(r[f]=o,n.mul(o,c)),n.ONE),i=n.inv(s);return e.reduceRight((o,c,f)=>n.is0(c)?o:(r[f]=n.mul(o,r[f]),n.mul(o,c)),i),r}function xa(n,e){const t=(n.ORDER-It)/an,r=n.pow(e,t),s=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Uu(n,e){e!==void 0&&si(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function gn(n,e,t=!1,r={}){if(n<=Nt)throw new Error("invalid field: expected ORDER > 0, got "+n);let s,i,o=!1,c;if(typeof e=="object"&&e!=null){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");const v=e;v.BITS&&(s=v.BITS),v.sqrt&&(i=v.sqrt),typeof v.isLE=="boolean"&&(t=v.isLE),typeof v.modFromBytes=="boolean"&&(o=v.modFromBytes),c=v.allowedLengths}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:f,nByteLength:m}=Uu(n,s);if(m>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let b;const A=Object.freeze({ORDER:n,isLE:t,BITS:f,BYTES:m,MASK:yi(f),ZERO:Nt,ONE:It,allowedLengths:c,create:v=>wt(v,n),isValid:v=>{if(typeof v!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof v);return Nt<=v&&v<n},is0:v=>v===Nt,isValidNot0:v=>!A.is0(v)&&A.isValid(v),isOdd:v=>(v&It)===It,neg:v=>wt(-v,n),eql:(v,w)=>v===w,sqr:v=>wt(v*v,n),add:(v,w)=>wt(v+w,n),sub:(v,w)=>wt(v-w,n),mul:(v,w)=>wt(v*w,n),pow:(v,w)=>lh(A,v,w),div:(v,w)=>wt(v*Ba(w,n),n),sqrN:v=>v*v,addN:(v,w)=>v+w,subN:(v,w)=>v-w,mulN:(v,w)=>v*w,inv:v=>Ba(v,n),sqrt:i||(v=>(b||(b=oh(n)),b(A,v))),toBytes:v=>t?vu(v,m):Co(v,m),fromBytes:(v,w=!0)=>{if(c){if(!c.includes(v.length)||v.length>m)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+v.length);const R=new Uint8Array(m);R.set(v,t?0:R.length-v.length),v=R}if(v.length!==m)throw new Error("Field.fromBytes: expected "+m+" bytes, got "+v.length);let B=t?oi(v):Qi(v);if(o&&(B=wt(B,n)),!w&&!A.isValid(B))throw new Error("invalid field element: outside of range 0..ORDER");return B},invertBatch:v=>Cu(A,v),cmov:(v,w,B)=>B?w:v});return Object.freeze(A)}function Ou(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function Lu(n){const e=Ou(n);return e+Math.ceil(e/2)}function fh(n,e,t=!1){const r=n.length,s=Ou(e),i=Lu(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=t?oi(n):Qi(n),c=wt(o,e-It)+It;return t?vu(c,s):Co(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ln=BigInt(0),cn=BigInt(1);function Ki(n,e){const t=e.negate();return n?t:e}function un(n,e){const t=Cu(n.Fp,e.map(r=>r.Z));return e.map((r,s)=>n.fromAffine(r.toAffine(t[s])))}function Nu(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function Fs(n,e){Nu(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),s=2**n,i=yi(n),o=BigInt(n);return{windows:t,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Ra(n,e,t){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=t;let c=Number(n&s),f=n>>o;c>r&&(c-=i,f+=cn);const m=e*r,b=m+Math.abs(c)-1,A=c===0,v=c<0,w=e%2!==0;return{nextN:f,offset:b,isZero:A,isNeg:v,isNegF:w,offsetF:m}}function hh(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function dh(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const Ds=new WeakMap,Fu=new WeakMap;function Ks(n){return Fu.get(n)||1}function Ma(n){if(n!==Ln)throw new Error("invalid wNAF")}class Du{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let s=e;for(;t>Ln;)t&cn&&(r=r.add(s)),s=s.double(),t>>=cn;return r}precomputeWindow(e,t){const{windows:r,windowSize:s}=Fs(t,this.bits),i=[];let o=e,c=o;for(let f=0;f<r;f++){c=o,i.push(c);for(let m=1;m<s;m++)c=c.add(o),i.push(c);o=c.double()}return i}wNAF(e,t,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=Fs(e,this.bits);for(let c=0;c<o.windows;c++){const{nextN:f,offset:m,isZero:b,isNeg:A,isNegF:v,offsetF:w}=Ra(r,c,o);r=f,b?i=i.add(Ki(v,t[w])):s=s.add(Ki(A,t[m]))}return Ma(r),{p:s,f:i}}wNAFUnsafe(e,t,r,s=this.ZERO){const i=Fs(e,this.bits);for(let o=0;o<i.windows&&r!==Ln;o++){const{nextN:c,offset:f,isZero:m,isNeg:b}=Ra(r,o,i);if(r=c,!m){const A=t[f];s=s.add(b?A.negate():A)}}return Ma(r),s}getPrecomputes(e,t,r){let s=Ds.get(t);return s||(s=this.precomputeWindow(t,e),e!==1&&(typeof r=="function"&&(s=r(s)),Ds.set(t,s))),s}cached(e,t,r){const s=Ks(e);return this.wNAF(s,this.getPrecomputes(s,e,r),t)}unsafe(e,t,r,s){const i=Ks(e);return i===1?this._unsafeLadder(e,t,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,s)}createCache(e,t){Nu(t,this.bits),Fu.set(e,t),Ds.delete(e)}hasCache(e){return Ks(e)!==1}}function ph(n,e,t,r){let s=e,i=n.ZERO,o=n.ZERO;for(;t>Ln||r>Ln;)t&cn&&(i=i.add(s)),r&cn&&(o=o.add(s)),s=s.double(),t>>=cn,r>>=cn;return{p1:i,p2:o}}function Ku(n,e,t,r){hh(t,n),dh(r,e);const s=t.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,c=_u(BigInt(s));let f=1;c>12?f=c-3:c>4?f=c-2:c>0&&(f=2);const m=yi(f),b=new Array(Number(m)+1).fill(o),A=Math.floor((e.BITS-1)/f)*f;let v=o;for(let w=A;w>=0;w-=f){b.fill(o);for(let R=0;R<i;R++){const C=r[R],D=Number(C>>BigInt(w)&m);b[D]=b[D].add(t[R])}let B=o;for(let R=b.length-1,C=o;R>0;R--)C=C.add(b[R]),B=B.add(C);if(v=v.add(B),w!==0)for(let R=0;R<f;R++)v=v.double()}return v}function Pa(n,e,t){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return uh(e),e}else return gn(n,{isLE:t})}function Wu(n,e,t={},r){if(r===void 0&&(r=n==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const f of["p","n","h"]){const m=e[f];if(!(typeof m=="bigint"&&m>Ln))throw new Error(`CURVE.${f} must be positive bigint`)}const s=Pa(e.p,t.Fp,r),i=Pa(e.n,t.Fn,r),c=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(const f of c)if(!s.isValid(e[f]))throw new Error(`CURVE.${f} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sr=BigInt(0),At=BigInt(1),Ws=BigInt(2),yh=BigInt(8);function gh(n,e,t,r){const s=n.sqr(t),i=n.sqr(r),o=n.add(n.mul(e.a,s),i),c=n.add(n.ONE,n.mul(e.d,n.mul(s,i)));return n.eql(o,c)}function mh(n,e={}){const t=Wu("edwards",n,e,e.FpFnLE),{Fp:r,Fn:s}=t;let i=t.CURVE;const{h:o}=i;gi(e,{},{uvRatio:"function"});const c=Ws<<BigInt(s.BYTES*8)-At,f=C=>r.create(C),m=e.uvRatio||((C,D)=>{try{return{isValid:!0,value:r.sqrt(r.div(C,D))}}catch{return{isValid:!1,value:Sr}}});if(!gh(r,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function b(C,D,V=!1){const W=V?At:Sr;return yo("coordinate "+C,D,W,c),D}function A(C){if(!(C instanceof B))throw new Error("ExtendedPoint expected")}const v=Di((C,D)=>{const{X:V,Y:W,Z:X}=C,Y=C.is0();D==null&&(D=Y?yh:r.inv(X));const Z=f(V*D),oe=f(W*D),ee=r.mul(X,D);if(Y)return{x:Sr,y:At};if(ee!==At)throw new Error("invZ was invalid");return{x:Z,y:oe}}),w=Di(C=>{const{a:D,d:V}=i;if(C.is0())throw new Error("bad point: ZERO");const{X:W,Y:X,Z:Y,T:Z}=C,oe=f(W*W),ee=f(X*X),F=f(Y*Y),K=f(F*F),q=f(oe*D),H=f(F*f(q+ee)),E=f(K+f(V*f(oe*ee)));if(H!==E)throw new Error("bad point: equation left != right (1)");const l=f(W*X),y=f(Y*Z);if(l!==y)throw new Error("bad point: equation left != right (2)");return!0});class B{constructor(D,V,W,X){this.X=b("x",D),this.Y=b("y",V),this.Z=b("z",W,!0),this.T=b("t",X),Object.freeze(this)}static CURVE(){return i}static fromAffine(D){if(D instanceof B)throw new Error("extended point not allowed");const{x:V,y:W}=D||{};return b("x",V),b("y",W),new B(V,W,At,f(V*W))}static fromBytes(D,V=!1){const W=r.BYTES,{a:X,d:Y}=i;D=Ia(Ht(D,W,"point")),dn(V,"zip215");const Z=Ia(D),oe=D[W-1];Z[W-1]=oe&-129;const ee=oi(Z),F=V?c:r.ORDER;yo("point.y",ee,Sr,F);const K=f(ee*ee),q=f(K-At),H=f(Y*K-X);let{isValid:E,value:l}=m(q,H);if(!E)throw new Error("bad point: invalid y coordinate");const y=(l&At)===At,k=(oe&128)!==0;if(!V&&l===Sr&&k)throw new Error("bad point: x=0 and x_0=1");return k!==y&&(l=f(-l)),B.fromAffine({x:l,y:ee})}static fromHex(D,V=!1){return B.fromBytes(Xe("point",D),V)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(D=8,V=!0){return R.createCache(this,D),V||this.multiply(Ws),this}assertValidity(){w(this)}equals(D){A(D);const{X:V,Y:W,Z:X}=this,{X:Y,Y:Z,Z:oe}=D,ee=f(V*oe),F=f(Y*X),K=f(W*oe),q=f(Z*X);return ee===F&&K===q}is0(){return this.equals(B.ZERO)}negate(){return new B(f(-this.X),this.Y,this.Z,f(-this.T))}double(){const{a:D}=i,{X:V,Y:W,Z:X}=this,Y=f(V*V),Z=f(W*W),oe=f(Ws*f(X*X)),ee=f(D*Y),F=V+W,K=f(f(F*F)-Y-Z),q=ee+Z,H=q-oe,E=ee-Z,l=f(K*H),y=f(q*E),k=f(K*E),x=f(H*q);return new B(l,y,x,k)}add(D){A(D);const{a:V,d:W}=i,{X,Y,Z,T:oe}=this,{X:ee,Y:F,Z:K,T:q}=D,H=f(X*ee),E=f(Y*F),l=f(oe*W*q),y=f(Z*K),k=f((X+Y)*(ee+F)-H-E),x=y-l,P=y+l,U=f(E-V*H),N=f(k*x),I=f(P*U),d=f(k*U),p=f(x*P);return new B(N,I,p,d)}subtract(D){return this.add(D.negate())}multiply(D){if(!s.isValidNot0(D))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:V,f:W}=R.cached(this,D,X=>un(B,X));return un(B,[V,W])[0]}multiplyUnsafe(D,V=B.ZERO){if(!s.isValid(D))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return D===Sr?B.ZERO:this.is0()||D===At?this:R.unsafe(this,D,W=>un(B,W),V)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return R.unsafe(this,i.n).is0()}toAffine(D){return v(this,D)}clearCofactor(){return o===At?this:this.multiplyUnsafe(o)}toBytes(){const{x:D,y:V}=this.toAffine(),W=r.toBytes(V);return W[W.length-1]|=D&At?128:0,W}toHex(){return fn(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(D){return un(B,D)}static msm(D,V){return Ku(B,s,D,V)}_setWindowSize(D){this.precompute(D)}toRawBytes(){return this.toBytes()}}B.BASE=new B(i.Gx,i.Gy,At,f(i.Gx*i.Gy)),B.ZERO=new B(Sr,At,At,Sr),B.Fp=r,B.Fn=s;const R=new Du(B,s.BITS);return B.BASE.precompute(8),B}function bh(n,e,t={}){if(typeof e!="function")throw new Error('"hash" function param is required');gi(t,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=t,{BASE:s,Fp:i,Fn:o}=n,c=t.randomBytes||Po,f=t.adjustScalarBytes||(F=>F),m=t.domain||((F,K,q)=>{if(dn(q,"phflag"),K.length||q)throw new Error("Contexts/pre-hash are not supported");return F});function b(F){return o.create(oi(F))}function A(F){const K=W.secretKey;F=Xe("private key",F,K);const q=Xe("hashed private key",e(F),2*K),H=f(q.slice(0,K)),E=q.slice(K,2*K),l=b(H);return{head:H,prefix:E,scalar:l}}function v(F){const{head:K,prefix:q,scalar:H}=A(F),E=s.multiply(H),l=E.toBytes();return{head:K,prefix:q,scalar:H,point:E,pointBytes:l}}function w(F){return v(F).pointBytes}function B(F=Uint8Array.of(),...K){const q=Xt(...K);return b(e(m(q,Xe("context",F),!!r)))}function R(F,K,q={}){F=Xe("message",F),r&&(F=r(F));const{prefix:H,scalar:E,pointBytes:l}=v(K),y=B(q.context,H,F),k=s.multiply(y).toBytes(),x=B(q.context,k,l,F),P=o.create(y+x*E);if(!o.isValid(P))throw new Error("sign failed: invalid s");const U=Xt(k,o.toBytes(P));return Ht(U,W.signature,"result")}const C={zip215:!0};function D(F,K,q,H=C){const{context:E,zip215:l}=H,y=W.signature;F=Xe("signature",F,y),K=Xe("message",K),q=Xe("publicKey",q,W.publicKey),l!==void 0&&dn(l,"zip215"),r&&(K=r(K));const k=y/2,x=F.subarray(0,k),P=oi(F.subarray(k,y));let U,N,I;try{U=n.fromBytes(q,l),N=n.fromBytes(x,l),I=s.multiplyUnsafe(P)}catch{return!1}if(!l&&U.isSmallOrder())return!1;const d=B(E,N.toBytes(),U.toBytes(),K);return N.add(U.multiplyUnsafe(d)).subtract(I).clearCofactor().is0()}const V=i.BYTES,W={secretKey:V,publicKey:V,signature:2*V,seed:V};function X(F=c(W.seed)){return Ht(F,W.seed,"seed")}function Y(F){const K=ee.randomSecretKey(F);return{secretKey:K,publicKey:w(K)}}function Z(F){return pi(F)&&F.length===o.BYTES}function oe(F,K){try{return!!n.fromBytes(F,K)}catch{return!1}}const ee={getExtendedPublicKey:v,randomSecretKey:X,isValidSecretKey:Z,isValidPublicKey:oe,toMontgomery(F){const{y:K}=n.fromBytes(F),q=W.publicKey,H=q===32;if(!H&&q!==57)throw new Error("only defined for 25519 and 448");const E=H?i.div(At+K,At-K):i.div(K-At,K+At);return i.toBytes(E)},toMontgomeryPriv(F){const K=W.secretKey;Ht(F,K);const q=e(F.subarray(0,K));return f(q).subarray(0,K)},randomPrivateKey:X,precompute(F=8,K=n.BASE){return K.precompute(F,!1)}};return Object.freeze({keygen:Y,getPublicKey:w,sign:R,verify:D,utils:ee,Point:n,lengths:W})}function wh(n){const e={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp,r=gn(e.n,n.nBitLength,!0),s={Fp:t,Fn:r,uvRatio:n.uvRatio},i={randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:e,curveOpts:s,hash:n.hash,eddsaOpts:i}}function kh(n,e){const t=e.Point;return Object.assign({},e,{ExtendedPoint:t,CURVE:n,nBitLength:t.Fn.BITS,nByteLength:t.Fn.BYTES})}function Eh(n){const{CURVE:e,curveOpts:t,hash:r,eddsaOpts:s}=wh(n),i=mh(e,t),o=bh(i,r,s);return kh(n,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ah=BigInt(1),Ta=BigInt(2);BigInt(3);const Sh=BigInt(5),vh=BigInt(8),Oo=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),zu={p:Oo,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:vh,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function _h(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),s=BigInt(80),i=Oo,c=n*n%i*n%i,f=Ze(c,Ta,i)*c%i,m=Ze(f,Ah,i)*n%i,b=Ze(m,Sh,i)*m%i,A=Ze(b,e,i)*b%i,v=Ze(A,t,i)*A%i,w=Ze(v,r,i)*v%i,B=Ze(w,s,i)*w%i,R=Ze(B,s,i)*w%i,C=Ze(R,e,i)*b%i;return{pow_p_5_8:Ze(C,Ta,i)*n%i,b2:c}}function Ih(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const Ca=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Bh(n,e){const t=Oo,r=wt(e*e*e,t),s=wt(r*r*e,t),i=_h(n*s).pow_p_5_8;let o=wt(n*r*i,t);const c=wt(e*o*o,t),f=o,m=wt(o*Ca,t),b=c===n,A=c===wt(-n,t),v=c===wt(-n*Ca,t);return b&&(o=f),(A||v)&&(o=m),ah(o,t)&&(o=wt(-o,t)),{isValid:b||A,value:o}}const xh=gn(zu.p,{isLE:!0}),Rh={...zu,Fp:xh,hash:Qf,adjustScalarBytes:Ih,uvRatio:Bh},Wn=Eh(Rh);var Ui={exports:{}};const Mh={},Ph=Object.freeze(Object.defineProperty({__proto__:null,default:Mh},Symbol.toStringTag,{value:"Module"})),Th=di(Ph);var Ch=Ui.exports,Ua;function es(){return Ua||(Ua=1,function(n){(function(e,t){function r(E,l){if(!E)throw new Error(l||"Assertion failed")}function s(E,l){E.super_=l;var y=function(){};y.prototype=l.prototype,E.prototype=new y,E.prototype.constructor=E}function i(E,l,y){if(i.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((l==="le"||l==="be")&&(y=l,l=10),this._init(E||0,l||10,y||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Th.Buffer}catch{}i.isBN=function(l){return l instanceof i?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===i.wordSize&&Array.isArray(l.words)},i.max=function(l,y){return l.cmp(y)>0?l:y},i.min=function(l,y){return l.cmp(y)<0?l:y},i.prototype._init=function(l,y,k){if(typeof l=="number")return this._initNumber(l,y,k);if(typeof l=="object")return this._initArray(l,y,k);y==="hex"&&(y=16),r(y===(y|0)&&y>=2&&y<=36),l=l.toString().replace(/\s+/g,"");var x=0;l[0]==="-"&&(x++,this.negative=1),x<l.length&&(y===16?this._parseHex(l,x,k):(this._parseBase(l,y,x),k==="le"&&this._initArray(this.toArray(),y,k)))},i.prototype._initNumber=function(l,y,k){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(r(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),k==="le"&&this._initArray(this.toArray(),y,k)},i.prototype._initArray=function(l,y,k){if(r(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var P,U,N=0;if(k==="be")for(x=l.length-1,P=0;x>=0;x-=3)U=l[x]|l[x-1]<<8|l[x-2]<<16,this.words[P]|=U<<N&67108863,this.words[P+1]=U>>>26-N&67108863,N+=24,N>=26&&(N-=26,P++);else if(k==="le")for(x=0,P=0;x<l.length;x+=3)U=l[x]|l[x+1]<<8|l[x+2]<<16,this.words[P]|=U<<N&67108863,this.words[P+1]=U>>>26-N&67108863,N+=24,N>=26&&(N-=26,P++);return this._strip()};function c(E,l){var y=E.charCodeAt(l);if(y>=48&&y<=57)return y-48;if(y>=65&&y<=70)return y-55;if(y>=97&&y<=102)return y-87;r(!1,"Invalid character in "+E)}function f(E,l,y){var k=c(E,y);return y-1>=l&&(k|=c(E,y-1)<<4),k}i.prototype._parseHex=function(l,y,k){this.length=Math.ceil((l.length-y)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var P=0,U=0,N;if(k==="be")for(x=l.length-1;x>=y;x-=2)N=f(l,y,x)<<P,this.words[U]|=N&67108863,P>=18?(P-=18,U+=1,this.words[U]|=N>>>26):P+=8;else{var I=l.length-y;for(x=I%2===0?y+1:y;x<l.length;x+=2)N=f(l,y,x)<<P,this.words[U]|=N&67108863,P>=18?(P-=18,U+=1,this.words[U]|=N>>>26):P+=8}this._strip()};function m(E,l,y,k){for(var x=0,P=0,U=Math.min(E.length,y),N=l;N<U;N++){var I=E.charCodeAt(N)-48;x*=k,I>=49?P=I-49+10:I>=17?P=I-17+10:P=I,r(I>=0&&P<k,"Invalid character"),x+=P}return x}i.prototype._parseBase=function(l,y,k){this.words=[0],this.length=1;for(var x=0,P=1;P<=67108863;P*=y)x++;x--,P=P/y|0;for(var U=l.length-k,N=U%x,I=Math.min(U,U-N)+k,d=0,p=k;p<I;p+=x)d=m(l,p,p+x,y),this.imuln(P),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(N!==0){var _=1;for(d=m(l,p,l.length,y),p=0;p<N;p++)_*=y;this.imuln(_),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this._strip()},i.prototype.copy=function(l){l.words=new Array(this.length);for(var y=0;y<this.length;y++)l.words[y]=this.words[y];l.length=this.length,l.negative=this.negative,l.red=this.red};function b(E,l){E.words=l.words,E.length=l.length,E.negative=l.negative,E.red=l.red}if(i.prototype._move=function(l){b(l,this)},i.prototype.clone=function(){var l=new i(null);return this.copy(l),l},i.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=A}catch{i.prototype.inspect=A}else i.prototype.inspect=A;function A(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(l,y){l=l||10,y=y|0||1;var k;if(l===16||l==="hex"){k="";for(var x=0,P=0,U=0;U<this.length;U++){var N=this.words[U],I=((N<<x|P)&16777215).toString(16);P=N>>>24-x&16777215,x+=2,x>=26&&(x-=26,U--),P!==0||U!==this.length-1?k=v[6-I.length]+I+k:k=I+k}for(P!==0&&(k=P.toString(16)+k);k.length%y!==0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}if(l===(l|0)&&l>=2&&l<=36){var d=w[l],p=B[l];k="";var _=this.clone();for(_.negative=0;!_.isZero();){var T=_.modrn(p).toString(l);_=_.idivn(p),_.isZero()?k=T+k:k=v[d-T.length]+T+k}for(this.isZero()&&(k="0"+k);k.length%y!==0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(l,y){return this.toArrayLike(o,l,y)}),i.prototype.toArray=function(l,y){return this.toArrayLike(Array,l,y)};var R=function(l,y){return l.allocUnsafe?l.allocUnsafe(y):new l(y)};i.prototype.toArrayLike=function(l,y,k){this._strip();var x=this.byteLength(),P=k||Math.max(1,x);r(x<=P,"byte array longer than desired length"),r(P>0,"Requested array length <= 0");var U=R(l,P),N=y==="le"?"LE":"BE";return this["_toArrayLike"+N](U,x),U},i.prototype._toArrayLikeLE=function(l,y){for(var k=0,x=0,P=0,U=0;P<this.length;P++){var N=this.words[P]<<U|x;l[k++]=N&255,k<l.length&&(l[k++]=N>>8&255),k<l.length&&(l[k++]=N>>16&255),U===6?(k<l.length&&(l[k++]=N>>24&255),x=0,U=0):(x=N>>>24,U+=2)}if(k<l.length)for(l[k++]=x;k<l.length;)l[k++]=0},i.prototype._toArrayLikeBE=function(l,y){for(var k=l.length-1,x=0,P=0,U=0;P<this.length;P++){var N=this.words[P]<<U|x;l[k--]=N&255,k>=0&&(l[k--]=N>>8&255),k>=0&&(l[k--]=N>>16&255),U===6?(k>=0&&(l[k--]=N>>24&255),x=0,U=0):(x=N>>>24,U+=2)}if(k>=0)for(l[k--]=x;k>=0;)l[k--]=0},Math.clz32?i.prototype._countBits=function(l){return 32-Math.clz32(l)}:i.prototype._countBits=function(l){var y=l,k=0;return y>=4096&&(k+=13,y>>>=13),y>=64&&(k+=7,y>>>=7),y>=8&&(k+=4,y>>>=4),y>=2&&(k+=2,y>>>=2),k+y},i.prototype._zeroBits=function(l){if(l===0)return 26;var y=l,k=0;return(y&8191)===0&&(k+=13,y>>>=13),(y&127)===0&&(k+=7,y>>>=7),(y&15)===0&&(k+=4,y>>>=4),(y&3)===0&&(k+=2,y>>>=2),(y&1)===0&&k++,k},i.prototype.bitLength=function(){var l=this.words[this.length-1],y=this._countBits(l);return(this.length-1)*26+y};function C(E){for(var l=new Array(E.bitLength()),y=0;y<l.length;y++){var k=y/26|0,x=y%26;l[y]=E.words[k]>>>x&1}return l}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,y=0;y<this.length;y++){var k=this._zeroBits(this.words[y]);if(l+=k,k!==26)break}return l},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},i.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var y=0;y<l.length;y++)this.words[y]=this.words[y]|l.words[y];return this._strip()},i.prototype.ior=function(l){return r((this.negative|l.negative)===0),this.iuor(l)},i.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},i.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},i.prototype.iuand=function(l){var y;this.length>l.length?y=l:y=this;for(var k=0;k<y.length;k++)this.words[k]=this.words[k]&l.words[k];return this.length=y.length,this._strip()},i.prototype.iand=function(l){return r((this.negative|l.negative)===0),this.iuand(l)},i.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},i.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},i.prototype.iuxor=function(l){var y,k;this.length>l.length?(y=this,k=l):(y=l,k=this);for(var x=0;x<k.length;x++)this.words[x]=y.words[x]^k.words[x];if(this!==y)for(;x<y.length;x++)this.words[x]=y.words[x];return this.length=y.length,this._strip()},i.prototype.ixor=function(l){return r((this.negative|l.negative)===0),this.iuxor(l)},i.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},i.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},i.prototype.inotn=function(l){r(typeof l=="number"&&l>=0);var y=Math.ceil(l/26)|0,k=l%26;this._expand(y),k>0&&y--;for(var x=0;x<y;x++)this.words[x]=~this.words[x]&67108863;return k>0&&(this.words[x]=~this.words[x]&67108863>>26-k),this._strip()},i.prototype.notn=function(l){return this.clone().inotn(l)},i.prototype.setn=function(l,y){r(typeof l=="number"&&l>=0);var k=l/26|0,x=l%26;return this._expand(k+1),y?this.words[k]=this.words[k]|1<<x:this.words[k]=this.words[k]&~(1<<x),this._strip()},i.prototype.iadd=function(l){var y;if(this.negative!==0&&l.negative===0)return this.negative=0,y=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,y=this.isub(l),l.negative=1,y._normSign();var k,x;this.length>l.length?(k=this,x=l):(k=l,x=this);for(var P=0,U=0;U<x.length;U++)y=(k.words[U]|0)+(x.words[U]|0)+P,this.words[U]=y&67108863,P=y>>>26;for(;P!==0&&U<k.length;U++)y=(k.words[U]|0)+P,this.words[U]=y&67108863,P=y>>>26;if(this.length=k.length,P!==0)this.words[this.length]=P,this.length++;else if(k!==this)for(;U<k.length;U++)this.words[U]=k.words[U];return this},i.prototype.add=function(l){var y;return l.negative!==0&&this.negative===0?(l.negative=0,y=this.sub(l),l.negative^=1,y):l.negative===0&&this.negative!==0?(this.negative=0,y=l.sub(this),this.negative=1,y):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},i.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var y=this.iadd(l);return l.negative=1,y._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var k=this.cmp(l);if(k===0)return this.negative=0,this.length=1,this.words[0]=0,this;var x,P;k>0?(x=this,P=l):(x=l,P=this);for(var U=0,N=0;N<P.length;N++)y=(x.words[N]|0)-(P.words[N]|0)+U,U=y>>26,this.words[N]=y&67108863;for(;U!==0&&N<x.length;N++)y=(x.words[N]|0)+U,U=y>>26,this.words[N]=y&67108863;if(U===0&&N<x.length&&x!==this)for(;N<x.length;N++)this.words[N]=x.words[N];return this.length=Math.max(this.length,N),x!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(l){return this.clone().isub(l)};function D(E,l,y){y.negative=l.negative^E.negative;var k=E.length+l.length|0;y.length=k,k=k-1|0;var x=E.words[0]|0,P=l.words[0]|0,U=x*P,N=U&67108863,I=U/67108864|0;y.words[0]=N;for(var d=1;d<k;d++){for(var p=I>>>26,_=I&67108863,T=Math.min(d,l.length-1),z=Math.max(0,d-E.length+1);z<=T;z++){var G=d-z|0;x=E.words[G]|0,P=l.words[z]|0,U=x*P+_,p+=U/67108864|0,_=U&67108863}y.words[d]=_|0,I=p|0}return I!==0?y.words[d]=I|0:y.length--,y._strip()}var V=function(l,y,k){var x=l.words,P=y.words,U=k.words,N=0,I,d,p,_=x[0]|0,T=_&8191,z=_>>>13,G=x[1]|0,te=G&8191,ae=G>>>13,Ee=x[2]|0,Se=Ee&8191,Pe=Ee>>>13,kt=x[3]|0,ve=kt&8191,We=kt>>>13,kn=x[4]|0,Ce=kn&8191,ze=kn>>>13,En=x[5]|0,Ne=En&8191,xe=En>>>13,qe=x[6]|0,Ue=qe&8191,Ve=qe>>>13,Qe=x[7]|0,$e=Qe&8191,h=Qe>>>13,a=x[8]|0,u=a&8191,g=a>>>13,S=x[9]|0,M=S&8191,O=S>>>13,ie=P[0]|0,fe=ie&8191,le=ie>>>13,ye=P[1]|0,se=ye&8191,et=ye>>>13,ca=P[2]|0,tt=ca&8191,rt=ca>>>13,ua=P[3]|0,nt=ua&8191,it=ua>>>13,la=P[4]|0,st=la&8191,ot=la>>>13,fa=P[5]|0,at=fa&8191,ct=fa>>>13,ha=P[6]|0,ut=ha&8191,lt=ha>>>13,da=P[7]|0,ft=da&8191,ht=da>>>13,pa=P[8]|0,dt=pa&8191,pt=pa>>>13,ya=P[9]|0,yt=ya&8191,gt=ya>>>13;k.negative=l.negative^y.negative,k.length=19,I=Math.imul(T,fe),d=Math.imul(T,le),d=d+Math.imul(z,fe)|0,p=Math.imul(z,le);var ys=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(ys>>>26)|0,ys&=67108863,I=Math.imul(te,fe),d=Math.imul(te,le),d=d+Math.imul(ae,fe)|0,p=Math.imul(ae,le),I=I+Math.imul(T,se)|0,d=d+Math.imul(T,et)|0,d=d+Math.imul(z,se)|0,p=p+Math.imul(z,et)|0;var gs=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(gs>>>26)|0,gs&=67108863,I=Math.imul(Se,fe),d=Math.imul(Se,le),d=d+Math.imul(Pe,fe)|0,p=Math.imul(Pe,le),I=I+Math.imul(te,se)|0,d=d+Math.imul(te,et)|0,d=d+Math.imul(ae,se)|0,p=p+Math.imul(ae,et)|0,I=I+Math.imul(T,tt)|0,d=d+Math.imul(T,rt)|0,d=d+Math.imul(z,tt)|0,p=p+Math.imul(z,rt)|0;var ms=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(ms>>>26)|0,ms&=67108863,I=Math.imul(ve,fe),d=Math.imul(ve,le),d=d+Math.imul(We,fe)|0,p=Math.imul(We,le),I=I+Math.imul(Se,se)|0,d=d+Math.imul(Se,et)|0,d=d+Math.imul(Pe,se)|0,p=p+Math.imul(Pe,et)|0,I=I+Math.imul(te,tt)|0,d=d+Math.imul(te,rt)|0,d=d+Math.imul(ae,tt)|0,p=p+Math.imul(ae,rt)|0,I=I+Math.imul(T,nt)|0,d=d+Math.imul(T,it)|0,d=d+Math.imul(z,nt)|0,p=p+Math.imul(z,it)|0;var bs=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(bs>>>26)|0,bs&=67108863,I=Math.imul(Ce,fe),d=Math.imul(Ce,le),d=d+Math.imul(ze,fe)|0,p=Math.imul(ze,le),I=I+Math.imul(ve,se)|0,d=d+Math.imul(ve,et)|0,d=d+Math.imul(We,se)|0,p=p+Math.imul(We,et)|0,I=I+Math.imul(Se,tt)|0,d=d+Math.imul(Se,rt)|0,d=d+Math.imul(Pe,tt)|0,p=p+Math.imul(Pe,rt)|0,I=I+Math.imul(te,nt)|0,d=d+Math.imul(te,it)|0,d=d+Math.imul(ae,nt)|0,p=p+Math.imul(ae,it)|0,I=I+Math.imul(T,st)|0,d=d+Math.imul(T,ot)|0,d=d+Math.imul(z,st)|0,p=p+Math.imul(z,ot)|0;var ws=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(ws>>>26)|0,ws&=67108863,I=Math.imul(Ne,fe),d=Math.imul(Ne,le),d=d+Math.imul(xe,fe)|0,p=Math.imul(xe,le),I=I+Math.imul(Ce,se)|0,d=d+Math.imul(Ce,et)|0,d=d+Math.imul(ze,se)|0,p=p+Math.imul(ze,et)|0,I=I+Math.imul(ve,tt)|0,d=d+Math.imul(ve,rt)|0,d=d+Math.imul(We,tt)|0,p=p+Math.imul(We,rt)|0,I=I+Math.imul(Se,nt)|0,d=d+Math.imul(Se,it)|0,d=d+Math.imul(Pe,nt)|0,p=p+Math.imul(Pe,it)|0,I=I+Math.imul(te,st)|0,d=d+Math.imul(te,ot)|0,d=d+Math.imul(ae,st)|0,p=p+Math.imul(ae,ot)|0,I=I+Math.imul(T,at)|0,d=d+Math.imul(T,ct)|0,d=d+Math.imul(z,at)|0,p=p+Math.imul(z,ct)|0;var ks=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(ks>>>26)|0,ks&=67108863,I=Math.imul(Ue,fe),d=Math.imul(Ue,le),d=d+Math.imul(Ve,fe)|0,p=Math.imul(Ve,le),I=I+Math.imul(Ne,se)|0,d=d+Math.imul(Ne,et)|0,d=d+Math.imul(xe,se)|0,p=p+Math.imul(xe,et)|0,I=I+Math.imul(Ce,tt)|0,d=d+Math.imul(Ce,rt)|0,d=d+Math.imul(ze,tt)|0,p=p+Math.imul(ze,rt)|0,I=I+Math.imul(ve,nt)|0,d=d+Math.imul(ve,it)|0,d=d+Math.imul(We,nt)|0,p=p+Math.imul(We,it)|0,I=I+Math.imul(Se,st)|0,d=d+Math.imul(Se,ot)|0,d=d+Math.imul(Pe,st)|0,p=p+Math.imul(Pe,ot)|0,I=I+Math.imul(te,at)|0,d=d+Math.imul(te,ct)|0,d=d+Math.imul(ae,at)|0,p=p+Math.imul(ae,ct)|0,I=I+Math.imul(T,ut)|0,d=d+Math.imul(T,lt)|0,d=d+Math.imul(z,ut)|0,p=p+Math.imul(z,lt)|0;var Es=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(Es>>>26)|0,Es&=67108863,I=Math.imul($e,fe),d=Math.imul($e,le),d=d+Math.imul(h,fe)|0,p=Math.imul(h,le),I=I+Math.imul(Ue,se)|0,d=d+Math.imul(Ue,et)|0,d=d+Math.imul(Ve,se)|0,p=p+Math.imul(Ve,et)|0,I=I+Math.imul(Ne,tt)|0,d=d+Math.imul(Ne,rt)|0,d=d+Math.imul(xe,tt)|0,p=p+Math.imul(xe,rt)|0,I=I+Math.imul(Ce,nt)|0,d=d+Math.imul(Ce,it)|0,d=d+Math.imul(ze,nt)|0,p=p+Math.imul(ze,it)|0,I=I+Math.imul(ve,st)|0,d=d+Math.imul(ve,ot)|0,d=d+Math.imul(We,st)|0,p=p+Math.imul(We,ot)|0,I=I+Math.imul(Se,at)|0,d=d+Math.imul(Se,ct)|0,d=d+Math.imul(Pe,at)|0,p=p+Math.imul(Pe,ct)|0,I=I+Math.imul(te,ut)|0,d=d+Math.imul(te,lt)|0,d=d+Math.imul(ae,ut)|0,p=p+Math.imul(ae,lt)|0,I=I+Math.imul(T,ft)|0,d=d+Math.imul(T,ht)|0,d=d+Math.imul(z,ft)|0,p=p+Math.imul(z,ht)|0;var As=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(As>>>26)|0,As&=67108863,I=Math.imul(u,fe),d=Math.imul(u,le),d=d+Math.imul(g,fe)|0,p=Math.imul(g,le),I=I+Math.imul($e,se)|0,d=d+Math.imul($e,et)|0,d=d+Math.imul(h,se)|0,p=p+Math.imul(h,et)|0,I=I+Math.imul(Ue,tt)|0,d=d+Math.imul(Ue,rt)|0,d=d+Math.imul(Ve,tt)|0,p=p+Math.imul(Ve,rt)|0,I=I+Math.imul(Ne,nt)|0,d=d+Math.imul(Ne,it)|0,d=d+Math.imul(xe,nt)|0,p=p+Math.imul(xe,it)|0,I=I+Math.imul(Ce,st)|0,d=d+Math.imul(Ce,ot)|0,d=d+Math.imul(ze,st)|0,p=p+Math.imul(ze,ot)|0,I=I+Math.imul(ve,at)|0,d=d+Math.imul(ve,ct)|0,d=d+Math.imul(We,at)|0,p=p+Math.imul(We,ct)|0,I=I+Math.imul(Se,ut)|0,d=d+Math.imul(Se,lt)|0,d=d+Math.imul(Pe,ut)|0,p=p+Math.imul(Pe,lt)|0,I=I+Math.imul(te,ft)|0,d=d+Math.imul(te,ht)|0,d=d+Math.imul(ae,ft)|0,p=p+Math.imul(ae,ht)|0,I=I+Math.imul(T,dt)|0,d=d+Math.imul(T,pt)|0,d=d+Math.imul(z,dt)|0,p=p+Math.imul(z,pt)|0;var Ss=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,I=Math.imul(M,fe),d=Math.imul(M,le),d=d+Math.imul(O,fe)|0,p=Math.imul(O,le),I=I+Math.imul(u,se)|0,d=d+Math.imul(u,et)|0,d=d+Math.imul(g,se)|0,p=p+Math.imul(g,et)|0,I=I+Math.imul($e,tt)|0,d=d+Math.imul($e,rt)|0,d=d+Math.imul(h,tt)|0,p=p+Math.imul(h,rt)|0,I=I+Math.imul(Ue,nt)|0,d=d+Math.imul(Ue,it)|0,d=d+Math.imul(Ve,nt)|0,p=p+Math.imul(Ve,it)|0,I=I+Math.imul(Ne,st)|0,d=d+Math.imul(Ne,ot)|0,d=d+Math.imul(xe,st)|0,p=p+Math.imul(xe,ot)|0,I=I+Math.imul(Ce,at)|0,d=d+Math.imul(Ce,ct)|0,d=d+Math.imul(ze,at)|0,p=p+Math.imul(ze,ct)|0,I=I+Math.imul(ve,ut)|0,d=d+Math.imul(ve,lt)|0,d=d+Math.imul(We,ut)|0,p=p+Math.imul(We,lt)|0,I=I+Math.imul(Se,ft)|0,d=d+Math.imul(Se,ht)|0,d=d+Math.imul(Pe,ft)|0,p=p+Math.imul(Pe,ht)|0,I=I+Math.imul(te,dt)|0,d=d+Math.imul(te,pt)|0,d=d+Math.imul(ae,dt)|0,p=p+Math.imul(ae,pt)|0,I=I+Math.imul(T,yt)|0,d=d+Math.imul(T,gt)|0,d=d+Math.imul(z,yt)|0,p=p+Math.imul(z,gt)|0;var vs=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(vs>>>26)|0,vs&=67108863,I=Math.imul(M,se),d=Math.imul(M,et),d=d+Math.imul(O,se)|0,p=Math.imul(O,et),I=I+Math.imul(u,tt)|0,d=d+Math.imul(u,rt)|0,d=d+Math.imul(g,tt)|0,p=p+Math.imul(g,rt)|0,I=I+Math.imul($e,nt)|0,d=d+Math.imul($e,it)|0,d=d+Math.imul(h,nt)|0,p=p+Math.imul(h,it)|0,I=I+Math.imul(Ue,st)|0,d=d+Math.imul(Ue,ot)|0,d=d+Math.imul(Ve,st)|0,p=p+Math.imul(Ve,ot)|0,I=I+Math.imul(Ne,at)|0,d=d+Math.imul(Ne,ct)|0,d=d+Math.imul(xe,at)|0,p=p+Math.imul(xe,ct)|0,I=I+Math.imul(Ce,ut)|0,d=d+Math.imul(Ce,lt)|0,d=d+Math.imul(ze,ut)|0,p=p+Math.imul(ze,lt)|0,I=I+Math.imul(ve,ft)|0,d=d+Math.imul(ve,ht)|0,d=d+Math.imul(We,ft)|0,p=p+Math.imul(We,ht)|0,I=I+Math.imul(Se,dt)|0,d=d+Math.imul(Se,pt)|0,d=d+Math.imul(Pe,dt)|0,p=p+Math.imul(Pe,pt)|0,I=I+Math.imul(te,yt)|0,d=d+Math.imul(te,gt)|0,d=d+Math.imul(ae,yt)|0,p=p+Math.imul(ae,gt)|0;var _s=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(_s>>>26)|0,_s&=67108863,I=Math.imul(M,tt),d=Math.imul(M,rt),d=d+Math.imul(O,tt)|0,p=Math.imul(O,rt),I=I+Math.imul(u,nt)|0,d=d+Math.imul(u,it)|0,d=d+Math.imul(g,nt)|0,p=p+Math.imul(g,it)|0,I=I+Math.imul($e,st)|0,d=d+Math.imul($e,ot)|0,d=d+Math.imul(h,st)|0,p=p+Math.imul(h,ot)|0,I=I+Math.imul(Ue,at)|0,d=d+Math.imul(Ue,ct)|0,d=d+Math.imul(Ve,at)|0,p=p+Math.imul(Ve,ct)|0,I=I+Math.imul(Ne,ut)|0,d=d+Math.imul(Ne,lt)|0,d=d+Math.imul(xe,ut)|0,p=p+Math.imul(xe,lt)|0,I=I+Math.imul(Ce,ft)|0,d=d+Math.imul(Ce,ht)|0,d=d+Math.imul(ze,ft)|0,p=p+Math.imul(ze,ht)|0,I=I+Math.imul(ve,dt)|0,d=d+Math.imul(ve,pt)|0,d=d+Math.imul(We,dt)|0,p=p+Math.imul(We,pt)|0,I=I+Math.imul(Se,yt)|0,d=d+Math.imul(Se,gt)|0,d=d+Math.imul(Pe,yt)|0,p=p+Math.imul(Pe,gt)|0;var Is=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(Is>>>26)|0,Is&=67108863,I=Math.imul(M,nt),d=Math.imul(M,it),d=d+Math.imul(O,nt)|0,p=Math.imul(O,it),I=I+Math.imul(u,st)|0,d=d+Math.imul(u,ot)|0,d=d+Math.imul(g,st)|0,p=p+Math.imul(g,ot)|0,I=I+Math.imul($e,at)|0,d=d+Math.imul($e,ct)|0,d=d+Math.imul(h,at)|0,p=p+Math.imul(h,ct)|0,I=I+Math.imul(Ue,ut)|0,d=d+Math.imul(Ue,lt)|0,d=d+Math.imul(Ve,ut)|0,p=p+Math.imul(Ve,lt)|0,I=I+Math.imul(Ne,ft)|0,d=d+Math.imul(Ne,ht)|0,d=d+Math.imul(xe,ft)|0,p=p+Math.imul(xe,ht)|0,I=I+Math.imul(Ce,dt)|0,d=d+Math.imul(Ce,pt)|0,d=d+Math.imul(ze,dt)|0,p=p+Math.imul(ze,pt)|0,I=I+Math.imul(ve,yt)|0,d=d+Math.imul(ve,gt)|0,d=d+Math.imul(We,yt)|0,p=p+Math.imul(We,gt)|0;var Bs=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,I=Math.imul(M,st),d=Math.imul(M,ot),d=d+Math.imul(O,st)|0,p=Math.imul(O,ot),I=I+Math.imul(u,at)|0,d=d+Math.imul(u,ct)|0,d=d+Math.imul(g,at)|0,p=p+Math.imul(g,ct)|0,I=I+Math.imul($e,ut)|0,d=d+Math.imul($e,lt)|0,d=d+Math.imul(h,ut)|0,p=p+Math.imul(h,lt)|0,I=I+Math.imul(Ue,ft)|0,d=d+Math.imul(Ue,ht)|0,d=d+Math.imul(Ve,ft)|0,p=p+Math.imul(Ve,ht)|0,I=I+Math.imul(Ne,dt)|0,d=d+Math.imul(Ne,pt)|0,d=d+Math.imul(xe,dt)|0,p=p+Math.imul(xe,pt)|0,I=I+Math.imul(Ce,yt)|0,d=d+Math.imul(Ce,gt)|0,d=d+Math.imul(ze,yt)|0,p=p+Math.imul(ze,gt)|0;var xs=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(xs>>>26)|0,xs&=67108863,I=Math.imul(M,at),d=Math.imul(M,ct),d=d+Math.imul(O,at)|0,p=Math.imul(O,ct),I=I+Math.imul(u,ut)|0,d=d+Math.imul(u,lt)|0,d=d+Math.imul(g,ut)|0,p=p+Math.imul(g,lt)|0,I=I+Math.imul($e,ft)|0,d=d+Math.imul($e,ht)|0,d=d+Math.imul(h,ft)|0,p=p+Math.imul(h,ht)|0,I=I+Math.imul(Ue,dt)|0,d=d+Math.imul(Ue,pt)|0,d=d+Math.imul(Ve,dt)|0,p=p+Math.imul(Ve,pt)|0,I=I+Math.imul(Ne,yt)|0,d=d+Math.imul(Ne,gt)|0,d=d+Math.imul(xe,yt)|0,p=p+Math.imul(xe,gt)|0;var Rs=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(Rs>>>26)|0,Rs&=67108863,I=Math.imul(M,ut),d=Math.imul(M,lt),d=d+Math.imul(O,ut)|0,p=Math.imul(O,lt),I=I+Math.imul(u,ft)|0,d=d+Math.imul(u,ht)|0,d=d+Math.imul(g,ft)|0,p=p+Math.imul(g,ht)|0,I=I+Math.imul($e,dt)|0,d=d+Math.imul($e,pt)|0,d=d+Math.imul(h,dt)|0,p=p+Math.imul(h,pt)|0,I=I+Math.imul(Ue,yt)|0,d=d+Math.imul(Ue,gt)|0,d=d+Math.imul(Ve,yt)|0,p=p+Math.imul(Ve,gt)|0;var Ms=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,I=Math.imul(M,ft),d=Math.imul(M,ht),d=d+Math.imul(O,ft)|0,p=Math.imul(O,ht),I=I+Math.imul(u,dt)|0,d=d+Math.imul(u,pt)|0,d=d+Math.imul(g,dt)|0,p=p+Math.imul(g,pt)|0,I=I+Math.imul($e,yt)|0,d=d+Math.imul($e,gt)|0,d=d+Math.imul(h,yt)|0,p=p+Math.imul(h,gt)|0;var Ps=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,I=Math.imul(M,dt),d=Math.imul(M,pt),d=d+Math.imul(O,dt)|0,p=Math.imul(O,pt),I=I+Math.imul(u,yt)|0,d=d+Math.imul(u,gt)|0,d=d+Math.imul(g,yt)|0,p=p+Math.imul(g,gt)|0;var Ts=(N+I|0)+((d&8191)<<13)|0;N=(p+(d>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,I=Math.imul(M,yt),d=Math.imul(M,gt),d=d+Math.imul(O,yt)|0,p=Math.imul(O,gt);var Cs=(N+I|0)+((d&8191)<<13)|0;return N=(p+(d>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,U[0]=ys,U[1]=gs,U[2]=ms,U[3]=bs,U[4]=ws,U[5]=ks,U[6]=Es,U[7]=As,U[8]=Ss,U[9]=vs,U[10]=_s,U[11]=Is,U[12]=Bs,U[13]=xs,U[14]=Rs,U[15]=Ms,U[16]=Ps,U[17]=Ts,U[18]=Cs,N!==0&&(U[19]=N,k.length++),k};Math.imul||(V=D);function W(E,l,y){y.negative=l.negative^E.negative,y.length=E.length+l.length;for(var k=0,x=0,P=0;P<y.length-1;P++){var U=x;x=0;for(var N=k&67108863,I=Math.min(P,l.length-1),d=Math.max(0,P-E.length+1);d<=I;d++){var p=P-d,_=E.words[p]|0,T=l.words[d]|0,z=_*T,G=z&67108863;U=U+(z/67108864|0)|0,G=G+N|0,N=G&67108863,U=U+(G>>>26)|0,x+=U>>>26,U&=67108863}y.words[P]=N,k=U,U=x}return k!==0?y.words[P]=k:y.length--,y._strip()}function X(E,l,y){return W(E,l,y)}i.prototype.mulTo=function(l,y){var k,x=this.length+l.length;return this.length===10&&l.length===10?k=V(this,l,y):x<63?k=D(this,l,y):x<1024?k=W(this,l,y):k=X(this,l,y),k},i.prototype.mul=function(l){var y=new i(null);return y.words=new Array(this.length+l.length),this.mulTo(l,y)},i.prototype.mulf=function(l){var y=new i(null);return y.words=new Array(this.length+l.length),X(this,l,y)},i.prototype.imul=function(l){return this.clone().mulTo(l,this)},i.prototype.imuln=function(l){var y=l<0;y&&(l=-l),r(typeof l=="number"),r(l<67108864);for(var k=0,x=0;x<this.length;x++){var P=(this.words[x]|0)*l,U=(P&67108863)+(k&67108863);k>>=26,k+=P/67108864|0,k+=U>>>26,this.words[x]=U&67108863}return k!==0&&(this.words[x]=k,this.length++),this.length=l===0?1:this.length,y?this.ineg():this},i.prototype.muln=function(l){return this.clone().imuln(l)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(l){var y=C(l);if(y.length===0)return new i(1);for(var k=this,x=0;x<y.length&&y[x]===0;x++,k=k.sqr());if(++x<y.length)for(var P=k.sqr();x<y.length;x++,P=P.sqr())y[x]!==0&&(k=k.mul(P));return k},i.prototype.iushln=function(l){r(typeof l=="number"&&l>=0);var y=l%26,k=(l-y)/26,x=67108863>>>26-y<<26-y,P;if(y!==0){var U=0;for(P=0;P<this.length;P++){var N=this.words[P]&x,I=(this.words[P]|0)-N<<y;this.words[P]=I|U,U=N>>>26-y}U&&(this.words[P]=U,this.length++)}if(k!==0){for(P=this.length-1;P>=0;P--)this.words[P+k]=this.words[P];for(P=0;P<k;P++)this.words[P]=0;this.length+=k}return this._strip()},i.prototype.ishln=function(l){return r(this.negative===0),this.iushln(l)},i.prototype.iushrn=function(l,y,k){r(typeof l=="number"&&l>=0);var x;y?x=(y-y%26)/26:x=0;var P=l%26,U=Math.min((l-P)/26,this.length),N=67108863^67108863>>>P<<P,I=k;if(x-=U,x=Math.max(0,x),I){for(var d=0;d<U;d++)I.words[d]=this.words[d];I.length=U}if(U!==0)if(this.length>U)for(this.length-=U,d=0;d<this.length;d++)this.words[d]=this.words[d+U];else this.words[0]=0,this.length=1;var p=0;for(d=this.length-1;d>=0&&(p!==0||d>=x);d--){var _=this.words[d]|0;this.words[d]=p<<26-P|_>>>P,p=_&N}return I&&p!==0&&(I.words[I.length++]=p),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(l,y,k){return r(this.negative===0),this.iushrn(l,y,k)},i.prototype.shln=function(l){return this.clone().ishln(l)},i.prototype.ushln=function(l){return this.clone().iushln(l)},i.prototype.shrn=function(l){return this.clone().ishrn(l)},i.prototype.ushrn=function(l){return this.clone().iushrn(l)},i.prototype.testn=function(l){r(typeof l=="number"&&l>=0);var y=l%26,k=(l-y)/26,x=1<<y;if(this.length<=k)return!1;var P=this.words[k];return!!(P&x)},i.prototype.imaskn=function(l){r(typeof l=="number"&&l>=0);var y=l%26,k=(l-y)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=k)return this;if(y!==0&&k++,this.length=Math.min(k,this.length),y!==0){var x=67108863^67108863>>>y<<y;this.words[this.length-1]&=x}return this._strip()},i.prototype.maskn=function(l){return this.clone().imaskn(l)},i.prototype.iaddn=function(l){return r(typeof l=="number"),r(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<=l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},i.prototype._iaddn=function(l){this.words[0]+=l;for(var y=0;y<this.length&&this.words[y]>=67108864;y++)this.words[y]-=67108864,y===this.length-1?this.words[y+1]=1:this.words[y+1]++;return this.length=Math.max(this.length,y+1),this},i.prototype.isubn=function(l){if(r(typeof l=="number"),r(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var y=0;y<this.length&&this.words[y]<0;y++)this.words[y]+=67108864,this.words[y+1]-=1;return this._strip()},i.prototype.addn=function(l){return this.clone().iaddn(l)},i.prototype.subn=function(l){return this.clone().isubn(l)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(l,y,k){var x=l.length+k,P;this._expand(x);var U,N=0;for(P=0;P<l.length;P++){U=(this.words[P+k]|0)+N;var I=(l.words[P]|0)*y;U-=I&67108863,N=(U>>26)-(I/67108864|0),this.words[P+k]=U&67108863}for(;P<this.length-k;P++)U=(this.words[P+k]|0)+N,N=U>>26,this.words[P+k]=U&67108863;if(N===0)return this._strip();for(r(N===-1),N=0,P=0;P<this.length;P++)U=-(this.words[P]|0)+N,N=U>>26,this.words[P]=U&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(l,y){var k=this.length-l.length,x=this.clone(),P=l,U=P.words[P.length-1]|0,N=this._countBits(U);k=26-N,k!==0&&(P=P.ushln(k),x.iushln(k),U=P.words[P.length-1]|0);var I=x.length-P.length,d;if(y!=="mod"){d=new i(null),d.length=I+1,d.words=new Array(d.length);for(var p=0;p<d.length;p++)d.words[p]=0}var _=x.clone()._ishlnsubmul(P,1,I);_.negative===0&&(x=_,d&&(d.words[I]=1));for(var T=I-1;T>=0;T--){var z=(x.words[P.length+T]|0)*67108864+(x.words[P.length+T-1]|0);for(z=Math.min(z/U|0,67108863),x._ishlnsubmul(P,z,T);x.negative!==0;)z--,x.negative=0,x._ishlnsubmul(P,1,T),x.isZero()||(x.negative^=1);d&&(d.words[T]=z)}return d&&d._strip(),x._strip(),y!=="div"&&k!==0&&x.iushrn(k),{div:d||null,mod:x}},i.prototype.divmod=function(l,y,k){if(r(!l.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var x,P,U;return this.negative!==0&&l.negative===0?(U=this.neg().divmod(l,y),y!=="mod"&&(x=U.div.neg()),y!=="div"&&(P=U.mod.neg(),k&&P.negative!==0&&P.iadd(l)),{div:x,mod:P}):this.negative===0&&l.negative!==0?(U=this.divmod(l.neg(),y),y!=="mod"&&(x=U.div.neg()),{div:x,mod:U.mod}):(this.negative&l.negative)!==0?(U=this.neg().divmod(l.neg(),y),y!=="div"&&(P=U.mod.neg(),k&&P.negative!==0&&P.isub(l)),{div:U.div,mod:P}):l.length>this.length||this.cmp(l)<0?{div:new i(0),mod:this}:l.length===1?y==="div"?{div:this.divn(l.words[0]),mod:null}:y==="mod"?{div:null,mod:new i(this.modrn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new i(this.modrn(l.words[0]))}:this._wordDiv(l,y)},i.prototype.div=function(l){return this.divmod(l,"div",!1).div},i.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},i.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},i.prototype.divRound=function(l){var y=this.divmod(l);if(y.mod.isZero())return y.div;var k=y.div.negative!==0?y.mod.isub(l):y.mod,x=l.ushrn(1),P=l.andln(1),U=k.cmp(x);return U<0||P===1&&U===0?y.div:y.div.negative!==0?y.div.isubn(1):y.div.iaddn(1)},i.prototype.modrn=function(l){var y=l<0;y&&(l=-l),r(l<=67108863);for(var k=(1<<26)%l,x=0,P=this.length-1;P>=0;P--)x=(k*x+(this.words[P]|0))%l;return y?-x:x},i.prototype.modn=function(l){return this.modrn(l)},i.prototype.idivn=function(l){var y=l<0;y&&(l=-l),r(l<=67108863);for(var k=0,x=this.length-1;x>=0;x--){var P=(this.words[x]|0)+k*67108864;this.words[x]=P/l|0,k=P%l}return this._strip(),y?this.ineg():this},i.prototype.divn=function(l){return this.clone().idivn(l)},i.prototype.egcd=function(l){r(l.negative===0),r(!l.isZero());var y=this,k=l.clone();y.negative!==0?y=y.umod(l):y=y.clone();for(var x=new i(1),P=new i(0),U=new i(0),N=new i(1),I=0;y.isEven()&&k.isEven();)y.iushrn(1),k.iushrn(1),++I;for(var d=k.clone(),p=y.clone();!y.isZero();){for(var _=0,T=1;(y.words[0]&T)===0&&_<26;++_,T<<=1);if(_>0)for(y.iushrn(_);_-- >0;)(x.isOdd()||P.isOdd())&&(x.iadd(d),P.isub(p)),x.iushrn(1),P.iushrn(1);for(var z=0,G=1;(k.words[0]&G)===0&&z<26;++z,G<<=1);if(z>0)for(k.iushrn(z);z-- >0;)(U.isOdd()||N.isOdd())&&(U.iadd(d),N.isub(p)),U.iushrn(1),N.iushrn(1);y.cmp(k)>=0?(y.isub(k),x.isub(U),P.isub(N)):(k.isub(y),U.isub(x),N.isub(P))}return{a:U,b:N,gcd:k.iushln(I)}},i.prototype._invmp=function(l){r(l.negative===0),r(!l.isZero());var y=this,k=l.clone();y.negative!==0?y=y.umod(l):y=y.clone();for(var x=new i(1),P=new i(0),U=k.clone();y.cmpn(1)>0&&k.cmpn(1)>0;){for(var N=0,I=1;(y.words[0]&I)===0&&N<26;++N,I<<=1);if(N>0)for(y.iushrn(N);N-- >0;)x.isOdd()&&x.iadd(U),x.iushrn(1);for(var d=0,p=1;(k.words[0]&p)===0&&d<26;++d,p<<=1);if(d>0)for(k.iushrn(d);d-- >0;)P.isOdd()&&P.iadd(U),P.iushrn(1);y.cmp(k)>=0?(y.isub(k),x.isub(P)):(k.isub(y),P.isub(x))}var _;return y.cmpn(1)===0?_=x:_=P,_.cmpn(0)<0&&_.iadd(l),_},i.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var y=this.clone(),k=l.clone();y.negative=0,k.negative=0;for(var x=0;y.isEven()&&k.isEven();x++)y.iushrn(1),k.iushrn(1);do{for(;y.isEven();)y.iushrn(1);for(;k.isEven();)k.iushrn(1);var P=y.cmp(k);if(P<0){var U=y;y=k,k=U}else if(P===0||k.cmpn(1)===0)break;y.isub(k)}while(!0);return k.iushln(x)},i.prototype.invm=function(l){return this.egcd(l).a.umod(l)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(l){return this.words[0]&l},i.prototype.bincn=function(l){r(typeof l=="number");var y=l%26,k=(l-y)/26,x=1<<y;if(this.length<=k)return this._expand(k+1),this.words[k]|=x,this;for(var P=x,U=k;P!==0&&U<this.length;U++){var N=this.words[U]|0;N+=P,P=N>>>26,N&=67108863,this.words[U]=N}return P!==0&&(this.words[U]=P,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(l){var y=l<0;if(this.negative!==0&&!y)return-1;if(this.negative===0&&y)return 1;this._strip();var k;if(this.length>1)k=1;else{y&&(l=-l),r(l<=67108863,"Number is too big");var x=this.words[0]|0;k=x===l?0:x<l?-1:1}return this.negative!==0?-k|0:k},i.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var y=this.ucmp(l);return this.negative!==0?-y|0:y},i.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var y=0,k=this.length-1;k>=0;k--){var x=this.words[k]|0,P=l.words[k]|0;if(x!==P){x<P?y=-1:x>P&&(y=1);break}}return y},i.prototype.gtn=function(l){return this.cmpn(l)===1},i.prototype.gt=function(l){return this.cmp(l)===1},i.prototype.gten=function(l){return this.cmpn(l)>=0},i.prototype.gte=function(l){return this.cmp(l)>=0},i.prototype.ltn=function(l){return this.cmpn(l)===-1},i.prototype.lt=function(l){return this.cmp(l)===-1},i.prototype.lten=function(l){return this.cmpn(l)<=0},i.prototype.lte=function(l){return this.cmp(l)<=0},i.prototype.eqn=function(l){return this.cmpn(l)===0},i.prototype.eq=function(l){return this.cmp(l)===0},i.red=function(l){return new q(l)},i.prototype.toRed=function(l){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(l){return this.red=l,this},i.prototype.forceRed=function(l){return r(!this.red,"Already a number in reduction context"),this._forceRed(l)},i.prototype.redAdd=function(l){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},i.prototype.redIAdd=function(l){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},i.prototype.redSub=function(l){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},i.prototype.redISub=function(l){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},i.prototype.redShl=function(l){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},i.prototype.redMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},i.prototype.redIMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(l){return r(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var Y={k256:null,p224:null,p192:null,p25519:null};function Z(E,l){this.name=E,this.p=new i(l,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Z.prototype._tmp=function(){var l=new i(null);return l.words=new Array(Math.ceil(this.n/13)),l},Z.prototype.ireduce=function(l){var y=l,k;do this.split(y,this.tmp),y=this.imulK(y),y=y.iadd(this.tmp),k=y.bitLength();while(k>this.n);var x=k<this.n?-1:y.ucmp(this.p);return x===0?(y.words[0]=0,y.length=1):x>0?y.isub(this.p):y.strip!==void 0?y.strip():y._strip(),y},Z.prototype.split=function(l,y){l.iushrn(this.n,0,y)},Z.prototype.imulK=function(l){return l.imul(this.k)};function oe(){Z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(oe,Z),oe.prototype.split=function(l,y){for(var k=4194303,x=Math.min(l.length,9),P=0;P<x;P++)y.words[P]=l.words[P];if(y.length=x,l.length<=9){l.words[0]=0,l.length=1;return}var U=l.words[9];for(y.words[y.length++]=U&k,P=10;P<l.length;P++){var N=l.words[P]|0;l.words[P-10]=(N&k)<<4|U>>>22,U=N}U>>>=22,l.words[P-10]=U,U===0&&l.length>10?l.length-=10:l.length-=9},oe.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var y=0,k=0;k<l.length;k++){var x=l.words[k]|0;y+=x*977,l.words[k]=y&67108863,y=x*64+(y/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function ee(){Z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ee,Z);function F(){Z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(F,Z);function K(){Z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(K,Z),K.prototype.imulK=function(l){for(var y=0,k=0;k<l.length;k++){var x=(l.words[k]|0)*19+y,P=x&67108863;x>>>=26,l.words[k]=P,y=x}return y!==0&&(l.words[l.length++]=y),l},i._prime=function(l){if(Y[l])return Y[l];var y;if(l==="k256")y=new oe;else if(l==="p224")y=new ee;else if(l==="p192")y=new F;else if(l==="p25519")y=new K;else throw new Error("Unknown prime "+l);return Y[l]=y,y};function q(E){if(typeof E=="string"){var l=i._prime(E);this.m=l.p,this.prime=l}else r(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}q.prototype._verify1=function(l){r(l.negative===0,"red works only with positives"),r(l.red,"red works only with red numbers")},q.prototype._verify2=function(l,y){r((l.negative|y.negative)===0,"red works only with positives"),r(l.red&&l.red===y.red,"red works only with red numbers")},q.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):(b(l,l.umod(this.m)._forceRed(this)),l)},q.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},q.prototype.add=function(l,y){this._verify2(l,y);var k=l.add(y);return k.cmp(this.m)>=0&&k.isub(this.m),k._forceRed(this)},q.prototype.iadd=function(l,y){this._verify2(l,y);var k=l.iadd(y);return k.cmp(this.m)>=0&&k.isub(this.m),k},q.prototype.sub=function(l,y){this._verify2(l,y);var k=l.sub(y);return k.cmpn(0)<0&&k.iadd(this.m),k._forceRed(this)},q.prototype.isub=function(l,y){this._verify2(l,y);var k=l.isub(y);return k.cmpn(0)<0&&k.iadd(this.m),k},q.prototype.shl=function(l,y){return this._verify1(l),this.imod(l.ushln(y))},q.prototype.imul=function(l,y){return this._verify2(l,y),this.imod(l.imul(y))},q.prototype.mul=function(l,y){return this._verify2(l,y),this.imod(l.mul(y))},q.prototype.isqr=function(l){return this.imul(l,l.clone())},q.prototype.sqr=function(l){return this.mul(l,l)},q.prototype.sqrt=function(l){if(l.isZero())return l.clone();var y=this.m.andln(3);if(r(y%2===1),y===3){var k=this.m.add(new i(1)).iushrn(2);return this.pow(l,k)}for(var x=this.m.subn(1),P=0;!x.isZero()&&x.andln(1)===0;)P++,x.iushrn(1);r(!x.isZero());var U=new i(1).toRed(this),N=U.redNeg(),I=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new i(2*d*d).toRed(this);this.pow(d,I).cmp(N)!==0;)d.redIAdd(N);for(var p=this.pow(d,x),_=this.pow(l,x.addn(1).iushrn(1)),T=this.pow(l,x),z=P;T.cmp(U)!==0;){for(var G=T,te=0;G.cmp(U)!==0;te++)G=G.redSqr();r(te<z);var ae=this.pow(p,new i(1).iushln(z-te-1));_=_.redMul(ae),p=ae.redSqr(),T=T.redMul(p),z=te}return _},q.prototype.invm=function(l){var y=l._invmp(this.m);return y.negative!==0?(y.negative=0,this.imod(y).redNeg()):this.imod(y)},q.prototype.pow=function(l,y){if(y.isZero())return new i(1).toRed(this);if(y.cmpn(1)===0)return l.clone();var k=4,x=new Array(1<<k);x[0]=new i(1).toRed(this),x[1]=l;for(var P=2;P<x.length;P++)x[P]=this.mul(x[P-1],l);var U=x[0],N=0,I=0,d=y.bitLength()%26;for(d===0&&(d=26),P=y.length-1;P>=0;P--){for(var p=y.words[P],_=d-1;_>=0;_--){var T=p>>_&1;if(U!==x[0]&&(U=this.sqr(U)),T===0&&N===0){I=0;continue}N<<=1,N|=T,I++,!(I!==k&&(P!==0||_!==0))&&(U=this.mul(U,x[N]),I=0,N=0)}d=26}return U},q.prototype.convertTo=function(l){var y=l.umod(this.m);return y===l?y.clone():y},q.prototype.convertFrom=function(l){var y=l.clone();return y.red=null,y},i.mont=function(l){return new H(l)};function H(E){q.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(H,q),H.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},H.prototype.convertFrom=function(l){var y=this.imod(l.mul(this.rinv));return y.red=null,y},H.prototype.imul=function(l,y){if(l.isZero()||y.isZero())return l.words[0]=0,l.length=1,l;var k=l.imul(y),x=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),P=k.isub(x).iushrn(this.shift),U=P;return P.cmp(this.m)>=0?U=P.isub(this.m):P.cmpn(0)<0&&(U=P.iadd(this.m)),U._forceRed(this)},H.prototype.mul=function(l,y){if(l.isZero()||y.isZero())return new i(0)._forceRed(this);var k=l.mul(y),x=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),P=k.isub(x).iushrn(this.shift),U=P;return P.cmp(this.m)>=0?U=P.isub(this.m):P.cmpn(0)<0&&(U=P.iadd(this.m)),U._forceRed(this)},H.prototype.invm=function(l){var y=this.imod(l._invmp(this.m).mul(this.r2));return y._forceRed(this)}})(n,Ch)}(Ui)),Ui.exports}var Uh=es();const go=Xi(Uh);var xi={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Oa;function Oh(){return Oa||(Oa=1,function(n,e){var t=mr(),r=t.Buffer;function s(o,c){for(var f in o)c[f]=o[f]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=t:(s(t,e),e.Buffer=i);function i(o,c,f){return r(o,c,f)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,c,f){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,c,f)},i.alloc=function(o,c,f){if(typeof o!="number")throw new TypeError("Argument must be a number");var m=r(o);return c!==void 0?typeof f=="string"?m.fill(c,f):m.fill(c):m.fill(0),m},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}}(xi,xi.exports)),xi.exports}var zs,La;function Lh(){if(La)return zs;La=1;var n=Oh().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),c=o.charCodeAt(0);if(r[c]!==255)throw new TypeError(o+" is ambiguous");r[c]=i}var f=t.length,m=t.charAt(0),b=Math.log(f)/Math.log(256),A=Math.log(256)/Math.log(f);function v(R){if((Array.isArray(R)||R instanceof Uint8Array)&&(R=n.from(R)),!n.isBuffer(R))throw new TypeError("Expected Buffer");if(R.length===0)return"";for(var C=0,D=0,V=0,W=R.length;V!==W&&R[V]===0;)V++,C++;for(var X=(W-V)*A+1>>>0,Y=new Uint8Array(X);V!==W;){for(var Z=R[V],oe=0,ee=X-1;(Z!==0||oe<D)&&ee!==-1;ee--,oe++)Z+=256*Y[ee]>>>0,Y[ee]=Z%f>>>0,Z=Z/f>>>0;if(Z!==0)throw new Error("Non-zero carry");D=oe,V++}for(var F=X-D;F!==X&&Y[F]===0;)F++;for(var K=m.repeat(C);F<X;++F)K+=t.charAt(Y[F]);return K}function w(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return n.alloc(0);for(var C=0,D=0,V=0;R[C]===m;)D++,C++;for(var W=(R.length-C)*b+1>>>0,X=new Uint8Array(W);C<R.length;){var Y=R.charCodeAt(C);if(Y>255)return;var Z=r[Y];if(Z===255)return;for(var oe=0,ee=W-1;(Z!==0||oe<V)&&ee!==-1;ee--,oe++)Z+=f*X[ee]>>>0,X[ee]=Z%256>>>0,Z=Z/256>>>0;if(Z!==0)throw new Error("Non-zero carry");V=oe,C++}for(var F=W-V;F!==W&&X[F]===0;)F++;var K=n.allocUnsafe(D+(W-F));K.fill(0,0,D);for(var q=D;F!==W;)K[q++]=X[F++];return K}function B(R){var C=w(R);if(C)return C;throw new Error("Non-base"+f+" character")}return{encode:v,decodeUnsafe:w,decode:B}}return zs=e,zs}var qs,Na;function mi(){if(Na)return qs;Na=1;var n=Lh(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return qs=n(e),qs}var Nh=mi();const _t=Xi(Nh),Fa=Au;var Te={};function dr(n,e,t){return e<=n&&n<=t}function ts(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function Fh(n){for(var e=String(n),t=e.length,r=0,s=[];r<t;){var i=e.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===t-1)s.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var c=i&1023,f=o&1023;s.push(65536+(c<<10)+f),r+=1}else s.push(65533)}r+=1}return s}function Dh(n){for(var e="",t=0;t<n.length;++t){var r=n[t];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var Wi=-1;function Lo(n){this.tokens=[].slice.call(n)}Lo.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Wi},prepend:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.push(e.shift());else this.tokens.push(n)}};var Nn=-1;function Vs(n,e){if(n)throw TypeError("Decoder error");return e||65533}var zi="utf-8";function qi(n,e){if(!(this instanceof qi))return new qi(n,e);if(n=n!==void 0?String(n).toLowerCase():zi,n!==zi)throw new Error("Encoding not supported. Only utf-8 is supported");e=ts(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}qi.prototype={decode:function(e,t){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),t=ts(t),this._streaming||(this._decoder=new Kh({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var s=new Lo(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Nn);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Nn)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Dh(i)}};function Vi(n,e){if(!(this instanceof Vi))return new Vi(n,e);if(n=n!==void 0?String(n).toLowerCase():zi,n!==zi)throw new Error("Encoding not supported. Only utf-8 is supported");e=ts(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Vi.prototype={encode:function(e,t){e=e?String(e):"",t=ts(t),this._streaming||(this._encoder=new Wh(this._options)),this._streaming=!!t.stream;for(var r=[],s=new Lo(Fh(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Nn);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Nn;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function Kh(n){var e=n.fatal,t=0,r=0,s=0,i=128,o=191;this.handler=function(c,f){if(f===Wi&&s!==0)return s=0,Vs(e);if(f===Wi)return Nn;if(s===0){if(dr(f,0,127))return f;if(dr(f,194,223))s=1,t=f-192;else if(dr(f,224,239))f===224&&(i=160),f===237&&(o=159),s=2,t=f-224;else if(dr(f,240,244))f===240&&(i=144),f===244&&(o=143),s=3,t=f-240;else return Vs(e);return t=t<<6*s,null}if(!dr(f,i,o))return t=s=r=0,i=128,o=191,c.prepend(f),Vs(e);if(i=128,o=191,r+=1,t+=f-128<<6*(s-r),r!==s)return null;var m=t;return t=s=r=0,m}}function Wh(n){n.fatal,this.handler=function(e,t){if(t===Wi)return Nn;if(dr(t,0,127))return t;var r,s;dr(t,128,2047)?(r=1,s=192):dr(t,2048,65535)?(r=2,s=224):dr(t,65536,1114111)&&(r=3,s=240);for(var i=[(t>>6*r)+s];r>0;){var o=t>>6*(r-1);i.push(128|o&63),r-=1}return i}}const zh=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:qi,TextEncoder:Vi},Symbol.toStringTag,{value:"Module"})),qh=di(zh);var Da;function qu(){if(Da)return Te;Da=1;var n=Te&&Te.__createBinding||(Object.create?function(F,K,q,H){H===void 0&&(H=q),Object.defineProperty(F,H,{enumerable:!0,get:function(){return K[q]}})}:function(F,K,q,H){H===void 0&&(H=q),F[H]=K[q]}),e=Te&&Te.__setModuleDefault||(Object.create?function(F,K){Object.defineProperty(F,"default",{enumerable:!0,value:K})}:function(F,K){F.default=K}),t=Te&&Te.__decorate||function(F,K,q,H){var E=arguments.length,l=E<3?K:H===null?H=Object.getOwnPropertyDescriptor(K,q):H,y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(F,K,q,H);else for(var k=F.length-1;k>=0;k--)(y=F[k])&&(l=(E<3?y(l):E>3?y(K,q,l):y(K,q))||l);return E>3&&l&&Object.defineProperty(K,q,l),l},r=Te&&Te.__importStar||function(F){if(F&&F.__esModule)return F;var K={};if(F!=null)for(var q in F)q!=="default"&&Object.hasOwnProperty.call(F,q)&&n(K,F,q);return e(K,F),K},s=Te&&Te.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(Te,"__esModule",{value:!0}),Te.deserializeUnchecked=Te.deserialize=Te.serialize=Te.BinaryReader=Te.BinaryWriter=Te.BorshError=Te.baseDecode=Te.baseEncode=void 0;const i=s(es()),o=s(mi()),c=r(qh),f=typeof TextDecoder!="function"?c.TextDecoder:TextDecoder,m=new f("utf-8",{fatal:!0});function b(F){return typeof F=="string"&&(F=Buffer.from(F,"utf8")),o.default.encode(Buffer.from(F))}Te.baseEncode=b;function A(F){return Buffer.from(o.default.decode(F))}Te.baseDecode=A;const v=1024;class w extends Error{constructor(K){super(K),this.fieldPath=[],this.originalMessage=K}addToFieldPath(K){this.fieldPath.splice(0,0,K),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Te.BorshError=w;class B{constructor(){this.buf=Buffer.alloc(v),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(v)]))}writeU8(K){this.maybeResize(),this.buf.writeUInt8(K,this.length),this.length+=1}writeU16(K){this.maybeResize(),this.buf.writeUInt16LE(K,this.length),this.length+=2}writeU32(K){this.maybeResize(),this.buf.writeUInt32LE(K,this.length),this.length+=4}writeU64(K){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(K).toArray("le",8)))}writeU128(K){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(K).toArray("le",16)))}writeU256(K){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(K).toArray("le",32)))}writeU512(K){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(K).toArray("le",64)))}writeBuffer(K){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),K,Buffer.alloc(v)]),this.length+=K.length}writeString(K){this.maybeResize();const q=Buffer.from(K,"utf8");this.writeU32(q.length),this.writeBuffer(q)}writeFixedArray(K){this.writeBuffer(Buffer.from(K))}writeArray(K,q){this.maybeResize(),this.writeU32(K.length);for(const H of K)this.maybeResize(),q(H)}toArray(){return this.buf.subarray(0,this.length)}}Te.BinaryWriter=B;function R(F,K,q){const H=q.value;q.value=function(...E){try{return H.apply(this,E)}catch(l){if(l instanceof RangeError){const y=l.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(y)>=0)throw new w("Reached the end of buffer when deserializing")}throw l}}}class C{constructor(K){this.buf=K,this.offset=0}readU8(){const K=this.buf.readUInt8(this.offset);return this.offset+=1,K}readU16(){const K=this.buf.readUInt16LE(this.offset);return this.offset+=2,K}readU32(){const K=this.buf.readUInt32LE(this.offset);return this.offset+=4,K}readU64(){const K=this.readBuffer(8);return new i.default(K,"le")}readU128(){const K=this.readBuffer(16);return new i.default(K,"le")}readU256(){const K=this.readBuffer(32);return new i.default(K,"le")}readU512(){const K=this.readBuffer(64);return new i.default(K,"le")}readBuffer(K){if(this.offset+K>this.buf.length)throw new w(`Expected buffer length ${K} isn't within bounds`);const q=this.buf.slice(this.offset,this.offset+K);return this.offset+=K,q}readString(){const K=this.readU32(),q=this.readBuffer(K);try{return m.decode(q)}catch(H){throw new w(`Error decoding UTF-8 string: ${H}`)}}readFixedArray(K){return new Uint8Array(this.readBuffer(K))}readArray(K){const q=this.readU32(),H=Array();for(let E=0;E<q;++E)H.push(K());return H}}t([R],C.prototype,"readU8",null),t([R],C.prototype,"readU16",null),t([R],C.prototype,"readU32",null),t([R],C.prototype,"readU64",null),t([R],C.prototype,"readU128",null),t([R],C.prototype,"readU256",null),t([R],C.prototype,"readU512",null),t([R],C.prototype,"readString",null),t([R],C.prototype,"readFixedArray",null),t([R],C.prototype,"readArray",null),Te.BinaryReader=C;function D(F){return F.charAt(0).toUpperCase()+F.slice(1)}function V(F,K,q,H,E){try{if(typeof H=="string")E[`write${D(H)}`](q);else if(H instanceof Array)if(typeof H[0]=="number"){if(q.length!==H[0])throw new w(`Expecting byte array of length ${H[0]}, but got ${q.length} bytes`);E.writeFixedArray(q)}else if(H.length===2&&typeof H[1]=="number"){if(q.length!==H[1])throw new w(`Expecting byte array of length ${H[1]}, but got ${q.length} bytes`);for(let l=0;l<H[1];l++)V(F,null,q[l],H[0],E)}else E.writeArray(q,l=>{V(F,K,l,H[0],E)});else if(H.kind!==void 0)switch(H.kind){case"option":{q==null?E.writeU8(0):(E.writeU8(1),V(F,K,q,H.type,E));break}case"map":{E.writeU32(q.size),q.forEach((l,y)=>{V(F,K,y,H.key,E),V(F,K,l,H.value,E)});break}default:throw new w(`FieldType ${H} unrecognized`)}else W(F,q,E)}catch(l){throw l instanceof w&&l.addToFieldPath(K),l}}function W(F,K,q){if(typeof K.borshSerialize=="function"){K.borshSerialize(q);return}const H=F.get(K.constructor);if(!H)throw new w(`Class ${K.constructor.name} is missing in schema`);if(H.kind==="struct")H.fields.map(([E,l])=>{V(F,E,K[E],l,q)});else if(H.kind==="enum"){const E=K[H.field];for(let l=0;l<H.values.length;++l){const[y,k]=H.values[l];if(y===E){q.writeU8(l),V(F,y,K[y],k,q);break}}}else throw new w(`Unexpected schema kind: ${H.kind} for ${K.constructor.name}`)}function X(F,K,q=B){const H=new q;return W(F,K,H),H.toArray()}Te.serialize=X;function Y(F,K,q,H){try{if(typeof q=="string")return H[`read${D(q)}`]();if(q instanceof Array){if(typeof q[0]=="number")return H.readFixedArray(q[0]);if(typeof q[1]=="number"){const E=[];for(let l=0;l<q[1];l++)E.push(Y(F,null,q[0],H));return E}else return H.readArray(()=>Y(F,K,q[0],H))}if(q.kind==="option")return H.readU8()?Y(F,K,q.type,H):void 0;if(q.kind==="map"){let E=new Map;const l=H.readU32();for(let y=0;y<l;y++){const k=Y(F,K,q.key,H),x=Y(F,K,q.value,H);E.set(k,x)}return E}return Z(F,q,H)}catch(E){throw E instanceof w&&E.addToFieldPath(K),E}}function Z(F,K,q){if(typeof K.borshDeserialize=="function")return K.borshDeserialize(q);const H=F.get(K);if(!H)throw new w(`Class ${K.name} is missing in schema`);if(H.kind==="struct"){const E={};for(const[l,y]of F.get(K).fields)E[l]=Y(F,l,y,q);return new K(E)}if(H.kind==="enum"){const E=q.readU8();if(E>=H.values.length)throw new w(`Enum index: ${E} is out of range`);const[l,y]=H.values[E],k=Y(F,l,y,q);return new K({[l]:k})}throw new w(`Unexpected schema kind: ${H.kind} for ${K.constructor.name}`)}function oe(F,K,q,H=C){const E=new H(q),l=Z(F,K,E);if(E.offset<q.length)throw new w(`Unexpected ${q.length-E.offset} bytes after deserialized data`);return l}Te.deserialize=oe;function ee(F,K,q,H=C){const E=new H(q);return Z(F,K,E)}return Te.deserializeUnchecked=ee,Te}var $s=qu(),j={},Ka;function Vh(){if(Ka)return j;Ka=1,Object.defineProperty(j,"__esModule",{value:!0}),j.s16=j.s8=j.nu64be=j.u48be=j.u40be=j.u32be=j.u24be=j.u16be=j.nu64=j.u48=j.u40=j.u32=j.u24=j.u16=j.u8=j.offset=j.greedy=j.Constant=j.UTF8=j.CString=j.Blob=j.Boolean=j.BitField=j.BitStructure=j.VariantLayout=j.Union=j.UnionLayoutDiscriminator=j.UnionDiscriminator=j.Structure=j.Sequence=j.DoubleBE=j.Double=j.FloatBE=j.Float=j.NearInt64BE=j.NearInt64=j.NearUInt64BE=j.NearUInt64=j.IntBE=j.Int=j.UIntBE=j.UInt=j.OffsetLayout=j.GreedyCount=j.ExternalLayout=j.bindConstructorLayout=j.nameWithProperty=j.Layout=j.uint8ArrayToBuffer=j.checkUint8Array=void 0,j.constant=j.utf8=j.cstr=j.blob=j.unionLayoutDiscriminator=j.union=j.seq=j.bits=j.struct=j.f64be=j.f64=j.f32be=j.f32=j.ns64be=j.s48be=j.s40be=j.s32be=j.s24be=j.s16be=j.ns64=j.s48=j.s40=j.s32=j.s24=void 0;const n=mr();function e(d){if(!(d instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}j.checkUint8Array=e;function t(d){return e(d),n.Buffer.from(d.buffer,d.byteOffset,d.length)}j.uint8ArrayToBuffer=t;class r{constructor(p,_){if(!Number.isInteger(p))throw new TypeError("span must be an integer");this.span=p,this.property=_}makeDestinationObject(){return{}}getSpan(p,_){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(p){const _=Object.create(this.constructor.prototype);return Object.assign(_,this),_.property=p,_}fromArray(p){}}j.Layout=r;function s(d,p){return p.property?d+"["+p.property+"]":d}j.nameWithProperty=s;function i(d,p){if(typeof d!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(d,"layout_"))throw new Error("Class is already bound to a layout");if(!(p&&p instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(p,"boundConstructor_"))throw new Error("layout is already bound to a constructor");d.layout_=p,p.boundConstructor_=d,p.makeDestinationObject=()=>new d,Object.defineProperty(d.prototype,"encode",{value(_,T){return p.encode(this,_,T)},writable:!0}),Object.defineProperty(d,"decode",{value(_,T){return p.decode(_,T)},writable:!0})}j.bindConstructorLayout=i;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}j.ExternalLayout=o;class c extends o{constructor(p=1,_){if(!Number.isInteger(p)||0>=p)throw new TypeError("elementSpan must be a (positive) integer");super(-1,_),this.elementSpan=p}isCount(){return!0}decode(p,_=0){e(p);const T=p.length-_;return Math.floor(T/this.elementSpan)}encode(p,_,T){return 0}}j.GreedyCount=c;class f extends o{constructor(p,_=0,T){if(!(p instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(_))throw new TypeError("offset must be integer or undefined");super(p.span,T||p.property),this.layout=p,this.offset=_}isCount(){return this.layout instanceof m||this.layout instanceof b}decode(p,_=0){return this.layout.decode(p,_+this.offset)}encode(p,_,T=0){return this.layout.encode(p,_,T+this.offset)}}j.OffsetLayout=f;class m extends r{constructor(p,_){if(super(p,_),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(p,_=0){return t(p).readUIntLE(_,this.span)}encode(p,_,T=0){return t(_).writeUIntLE(p,T,this.span),this.span}}j.UInt=m;class b extends r{constructor(p,_){if(super(p,_),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(p,_=0){return t(p).readUIntBE(_,this.span)}encode(p,_,T=0){return t(_).writeUIntBE(p,T,this.span),this.span}}j.UIntBE=b;class A extends r{constructor(p,_){if(super(p,_),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(p,_=0){return t(p).readIntLE(_,this.span)}encode(p,_,T=0){return t(_).writeIntLE(p,T,this.span),this.span}}j.Int=A;class v extends r{constructor(p,_){if(super(p,_),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(p,_=0){return t(p).readIntBE(_,this.span)}encode(p,_,T=0){return t(_).writeIntBE(p,T,this.span),this.span}}j.IntBE=v;const w=Math.pow(2,32);function B(d){const p=Math.floor(d/w),_=d-p*w;return{hi32:p,lo32:_}}function R(d,p){return d*w+p}class C extends r{constructor(p){super(8,p)}decode(p,_=0){const T=t(p),z=T.readUInt32LE(_),G=T.readUInt32LE(_+4);return R(G,z)}encode(p,_,T=0){const z=B(p),G=t(_);return G.writeUInt32LE(z.lo32,T),G.writeUInt32LE(z.hi32,T+4),8}}j.NearUInt64=C;class D extends r{constructor(p){super(8,p)}decode(p,_=0){const T=t(p),z=T.readUInt32BE(_),G=T.readUInt32BE(_+4);return R(z,G)}encode(p,_,T=0){const z=B(p),G=t(_);return G.writeUInt32BE(z.hi32,T),G.writeUInt32BE(z.lo32,T+4),8}}j.NearUInt64BE=D;class V extends r{constructor(p){super(8,p)}decode(p,_=0){const T=t(p),z=T.readUInt32LE(_),G=T.readInt32LE(_+4);return R(G,z)}encode(p,_,T=0){const z=B(p),G=t(_);return G.writeUInt32LE(z.lo32,T),G.writeInt32LE(z.hi32,T+4),8}}j.NearInt64=V;class W extends r{constructor(p){super(8,p)}decode(p,_=0){const T=t(p),z=T.readInt32BE(_),G=T.readUInt32BE(_+4);return R(z,G)}encode(p,_,T=0){const z=B(p),G=t(_);return G.writeInt32BE(z.hi32,T),G.writeUInt32BE(z.lo32,T+4),8}}j.NearInt64BE=W;class X extends r{constructor(p){super(4,p)}decode(p,_=0){return t(p).readFloatLE(_)}encode(p,_,T=0){return t(_).writeFloatLE(p,T),4}}j.Float=X;class Y extends r{constructor(p){super(4,p)}decode(p,_=0){return t(p).readFloatBE(_)}encode(p,_,T=0){return t(_).writeFloatBE(p,T),4}}j.FloatBE=Y;class Z extends r{constructor(p){super(8,p)}decode(p,_=0){return t(p).readDoubleLE(_)}encode(p,_,T=0){return t(_).writeDoubleLE(p,T),8}}j.Double=Z;class oe extends r{constructor(p){super(8,p)}decode(p,_=0){return t(p).readDoubleBE(_)}encode(p,_,T=0){return t(_).writeDoubleBE(p,T),8}}j.DoubleBE=oe;class ee extends r{constructor(p,_,T){if(!(p instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(_ instanceof o&&_.isCount()||Number.isInteger(_)&&0<=_))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let z=-1;!(_ instanceof o)&&0<p.span&&(z=_*p.span),super(z,T),this.elementLayout=p,this.count=_}getSpan(p,_=0){if(0<=this.span)return this.span;let T=0,z=this.count;if(z instanceof o&&(z=z.decode(p,_)),0<this.elementLayout.span)T=z*this.elementLayout.span;else{let G=0;for(;G<z;)T+=this.elementLayout.getSpan(p,_+T),++G}return T}decode(p,_=0){const T=[];let z=0,G=this.count;for(G instanceof o&&(G=G.decode(p,_));z<G;)T.push(this.elementLayout.decode(p,_)),_+=this.elementLayout.getSpan(p,_),z+=1;return T}encode(p,_,T=0){const z=this.elementLayout,G=p.reduce((te,ae)=>te+z.encode(ae,_,T+te),0);return this.count instanceof o&&this.count.encode(p.length,_,T),G}}j.Sequence=ee;class F extends r{constructor(p,_,T){if(!(Array.isArray(p)&&p.reduce((G,te)=>G&&te instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof _=="boolean"&&T===void 0&&(T=_,_=void 0);for(const G of p)if(0>G.span&&G.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let z=-1;try{z=p.reduce((G,te)=>G+te.getSpan(),0)}catch{}super(z,_),this.fields=p,this.decodePrefixes=!!T}getSpan(p,_=0){if(0<=this.span)return this.span;let T=0;try{T=this.fields.reduce((z,G)=>{const te=G.getSpan(p,_);return _+=te,z+te},0)}catch{throw new RangeError("indeterminate span")}return T}decode(p,_=0){e(p);const T=this.makeDestinationObject();for(const z of this.fields)if(z.property!==void 0&&(T[z.property]=z.decode(p,_)),_+=z.getSpan(p,_),this.decodePrefixes&&p.length===_)break;return T}encode(p,_,T=0){const z=T;let G=0,te=0;for(const ae of this.fields){let Ee=ae.span;if(te=0<Ee?Ee:0,ae.property!==void 0){const Se=p[ae.property];Se!==void 0&&(te=ae.encode(Se,_,T),0>Ee&&(Ee=ae.getSpan(_,T)))}G=T,T+=Ee}return G+te-z}fromArray(p){const _=this.makeDestinationObject();for(const T of this.fields)T.property!==void 0&&0<p.length&&(_[T.property]=p.shift());return _}layoutFor(p){if(typeof p!="string")throw new TypeError("property must be string");for(const _ of this.fields)if(_.property===p)return _}offsetOf(p){if(typeof p!="string")throw new TypeError("property must be string");let _=0;for(const T of this.fields){if(T.property===p)return _;0>T.span?_=-1:0<=_&&(_+=T.span)}}}j.Structure=F;class K{constructor(p){this.property=p}decode(p,_){throw new Error("UnionDiscriminator is abstract")}encode(p,_,T){throw new Error("UnionDiscriminator is abstract")}}j.UnionDiscriminator=K;class q extends K{constructor(p,_){if(!(p instanceof o&&p.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(_||p.property||"variant"),this.layout=p}decode(p,_){return this.layout.decode(p,_)}encode(p,_,T){return this.layout.encode(p,_,T)}}j.UnionLayoutDiscriminator=q;class H extends r{constructor(p,_,T){let z;if(p instanceof m||p instanceof b)z=new q(new f(p));else if(p instanceof o&&p.isCount())z=new q(p);else if(p instanceof K)z=p;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(_===void 0&&(_=null),!(_===null||_ instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(_!==null){if(0>_.span)throw new Error("defaultLayout must have constant span");_.property===void 0&&(_=_.replicate("content"))}let G=-1;_&&(G=_.span,0<=G&&(p instanceof m||p instanceof b)&&(G+=z.layout.span)),super(G,T),this.discriminator=z,this.usesPrefixDiscriminator=p instanceof m||p instanceof b,this.defaultLayout=_,this.registry={};let te=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ae){return te(ae)},this.configGetSourceVariant=function(ae){te=ae.bind(this)}}getSpan(p,_=0){if(0<=this.span)return this.span;const T=this.getVariant(p,_);if(!T)throw new Error("unable to determine span for unrecognized variant");return T.getSpan(p,_)}defaultGetSourceVariant(p){if(Object.prototype.hasOwnProperty.call(p,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(p,this.defaultLayout.property))return;const _=this.registry[p[this.discriminator.property]];if(_&&(!_.layout||_.property&&Object.prototype.hasOwnProperty.call(p,_.property)))return _}else for(const _ in this.registry){const T=this.registry[_];if(T.property&&Object.prototype.hasOwnProperty.call(p,T.property))return T}throw new Error("unable to infer src variant")}decode(p,_=0){let T;const z=this.discriminator,G=z.decode(p,_),te=this.registry[G];if(te===void 0){const ae=this.defaultLayout;let Ee=0;this.usesPrefixDiscriminator&&(Ee=z.layout.span),T=this.makeDestinationObject(),T[z.property]=G,T[ae.property]=ae.decode(p,_+Ee)}else T=te.decode(p,_);return T}encode(p,_,T=0){const z=this.getSourceVariant(p);if(z===void 0){const G=this.discriminator,te=this.defaultLayout;let ae=0;return this.usesPrefixDiscriminator&&(ae=G.layout.span),G.encode(p[G.property],_,T),ae+te.encode(p[te.property],_,T+ae)}return z.encode(p,_,T)}addVariant(p,_,T){const z=new E(this,p,_,T);return this.registry[p]=z,z}getVariant(p,_=0){let T;return p instanceof Uint8Array?T=this.discriminator.decode(p,_):T=p,this.registry[T]}}j.Union=H;class E extends r{constructor(p,_,T,z){if(!(p instanceof H))throw new TypeError("union must be a Union");if(!Number.isInteger(_)||0>_)throw new TypeError("variant must be a (non-negative) integer");if(typeof T=="string"&&z===void 0&&(z=T,T=null),T){if(!(T instanceof r))throw new TypeError("layout must be a Layout");if(p.defaultLayout!==null&&0<=T.span&&T.span>p.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof z!="string")throw new TypeError("variant must have a String property")}let G=p.span;0>p.span&&(G=T?T.span:0,0<=G&&p.usesPrefixDiscriminator&&(G+=p.discriminator.layout.span)),super(G,z),this.union=p,this.variant=_,this.layout=T||null}getSpan(p,_=0){if(0<=this.span)return this.span;let T=0;this.union.usesPrefixDiscriminator&&(T=this.union.discriminator.layout.span);let z=0;return this.layout&&(z=this.layout.getSpan(p,_+T)),T+z}decode(p,_=0){const T=this.makeDestinationObject();if(this!==this.union.getVariant(p,_))throw new Error("variant mismatch");let z=0;return this.union.usesPrefixDiscriminator&&(z=this.union.discriminator.layout.span),this.layout?T[this.property]=this.layout.decode(p,_+z):this.property?T[this.property]=!0:this.union.usesPrefixDiscriminator&&(T[this.union.discriminator.property]=this.variant),T}encode(p,_,T=0){let z=0;if(this.union.usesPrefixDiscriminator&&(z=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(p,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,_,T);let G=z;if(this.layout&&(this.layout.encode(p[this.property],_,T+z),G+=this.layout.getSpan(_,T+z),0<=this.union.span&&G>this.union.span))throw new Error("encoded variant overruns containing union");return G}fromArray(p){if(this.layout)return this.layout.fromArray(p)}}j.VariantLayout=E;function l(d){return 0>d&&(d+=4294967296),d}class y extends r{constructor(p,_,T){if(!(p instanceof m||p instanceof b))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof _=="string"&&T===void 0&&(T=_,_=!1),4<p.span)throw new RangeError("word cannot exceed 32 bits");super(p.span,T),this.word=p,this.msb=!!_,this.fields=[];let z=0;this._packedSetValue=function(G){return z=l(G),this},this._packedGetValue=function(){return z}}decode(p,_=0){const T=this.makeDestinationObject(),z=this.word.decode(p,_);this._packedSetValue(z);for(const G of this.fields)G.property!==void 0&&(T[G.property]=G.decode(p));return T}encode(p,_,T=0){const z=this.word.decode(_,T);this._packedSetValue(z);for(const G of this.fields)if(G.property!==void 0){const te=p[G.property];te!==void 0&&G.encode(te)}return this.word.encode(this._packedGetValue(),_,T)}addField(p,_){const T=new k(this,p,_);return this.fields.push(T),T}addBoolean(p){const _=new x(this,p);return this.fields.push(_),_}fieldFor(p){if(typeof p!="string")throw new TypeError("property must be string");for(const _ of this.fields)if(_.property===p)return _}}j.BitStructure=y;class k{constructor(p,_,T){if(!(p instanceof y))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(_)||0>=_)throw new TypeError("bits must be positive integer");const z=8*p.span,G=p.fields.reduce((te,ae)=>te+ae.bits,0);if(_+G>z)throw new Error("bits too long for span remainder ("+(z-G)+" of "+z+" remain)");this.container=p,this.bits=_,this.valueMask=(1<<_)-1,_===32&&(this.valueMask=4294967295),this.start=G,this.container.msb&&(this.start=z-G-_),this.wordMask=l(this.valueMask<<this.start),this.property=T}decode(p,_){const T=this.container._packedGetValue();return l(T&this.wordMask)>>>this.start}encode(p){if(typeof p!="number"||!Number.isInteger(p)||p!==l(p&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const _=this.container._packedGetValue(),T=l(p<<this.start);this.container._packedSetValue(l(_&~this.wordMask)|T)}}j.BitField=k;class x extends k{constructor(p,_){super(p,1,_)}decode(p,_){return!!super.decode(p,_)}encode(p){typeof p=="boolean"&&(p=+p),super.encode(p)}}j.Boolean=x;class P extends r{constructor(p,_){if(!(p instanceof o&&p.isCount()||Number.isInteger(p)&&0<=p))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let T=-1;p instanceof o||(T=p),super(T,_),this.length=p}getSpan(p,_){let T=this.span;return 0>T&&(T=this.length.decode(p,_)),T}decode(p,_=0){let T=this.span;return 0>T&&(T=this.length.decode(p,_)),t(p).slice(_,_+T)}encode(p,_,T){let z=this.length;if(this.length instanceof o&&(z=p.length),!(p instanceof Uint8Array&&z===p.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+z+") Uint8Array as src");if(T+z>_.length)throw new RangeError("encoding overruns Uint8Array");const G=t(p);return t(_).write(G.toString("hex"),T,z,"hex"),this.length instanceof o&&this.length.encode(z,_,T),z}}j.Blob=P;class U extends r{constructor(p){super(-1,p)}getSpan(p,_=0){e(p);let T=_;for(;T<p.length&&p[T]!==0;)T+=1;return 1+T-_}decode(p,_=0){const T=this.getSpan(p,_);return t(p).slice(_,_+T-1).toString("utf-8")}encode(p,_,T=0){typeof p!="string"&&(p=String(p));const z=n.Buffer.from(p,"utf8"),G=z.length;if(T+G>_.length)throw new RangeError("encoding overruns Buffer");const te=t(_);return z.copy(te,T),te[T+G]=0,G+1}}j.CString=U;class N extends r{constructor(p,_){if(typeof p=="string"&&_===void 0&&(_=p,p=void 0),p===void 0)p=-1;else if(!Number.isInteger(p))throw new TypeError("maxSpan must be an integer");super(-1,_),this.maxSpan=p}getSpan(p,_=0){return e(p),p.length-_}decode(p,_=0){const T=this.getSpan(p,_);if(0<=this.maxSpan&&this.maxSpan<T)throw new RangeError("text length exceeds maxSpan");return t(p).slice(_,_+T).toString("utf-8")}encode(p,_,T=0){typeof p!="string"&&(p=String(p));const z=n.Buffer.from(p,"utf8"),G=z.length;if(0<=this.maxSpan&&this.maxSpan<G)throw new RangeError("text length exceeds maxSpan");if(T+G>_.length)throw new RangeError("encoding overruns Buffer");return z.copy(t(_),T),G}}j.UTF8=N;class I extends r{constructor(p,_){super(0,_),this.value=p}decode(p,_){return this.value}encode(p,_,T){return 0}}return j.Constant=I,j.greedy=(d,p)=>new c(d,p),j.offset=(d,p,_)=>new f(d,p,_),j.u8=d=>new m(1,d),j.u16=d=>new m(2,d),j.u24=d=>new m(3,d),j.u32=d=>new m(4,d),j.u40=d=>new m(5,d),j.u48=d=>new m(6,d),j.nu64=d=>new C(d),j.u16be=d=>new b(2,d),j.u24be=d=>new b(3,d),j.u32be=d=>new b(4,d),j.u40be=d=>new b(5,d),j.u48be=d=>new b(6,d),j.nu64be=d=>new D(d),j.s8=d=>new A(1,d),j.s16=d=>new A(2,d),j.s24=d=>new A(3,d),j.s32=d=>new A(4,d),j.s40=d=>new A(5,d),j.s48=d=>new A(6,d),j.ns64=d=>new V(d),j.s16be=d=>new v(2,d),j.s24be=d=>new v(3,d),j.s32be=d=>new v(4,d),j.s40be=d=>new v(5,d),j.s48be=d=>new v(6,d),j.ns64be=d=>new W(d),j.f32=d=>new X(d),j.f32be=d=>new Y(d),j.f64=d=>new Z(d),j.f64be=d=>new oe(d),j.struct=(d,p,_)=>new F(d,p,_),j.bits=(d,p,_)=>new y(d,p,_),j.seq=(d,p,_)=>new ee(d,p,_),j.union=(d,p,_)=>new H(d,p,_),j.unionLayoutDiscriminator=(d,p)=>new q(d,p),j.blob=(d,p)=>new P(d,p),j.cstr=d=>new U(d),j.utf8=(d,p)=>new N(d,p),j.constant=(d,p)=>new I(d,p),j}var L=Vh(),$h=8078e3,Hh=8078001,jh=8078004,Yh=8078005,Gh=8078006,Zh=8078011;function Vu(n){return Array.isArray(n)?"%5B"+n.map(Vu).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function Xh([n,e]){return`${n}=${Vu(e)}`}function Jh(n){const e=Object.entries(n).map(Xh).join("&");return btoa(e)}function Qh(n,e={}){{let t=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(e).length&&(t+=` '${Jh(e)}'`),`${t}\``}}var Tn=class extends Error{cause=this.cause;context;constructor(...[n,e]){let t,r;if(e){const{cause:i,...o}=e;i&&(r={cause:i}),Object.keys(o).length>0&&(t=o)}const s=Qh(n,t);super(s,r),this.context={__code:n,...t},this.name="SolanaError"}};function ed(n,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(n)}function td(n){return Object.freeze({...n,encode:e=>{const t=new Uint8Array(ed(e,n));return n.write(e,t,0),t}})}function rd(n){return Object.freeze({...n,decode:(e,t=0)=>n.read(e,t)[0]})}function _n(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function nd(n,e){if(_n(n)!==_n(e))throw new Tn(jh);if(_n(n)&&_n(e)&&n.fixedSize!==e.fixedSize)throw new Tn(Yh,{decoderFixedSize:e.fixedSize,encoderFixedSize:n.fixedSize});if(!_n(n)&&!_n(e)&&n.maxSize!==e.maxSize)throw new Tn(Gh,{decoderMaxSize:e.maxSize,encoderMaxSize:n.maxSize});return{...e,...n,decode:e.decode,encode:n.encode,read:e.read,write:n.write}}function id(n,e,t=0){if(e.length-t<=0)throw new Tn($h,{codecDescription:n})}function sd(n,e,t,r=0){const s=t.length-r;if(s<e)throw new Tn(Hh,{bytesLength:s,codecDescription:n,expected:e})}function od(n,e,t,r){if(r<e||r>t)throw new Tn(Zh,{codecDescription:n,max:t,min:e,value:r})}function $u(n){return n?.endian!==1}function ad(n){return td({fixedSize:n.size,write(e,t,r){n.range&&od(n.name,n.range[0],n.range[1],e);const s=new ArrayBuffer(n.size);return n.set(new DataView(s),e,$u(n.config)),t.set(new Uint8Array(s),r),r+n.size}})}function cd(n){return rd({fixedSize:n.size,read(e,t=0){id(n.name,e,t),sd(n.name,n.size,e,t);const r=new DataView(ud(e,t,n.size));return[n.get(r,$u(n.config)),t+n.size]}})}function ud(n,e,t){const r=n.byteOffset+(e??0),s=t??n.byteLength;return n.buffer.slice(r,r+s)}var Hu=(n={})=>ad({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,r)=>e.setBigUint64(0,BigInt(t),r),size:8}),ld=(n={})=>cd({config:n,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),fd=(n={})=>nd(Hu(n),ld(n));class hd extends TypeError{constructor(e,t){let r;const{message:s,explanation:i,...o}=e,{path:c}=e,f=c.length===0?s:`At path: ${c.join(".")} -- ${s}`;super(i??f),i!=null&&(this.cause=f),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function dd(n){return bi(n)&&typeof n[Symbol.iterator]=="function"}function bi(n){return typeof n=="object"&&n!=null}function $i(n){return bi(n)&&!Array.isArray(n)}function jt(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function pd(n){const{done:e,value:t}=n.next();return e?void 0:t}function yd(n,e,t,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=e,{type:o}=t,{refinement:c,message:f=`Expected a value of type \`${o}\`${c?` with refinement \`${c}\``:""}, but received: \`${jt(r)}\``}=n;return{value:r,type:o,refinement:c,key:s[s.length-1],path:s,branch:i,...n,message:f}}function*Wa(n,e,t,r){dd(n)||(n=[n]);for(const s of n){const i=yd(s,e,t,r);i&&(yield i)}}function*No(n,e,t={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:o=!1}=t,c={path:r,branch:s,mask:o};i&&(n=e.coercer(n,c));let f="valid";for(const m of e.validator(n,c))m.explanation=t.message,f="not_valid",yield[m,void 0];for(let[m,b,A]of e.entries(n,c)){const v=No(b,A,{path:m===void 0?r:[...r,m],branch:m===void 0?s:[...s,b],coerce:i,mask:o,message:t.message});for(const w of v)w[0]?(f=w[0].refinement!=null?"not_refined":"not_valid",yield[w[0],void 0]):i&&(b=w[1],m===void 0?n=b:n instanceof Map?n.set(m,b):n instanceof Set?n.add(b):bi(n)&&(b!==void 0||m in n)&&(n[m]=b))}if(f!=="not_valid")for(const m of e.refiner(n,c))m.explanation=t.message,f="not_refined",yield[m,void 0];f==="valid"&&(yield[void 0,n])}let or=class{constructor(e){const{type:t,schema:r,validator:s,refiner:i,coercer:o=f=>f,entries:c=function*(){}}=e;this.type=t,this.schema=r,this.entries=c,this.coercer=o,s?this.validator=(f,m)=>{const b=s(f,m);return Wa(b,m,this,f)}:this.validator=()=>[],i?this.refiner=(f,m)=>{const b=i(f,m);return Wa(b,m,this,f)}:this.refiner=()=>[]}assert(e,t){return ju(e,this,t)}create(e,t){return ne(e,this,t)}is(e){return Yu(e,this)}mask(e,t){return gd(e,this,t)}validate(e,t={}){return wi(e,this,t)}};function ju(n,e,t){const r=wi(n,e,{message:t});if(r[0])throw r[0]}function ne(n,e,t){const r=wi(n,e,{coerce:!0,message:t});if(r[0])throw r[0];return r[1]}function gd(n,e,t){const r=wi(n,e,{coerce:!0,mask:!0,message:t});if(r[0])throw r[0];return r[1]}function Yu(n,e){return!wi(n,e)[0]}function wi(n,e,t={}){const r=No(n,e,t),s=pd(r);return s[0]?[new hd(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function mn(n,e){return new or({type:n,schema:null,validator:e})}function md(){return mn("any",()=>!0)}function ce(n){return new or({type:"array",schema:n,*entries(e){if(n&&Array.isArray(e))for(const[t,r]of e.entries())yield[t,r,n]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${jt(e)}`}})}function sr(){return mn("boolean",n=>typeof n=="boolean")}function Fo(n){return mn("instance",e=>e instanceof n||`Expected a \`${n.name}\` instance, but received: ${jt(e)}`)}function Ye(n){const e=jt(n),t=typeof n;return new or({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${e}\`, but received: ${jt(r)}`}})}function bd(){return mn("never",()=>!1)}function ue(n){return new or({...n,validator:(e,t)=>e===null||n.validator(e,t),refiner:(e,t)=>e===null||n.refiner(e,t)})}function $(){return mn("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${jt(n)}`)}function de(n){return new or({...n,validator:(e,t)=>e===void 0||n.validator(e,t),refiner:(e,t)=>e===void 0||n.refiner(e,t)})}function Gu(n,e){return new or({type:"record",schema:null,*entries(t){if(bi(t))for(const r in t){const s=t[r];yield[r,r,n],yield[r,s,e]}},validator(t){return $i(t)||`Expected an object, but received: ${jt(t)}`},coercer(t){return $i(t)?{...t}:t}})}function re(){return mn("string",n=>typeof n=="string"||`Expected a string, but received: ${jt(n)}`)}function Do(n){const e=bd();return new or({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const r=Math.max(n.length,t.length);for(let s=0;s<r;s++)yield[s,t[s],n[s]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${jt(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function Q(n){const e=Object.keys(n);return new or({type:"type",schema:n,*entries(t){if(bi(t))for(const r of e)yield[r,t[r],n[r]]},validator(t){return $i(t)||`Expected an object, but received: ${jt(t)}`},coercer(t){return $i(t)?{...t}:t}})}function Ut(n){const e=n.map(t=>t.type).join(" | ");return new or({type:"union",schema:null,coercer(t,r){for(const s of n){const[i,o]=s.validate(t,{coerce:!0,mask:r.mask});if(!i)return o}return t},validator(t,r){const s=[];for(const i of n){const[...o]=No(t,i,r),[c]=o;if(c[0])for(const[f]of o)f&&s.push(f);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${jt(t)}`,...s]}})}function zn(){return mn("unknown",()=>!0)}function ki(n,e,t){return new or({...n,coercer:(r,s)=>Yu(r,e)?n.coercer(t(r,s),s):n.coercer(r,s)})}var Ri,wd=new Uint8Array(16);function Zu(){if(!Ri&&(Ri=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ri))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ri(wd)}const kd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function rs(n){return typeof n=="string"&&kd.test(n)}var vt=[];for(var Hs=0;Hs<256;++Hs)vt.push((Hs+256).toString(16).substr(1));function ns(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(vt[n[e+0]]+vt[n[e+1]]+vt[n[e+2]]+vt[n[e+3]]+"-"+vt[n[e+4]]+vt[n[e+5]]+"-"+vt[n[e+6]]+vt[n[e+7]]+"-"+vt[n[e+8]]+vt[n[e+9]]+"-"+vt[n[e+10]]+vt[n[e+11]]+vt[n[e+12]]+vt[n[e+13]]+vt[n[e+14]]+vt[n[e+15]]).toLowerCase();if(!rs(t))throw TypeError("Stringified UUID is invalid");return t}var za,js,Ys=0,Gs=0;function Ed(n,e,t){var r=e&&t||0,s=e||new Array(16);n=n||{};var i=n.node||za,o=n.clockseq!==void 0?n.clockseq:js;if(i==null||o==null){var c=n.random||(n.rng||Zu)();i==null&&(i=za=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),o==null&&(o=js=(c[6]<<8|c[7])&16383)}var f=n.msecs!==void 0?n.msecs:Date.now(),m=n.nsecs!==void 0?n.nsecs:Gs+1,b=f-Ys+(m-Gs)/1e4;if(b<0&&n.clockseq===void 0&&(o=o+1&16383),(b<0||f>Ys)&&n.nsecs===void 0&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ys=f,Gs=m,js=o,f+=122192928e5;var A=((f&268435455)*1e4+m)%4294967296;s[r++]=A>>>24&255,s[r++]=A>>>16&255,s[r++]=A>>>8&255,s[r++]=A&255;var v=f/4294967296*1e4&268435455;s[r++]=v>>>8&255,s[r++]=v&255,s[r++]=v>>>24&15|16,s[r++]=v>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var w=0;w<6;++w)s[r+w]=i[w];return e||ns(s)}function Xu(n){if(!rs(n))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(n.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(n.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(n.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(n.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(n.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function Ad(n){n=unescape(encodeURIComponent(n));for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t));return e}var Sd="6ba7b810-9dad-11d1-80b4-00c04fd430c8",vd="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Ju(n,e,t){function r(s,i,o,c){if(typeof s=="string"&&(s=Ad(s)),typeof i=="string"&&(i=Xu(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var f=new Uint8Array(16+s.length);if(f.set(i),f.set(s,i.length),f=t(f),f[6]=f[6]&15|e,f[8]=f[8]&63|128,o){c=c||0;for(var m=0;m<16;++m)o[c+m]=f[m];return o}return ns(f)}try{r.name=n}catch{}return r.DNS=Sd,r.URL=vd,r}function _d(n){if(typeof n=="string"){var e=unescape(encodeURIComponent(n));n=new Uint8Array(e.length);for(var t=0;t<e.length;++t)n[t]=e.charCodeAt(t)}return Id(Bd(xd(n),n.length*8))}function Id(n){for(var e=[],t=n.length*32,r="0123456789abcdef",s=0;s<t;s+=8){var i=n[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);e.push(o)}return e}function Qu(n){return(n+64>>>9<<4)+14+1}function Bd(n,e){n[e>>5]|=128<<e%32,n[Qu(e)-1]=e;for(var t=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<n.length;o+=16){var c=t,f=r,m=s,b=i;t=xt(t,r,s,i,n[o],7,-680876936),i=xt(i,t,r,s,n[o+1],12,-389564586),s=xt(s,i,t,r,n[o+2],17,606105819),r=xt(r,s,i,t,n[o+3],22,-1044525330),t=xt(t,r,s,i,n[o+4],7,-176418897),i=xt(i,t,r,s,n[o+5],12,1200080426),s=xt(s,i,t,r,n[o+6],17,-1473231341),r=xt(r,s,i,t,n[o+7],22,-45705983),t=xt(t,r,s,i,n[o+8],7,1770035416),i=xt(i,t,r,s,n[o+9],12,-1958414417),s=xt(s,i,t,r,n[o+10],17,-42063),r=xt(r,s,i,t,n[o+11],22,-1990404162),t=xt(t,r,s,i,n[o+12],7,1804603682),i=xt(i,t,r,s,n[o+13],12,-40341101),s=xt(s,i,t,r,n[o+14],17,-1502002290),r=xt(r,s,i,t,n[o+15],22,1236535329),t=Rt(t,r,s,i,n[o+1],5,-165796510),i=Rt(i,t,r,s,n[o+6],9,-1069501632),s=Rt(s,i,t,r,n[o+11],14,643717713),r=Rt(r,s,i,t,n[o],20,-373897302),t=Rt(t,r,s,i,n[o+5],5,-701558691),i=Rt(i,t,r,s,n[o+10],9,38016083),s=Rt(s,i,t,r,n[o+15],14,-660478335),r=Rt(r,s,i,t,n[o+4],20,-405537848),t=Rt(t,r,s,i,n[o+9],5,568446438),i=Rt(i,t,r,s,n[o+14],9,-1019803690),s=Rt(s,i,t,r,n[o+3],14,-187363961),r=Rt(r,s,i,t,n[o+8],20,1163531501),t=Rt(t,r,s,i,n[o+13],5,-1444681467),i=Rt(i,t,r,s,n[o+2],9,-51403784),s=Rt(s,i,t,r,n[o+7],14,1735328473),r=Rt(r,s,i,t,n[o+12],20,-1926607734),t=Mt(t,r,s,i,n[o+5],4,-378558),i=Mt(i,t,r,s,n[o+8],11,-2022574463),s=Mt(s,i,t,r,n[o+11],16,1839030562),r=Mt(r,s,i,t,n[o+14],23,-35309556),t=Mt(t,r,s,i,n[o+1],4,-1530992060),i=Mt(i,t,r,s,n[o+4],11,1272893353),s=Mt(s,i,t,r,n[o+7],16,-155497632),r=Mt(r,s,i,t,n[o+10],23,-1094730640),t=Mt(t,r,s,i,n[o+13],4,681279174),i=Mt(i,t,r,s,n[o],11,-358537222),s=Mt(s,i,t,r,n[o+3],16,-722521979),r=Mt(r,s,i,t,n[o+6],23,76029189),t=Mt(t,r,s,i,n[o+9],4,-640364487),i=Mt(i,t,r,s,n[o+12],11,-421815835),s=Mt(s,i,t,r,n[o+15],16,530742520),r=Mt(r,s,i,t,n[o+2],23,-995338651),t=Pt(t,r,s,i,n[o],6,-198630844),i=Pt(i,t,r,s,n[o+7],10,1126891415),s=Pt(s,i,t,r,n[o+14],15,-1416354905),r=Pt(r,s,i,t,n[o+5],21,-57434055),t=Pt(t,r,s,i,n[o+12],6,1700485571),i=Pt(i,t,r,s,n[o+3],10,-1894986606),s=Pt(s,i,t,r,n[o+10],15,-1051523),r=Pt(r,s,i,t,n[o+1],21,-2054922799),t=Pt(t,r,s,i,n[o+8],6,1873313359),i=Pt(i,t,r,s,n[o+15],10,-30611744),s=Pt(s,i,t,r,n[o+6],15,-1560198380),r=Pt(r,s,i,t,n[o+13],21,1309151649),t=Pt(t,r,s,i,n[o+4],6,-145523070),i=Pt(i,t,r,s,n[o+11],10,-1120210379),s=Pt(s,i,t,r,n[o+2],15,718787259),r=Pt(r,s,i,t,n[o+9],21,-343485551),t=vr(t,c),r=vr(r,f),s=vr(s,m),i=vr(i,b)}return[t,r,s,i]}function xd(n){if(n.length===0)return[];for(var e=n.length*8,t=new Uint32Array(Qu(e)),r=0;r<e;r+=8)t[r>>5]|=(n[r/8]&255)<<r%32;return t}function vr(n,e){var t=(n&65535)+(e&65535),r=(n>>16)+(e>>16)+(t>>16);return r<<16|t&65535}function Rd(n,e){return n<<e|n>>>32-e}function is(n,e,t,r,s,i){return vr(Rd(vr(vr(e,n),vr(r,i)),s),t)}function xt(n,e,t,r,s,i,o){return is(e&t|~e&r,n,e,s,i,o)}function Rt(n,e,t,r,s,i,o){return is(e&r|t&~r,n,e,s,i,o)}function Mt(n,e,t,r,s,i,o){return is(e^t^r,n,e,s,i,o)}function Pt(n,e,t,r,s,i,o){return is(t^(e|~r),n,e,s,i,o)}var Md=Ju("v3",48,_d);function Pd(n,e,t){n=n||{};var r=n.random||(n.rng||Zu)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=r[s];return e}return ns(r)}function Td(n,e,t,r){switch(n){case 0:return e&t^~e&r;case 1:return e^t^r;case 2:return e&t^e&r^t&r;case 3:return e^t^r}}function Zs(n,e){return n<<e|n>>>32-e}function Cd(n){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,o=Math.ceil(i/16),c=new Array(o),f=0;f<o;++f){for(var m=new Uint32Array(16),b=0;b<16;++b)m[b]=n[f*64+b*4]<<24|n[f*64+b*4+1]<<16|n[f*64+b*4+2]<<8|n[f*64+b*4+3];c[f]=m}c[o-1][14]=(n.length-1)*8/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=(n.length-1)*8&4294967295;for(var A=0;A<o;++A){for(var v=new Uint32Array(80),w=0;w<16;++w)v[w]=c[A][w];for(var B=16;B<80;++B)v[B]=Zs(v[B-3]^v[B-8]^v[B-14]^v[B-16],1);for(var R=t[0],C=t[1],D=t[2],V=t[3],W=t[4],X=0;X<80;++X){var Y=Math.floor(X/20),Z=Zs(R,5)+Td(Y,C,D,V)+W+e[Y]+v[X]>>>0;W=V,V=D,D=Zs(C,30)>>>0,C=R,R=Z}t[0]=t[0]+R>>>0,t[1]=t[1]+C>>>0,t[2]=t[2]+D>>>0,t[3]=t[3]+V>>>0,t[4]=t[4]+W>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Ud=Ju("v5",80,Cd);const Od="00000000-0000-0000-0000-000000000000";function Ld(n){if(!rs(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const Nd=Object.freeze(Object.defineProperty({__proto__:null,NIL:Od,parse:Xu,stringify:ns,v1:Ed,v3:Md,v4:Pd,v5:Ud,validate:rs,version:Ld},Symbol.toStringTag,{value:"Module"})),el=di(Nd);var Xs,qa;function Fd(){if(qa)return Xs;qa=1;const n=el.v4;return Xs=function(t,r,s,i){if(typeof t!="string")throw new TypeError(t+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const c={method:t};if(o===2&&(c.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");c.params=r}if(typeof s>"u"){const f=typeof i.generator=="function"?i.generator:function(){return n()};c.id=f(c,i)}else o===2&&s===null?i.notificationIdNull&&(c.id=null):c.id=s;return c},Xs}var Js,Va;function Dd(){if(Va)return Js;Va=1;const n=el.v4,e=Fd(),t=function(r,s){if(!(this instanceof t))return new t(r,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return n()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=r};return Js=t,t.prototype.request=function(r,s,i,o){const c=this;let f=null;const m=Array.isArray(r)&&typeof s=="function";if(this.options.version===1&&m)throw new TypeError("JSON-RPC 1.0 does not support batching");if(m||!m&&r&&typeof r=="object"&&typeof s=="function")o=s,f=r;else{typeof i=="function"&&(o=i,i=void 0);const v=typeof o=="function";try{f=e(r,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(w){if(v)return o(w);throw w}if(!v)return f}let A;try{A=JSON.stringify(f,this.options.replacer)}catch(v){return o(v)}return this.callServer(A,function(v,w){c._parseResponse(v,w,o)}),f},t.prototype._parseResponse=function(r,s,i){if(r){i(r);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(c){return i(c)}if(i.length===3)if(Array.isArray(o)){const c=function(m){return typeof m.error<"u"},f=function(m){return!c(m)};return i(null,o.filter(c),o.filter(f))}else return i(null,o.error,o.result);i(null,o)},Js}var Kd=Dd();const Wd=Xi(Kd);var Qs={exports:{}},$a;function zd(){return $a||($a=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function s(f,m,b){this.fn=f,this.context=m,this.once=b||!1}function i(f,m,b,A,v){if(typeof b!="function")throw new TypeError("The listener must be a function");var w=new s(b,A||f,v),B=t?t+m:m;return f._events[B]?f._events[B].fn?f._events[B]=[f._events[B],w]:f._events[B].push(w):(f._events[B]=w,f._eventsCount++),f}function o(f,m){--f._eventsCount===0?f._events=new r:delete f._events[m]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var m=[],b,A;if(this._eventsCount===0)return m;for(A in b=this._events)e.call(b,A)&&m.push(t?A.slice(1):A);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(b)):m},c.prototype.listeners=function(m){var b=t?t+m:m,A=this._events[b];if(!A)return[];if(A.fn)return[A.fn];for(var v=0,w=A.length,B=new Array(w);v<w;v++)B[v]=A[v].fn;return B},c.prototype.listenerCount=function(m){var b=t?t+m:m,A=this._events[b];return A?A.fn?1:A.length:0},c.prototype.emit=function(m,b,A,v,w,B){var R=t?t+m:m;if(!this._events[R])return!1;var C=this._events[R],D=arguments.length,V,W;if(C.fn){switch(C.once&&this.removeListener(m,C.fn,void 0,!0),D){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,b),!0;case 3:return C.fn.call(C.context,b,A),!0;case 4:return C.fn.call(C.context,b,A,v),!0;case 5:return C.fn.call(C.context,b,A,v,w),!0;case 6:return C.fn.call(C.context,b,A,v,w,B),!0}for(W=1,V=new Array(D-1);W<D;W++)V[W-1]=arguments[W];C.fn.apply(C.context,V)}else{var X=C.length,Y;for(W=0;W<X;W++)switch(C[W].once&&this.removeListener(m,C[W].fn,void 0,!0),D){case 1:C[W].fn.call(C[W].context);break;case 2:C[W].fn.call(C[W].context,b);break;case 3:C[W].fn.call(C[W].context,b,A);break;case 4:C[W].fn.call(C[W].context,b,A,v);break;default:if(!V)for(Y=1,V=new Array(D-1);Y<D;Y++)V[Y-1]=arguments[Y];C[W].fn.apply(C[W].context,V)}}return!0},c.prototype.on=function(m,b,A){return i(this,m,b,A,!1)},c.prototype.once=function(m,b,A){return i(this,m,b,A,!0)},c.prototype.removeListener=function(m,b,A,v){var w=t?t+m:m;if(!this._events[w])return this;if(!b)return o(this,w),this;var B=this._events[w];if(B.fn)B.fn===b&&(!v||B.once)&&(!A||B.context===A)&&o(this,w);else{for(var R=0,C=[],D=B.length;R<D;R++)(B[R].fn!==b||v&&!B[R].once||A&&B[R].context!==A)&&C.push(B[R]);C.length?this._events[w]=C.length===1?C[0]:C:o(this,w)}return this},c.prototype.removeAllListeners=function(m){var b;return m?(b=t?t+m:m,this._events[b]&&o(this,b)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,n.exports=c}(Qs)),Qs.exports}var qd=zd();const tl=Xi(qd);var Vd=class extends tl{socket;constructor(n,e,t){super(),this.socket=new window.WebSocket(n,t),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(n,e,t){const r=t||e;try{this.socket.send(n),r()}catch(s){r(s)}}close(n,e){this.socket.close(n,e)}addEventListener(n,e,t){this.socket.addEventListener(n,e,t)}};function $d(n,e){return new Vd(n,e)}var Hd=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},jd=class extends tl{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(n,e="ws://localhost:8080",{autoconnect:t=!0,reconnect:r=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},c,f){super(),this.webSocketFactory=n,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=t,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),f?this.dataPack=f:this.dataPack=new Hd,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(n,e,t,r){return!r&&typeof t=="object"&&(r=t,t=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(n,e),c={jsonrpc:"2.0",method:n,params:e||void 0,id:o};this.socket.send(this.dataPack.encode(c),r,f=>{if(f)return i(f);this.queue[o]={promise:[s,i]},t&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},t))})})}async login(n){const e=await this.call("rpc.login",n);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(n,e){return new Promise((t,r)=>{if(!this.ready)return r(new Error("socket not ready"));const s={jsonrpc:"2.0",method:n,params:e};this.socket.send(this.dataPack.encode(s),i=>{if(i)return r(i);t()})})}async subscribe(n){typeof n=="string"&&(n=[n]);const e=await this.call("rpc.on",n);if(typeof n=="string"&&e[n]!=="ok")throw new Error("Failed subscribing to an event '"+n+"' with: "+e[n]);return e}async unsubscribe(n){typeof n=="string"&&(n=[n]);const e=await this.call("rpc.off",n);if(typeof n=="string"&&e[n]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(n,e){this.socket.close(n||1e3,e)}setAutoReconnect(n){this.reconnect=n}setReconnectInterval(n){this.reconnect_interval=n}setMaxReconnects(n){this.max_reconnects=n}_connect(n,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(n,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=pe.Buffer.from(t).toString());try{t=this.dataPack.decode(t)}catch{return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);const r=[t.notification];if(t.params.constructor===Object)r.push(t.params);else for(let s=0;s<t.params.length;s++)r.push(t.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:t,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",t,r),0),this.ready=!1,this.socket=void 0,t!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(n,e),this.reconnect_interval)))})}};const Yd=BigInt(0),Hn=BigInt(1),Gd=BigInt(2),Zd=BigInt(7),Xd=BigInt(256),Jd=BigInt(113),rl=[],nl=[],il=[];for(let n=0,e=Hn,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],rl.push(2*(5*r+t)),nl.push((n+1)*(n+2)/2%64);let s=Yd;for(let i=0;i<7;i++)e=(e<<Hn^(e>>Zd)*Jd)%Xd,e&Gd&&(s^=Hn<<(Hn<<BigInt(i))-Hn);il.push(s)}const sl=ku(il,!0),Qd=sl[0],ep=sl[1],Ha=(n,e,t)=>t>32?Kf(n,e,t):Ff(n,e,t),ja=(n,e,t)=>t>32?Wf(n,e,t):Df(n,e,t);function tp(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,f=(o+2)%10,m=t[f],b=t[f+1],A=Ha(m,b,1)^t[c],v=ja(m,b,1)^t[c+1];for(let w=0;w<50;w+=10)n[o+w]^=A,n[o+w+1]^=v}let s=n[2],i=n[3];for(let o=0;o<24;o++){const c=nl[o],f=Ha(s,i,c),m=ja(s,i,c),b=rl[o];s=n[b],i=n[b+1],n[b]=f,n[b+1]=m}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)t[c]=n[o+c];for(let c=0;c<10;c++)n[o+c]^=~t[(c+2)%10]&t[(c+4)%10]}n[0]^=Qd[r],n[1]^=ep[r]}Ir(t)}class Ko extends Ro{constructor(e,t,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=i,si(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=xf(this.state)}clone(){return this._cloneInto()}keccak(){Ea(this.state32),tp(this.state32,this.rounds),Ea(this.state32),this.posOut=0,this.pos=0}update(e){On(this),e=Ji(e),gr(e);const{blockLen:t,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let c=0;c<o;c++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,(t&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){On(this,!1),gr(e),this.finish();const t=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return si(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(mu(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ir(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Ko(t,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const rp=(n,e,t)=>Mo(()=>new Ko(e,n,t)),Ya=rp(1,136,256/8);class ol extends Ro{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,gu(e);const r=Ji(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Ir(i)}update(e){return On(this),this.iHash.update(e),this}digestInto(e){On(this),gr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:c}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const al=(n,e,t)=>new ol(n,e).update(t).digest();al.create=(n,e)=>new ol(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ga=(n,e)=>(n+(n>=0?e:-e)/cl)/e;function np(n,e,t){const[[r,s],[i,o]]=e,c=Ga(o*n,t),f=Ga(-s*n,t);let m=n-c*r-f*i,b=-c*s-f*o;const A=m<yr,v=b<yr;A&&(m=-m),v&&(b=-b);const w=yi(Math.ceil(_u(t)/2))+Cn;if(m<yr||m>=w||b<yr||b>=w)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:A,k1:m,k2neg:v,k2:b}}function mo(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function eo(n,e){const t={};for(let r of Object.keys(e))t[r]=n[r]===void 0?e[r]:n[r];return dn(t.lowS,"lowS"),dn(t.prehash,"prehash"),t.format!==void 0&&mo(t.format),t}class ip extends Error{constructor(e=""){super(e)}}const hr={Err:ip,_tlv:{encode:(n,e)=>{const{Err:t}=hr;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,s=Bi(r);if(s.length/2&128)throw new t("tlv.encode: long form length too big");const i=r>127?Bi(s.length/2|128):"";return Bi(n)+i+s+e},decode(n,e){const{Err:t}=hr;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const f=s&127;if(!f)throw new t("tlv.decode(long): indefinite length not supported");if(f>4)throw new t("tlv.decode(long): byte length is too big");const m=e.subarray(r,r+f);if(m.length!==f)throw new t("tlv.decode: length bytes not complete");if(m[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const b of m)o=o<<8|b;if(r+=f,o<128)throw new t("tlv.decode(long): not minimal encoding")}const c=e.subarray(r,r+o);if(c.length!==o)throw new t("tlv.decode: wrong value length");return{v:c,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=hr;if(n<yr)throw new e("integer: negative integers are not allowed");let t=Bi(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=hr;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Qi(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=hr,s=Xe("signature",n),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:f}=r.decode(2,i),{v:m,l:b}=r.decode(2,f);if(b.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(c),s:t.decode(m)}},hexFromSig(n){const{_tlv:e,_int:t}=hr,r=e.encode(2,t.encode(n.r)),s=e.encode(2,t.encode(n.s)),i=r+s;return e.encode(48,i)}},yr=BigInt(0),Cn=BigInt(1),cl=BigInt(2),Mi=BigInt(3),sp=BigInt(4);function Rn(n,e){const{BYTES:t}=n;let r;if(typeof e=="bigint")r=e;else{let s=Xe("private key",e);try{r=n.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function op(n,e={}){const t=Wu("weierstrass",n,e),{Fp:r,Fn:s}=t;let i=t.CURVE;const{h:o,n:c}=i;gi(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:f}=e;if(f&&(!r.is0(i.a)||typeof f.beta!="bigint"||!Array.isArray(f.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const m=ll(r,s);function b(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function A(H,E,l){const{x:y,y:k}=E.toAffine(),x=r.toBytes(y);if(dn(l,"isCompressed"),l){b();const P=!r.isOdd(k);return Xt(ul(P),x)}else return Xt(Uint8Array.of(4),x,r.toBytes(k))}function v(H){Ht(H,void 0,"Point");const{publicKey:E,publicKeyUncompressed:l}=m,y=H.length,k=H[0],x=H.subarray(1);if(y===E&&(k===2||k===3)){const P=r.fromBytes(x);if(!r.isValid(P))throw new Error("bad point: is not on curve, wrong x");const U=R(P);let N;try{N=r.sqrt(U)}catch(p){const _=p instanceof Error?": "+p.message:"";throw new Error("bad point: is not on curve, sqrt error"+_)}b();const I=r.isOdd(N);return(k&1)===1!==I&&(N=r.neg(N)),{x:P,y:N}}else if(y===l&&k===4){const P=r.BYTES,U=r.fromBytes(x.subarray(0,P)),N=r.fromBytes(x.subarray(P,P*2));if(!C(U,N))throw new Error("bad point: is not on curve");return{x:U,y:N}}else throw new Error(`bad point: got length ${y}, expected compressed=${E} or uncompressed=${l}`)}const w=e.toBytes||A,B=e.fromBytes||v;function R(H){const E=r.sqr(H),l=r.mul(E,H);return r.add(r.add(l,r.mul(H,i.a)),i.b)}function C(H,E){const l=r.sqr(E),y=R(H);return r.eql(l,y)}if(!C(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const D=r.mul(r.pow(i.a,Mi),sp),V=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(D,V)))throw new Error("bad curve params: a or b");function W(H,E,l=!1){if(!r.isValid(E)||l&&r.is0(E))throw new Error(`bad point coordinate ${H}`);return E}function X(H){if(!(H instanceof F))throw new Error("ProjectivePoint expected")}function Y(H){if(!f||!f.basises)throw new Error("no endo");return np(H,f.basises,s.ORDER)}const Z=Di((H,E)=>{const{X:l,Y:y,Z:k}=H;if(r.eql(k,r.ONE))return{x:l,y};const x=H.is0();E==null&&(E=x?r.ONE:r.inv(k));const P=r.mul(l,E),U=r.mul(y,E),N=r.mul(k,E);if(x)return{x:r.ZERO,y:r.ZERO};if(!r.eql(N,r.ONE))throw new Error("invZ was invalid");return{x:P,y:U}}),oe=Di(H=>{if(H.is0()){if(e.allowInfinityPoint&&!r.is0(H.Y))return;throw new Error("bad point: ZERO")}const{x:E,y:l}=H.toAffine();if(!r.isValid(E)||!r.isValid(l))throw new Error("bad point: x or y not field elements");if(!C(E,l))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function ee(H,E,l,y,k){return l=new F(r.mul(l.X,H),l.Y,l.Z),E=Ki(y,E),l=Ki(k,l),E.add(l)}class F{constructor(E,l,y){this.X=W("x",E),this.Y=W("y",l,!0),this.Z=W("z",y),Object.freeze(this)}static CURVE(){return i}static fromAffine(E){const{x:l,y}=E||{};if(!E||!r.isValid(l)||!r.isValid(y))throw new Error("invalid affine point");if(E instanceof F)throw new Error("projective point not allowed");return r.is0(l)&&r.is0(y)?F.ZERO:new F(l,y,r.ONE)}static fromBytes(E){const l=F.fromAffine(B(Ht(E,void 0,"point")));return l.assertValidity(),l}static fromHex(E){return F.fromBytes(Xe("pointHex",E))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(E=8,l=!0){return q.createCache(this,E),l||this.multiply(Mi),this}assertValidity(){oe(this)}hasEvenY(){const{y:E}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(E)}equals(E){X(E);const{X:l,Y:y,Z:k}=this,{X:x,Y:P,Z:U}=E,N=r.eql(r.mul(l,U),r.mul(x,k)),I=r.eql(r.mul(y,U),r.mul(P,k));return N&&I}negate(){return new F(this.X,r.neg(this.Y),this.Z)}double(){const{a:E,b:l}=i,y=r.mul(l,Mi),{X:k,Y:x,Z:P}=this;let U=r.ZERO,N=r.ZERO,I=r.ZERO,d=r.mul(k,k),p=r.mul(x,x),_=r.mul(P,P),T=r.mul(k,x);return T=r.add(T,T),I=r.mul(k,P),I=r.add(I,I),U=r.mul(E,I),N=r.mul(y,_),N=r.add(U,N),U=r.sub(p,N),N=r.add(p,N),N=r.mul(U,N),U=r.mul(T,U),I=r.mul(y,I),_=r.mul(E,_),T=r.sub(d,_),T=r.mul(E,T),T=r.add(T,I),I=r.add(d,d),d=r.add(I,d),d=r.add(d,_),d=r.mul(d,T),N=r.add(N,d),_=r.mul(x,P),_=r.add(_,_),d=r.mul(_,T),U=r.sub(U,d),I=r.mul(_,p),I=r.add(I,I),I=r.add(I,I),new F(U,N,I)}add(E){X(E);const{X:l,Y:y,Z:k}=this,{X:x,Y:P,Z:U}=E;let N=r.ZERO,I=r.ZERO,d=r.ZERO;const p=i.a,_=r.mul(i.b,Mi);let T=r.mul(l,x),z=r.mul(y,P),G=r.mul(k,U),te=r.add(l,y),ae=r.add(x,P);te=r.mul(te,ae),ae=r.add(T,z),te=r.sub(te,ae),ae=r.add(l,k);let Ee=r.add(x,U);return ae=r.mul(ae,Ee),Ee=r.add(T,G),ae=r.sub(ae,Ee),Ee=r.add(y,k),N=r.add(P,U),Ee=r.mul(Ee,N),N=r.add(z,G),Ee=r.sub(Ee,N),d=r.mul(p,ae),N=r.mul(_,G),d=r.add(N,d),N=r.sub(z,d),d=r.add(z,d),I=r.mul(N,d),z=r.add(T,T),z=r.add(z,T),G=r.mul(p,G),ae=r.mul(_,ae),z=r.add(z,G),G=r.sub(T,G),G=r.mul(p,G),ae=r.add(ae,G),T=r.mul(z,ae),I=r.add(I,T),T=r.mul(Ee,ae),N=r.mul(te,N),N=r.sub(N,T),T=r.mul(te,z),d=r.mul(Ee,d),d=r.add(d,T),new F(N,I,d)}subtract(E){return this.add(E.negate())}is0(){return this.equals(F.ZERO)}multiply(E){const{endo:l}=e;if(!s.isValidNot0(E))throw new Error("invalid scalar: out of range");let y,k;const x=P=>q.cached(this,P,U=>un(F,U));if(l){const{k1neg:P,k1:U,k2neg:N,k2:I}=Y(E),{p:d,f:p}=x(U),{p:_,f:T}=x(I);k=p.add(T),y=ee(l.beta,d,_,P,N)}else{const{p:P,f:U}=x(E);y=P,k=U}return un(F,[y,k])[0]}multiplyUnsafe(E){const{endo:l}=e,y=this;if(!s.isValid(E))throw new Error("invalid scalar: out of range");if(E===yr||y.is0())return F.ZERO;if(E===Cn)return y;if(q.hasCache(this))return this.multiply(E);if(l){const{k1neg:k,k1:x,k2neg:P,k2:U}=Y(E),{p1:N,p2:I}=ph(F,y,x,U);return ee(l.beta,N,I,k,P)}else return q.unsafe(y,E)}multiplyAndAddUnsafe(E,l,y){const k=this.multiplyUnsafe(l).add(E.multiplyUnsafe(y));return k.is0()?void 0:k}toAffine(E){return Z(this,E)}isTorsionFree(){const{isTorsionFree:E}=e;return o===Cn?!0:E?E(F,this):q.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:E}=e;return o===Cn?this:E?E(F,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(E=!0){return dn(E,"isCompressed"),this.assertValidity(),w(F,this,E)}toHex(E=!0){return fn(this.toBytes(E))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(E=!0){return this.toBytes(E)}_setWindowSize(E){this.precompute(E)}static normalizeZ(E){return un(F,E)}static msm(E,l){return Ku(F,s,E,l)}static fromPrivateKey(E){return F.BASE.multiply(Rn(s,E))}}F.BASE=new F(i.Gx,i.Gy,r.ONE),F.ZERO=new F(r.ZERO,r.ONE,r.ZERO),F.Fp=r,F.Fn=s;const K=s.BITS,q=new Du(F,e.endo?Math.ceil(K/2):K);return F.BASE.precompute(8),F}function ul(n){return Uint8Array.of(n?2:3)}function ll(n,e){return{secretKey:e.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function ap(n,e={}){const{Fn:t}=n,r=e.randomBytes||Po,s=Object.assign(ll(n.Fp,t),{seed:Lu(t.ORDER)});function i(w){try{return!!Rn(t,w)}catch{return!1}}function o(w,B){const{publicKey:R,publicKeyUncompressed:C}=s;try{const D=w.length;return B===!0&&D!==R||B===!1&&D!==C?!1:!!n.fromBytes(w)}catch{return!1}}function c(w=r(s.seed)){return fh(Ht(w,s.seed,"seed"),t.ORDER)}function f(w,B=!0){return n.BASE.multiply(Rn(t,w)).toBytes(B)}function m(w){const B=c(w);return{secretKey:B,publicKey:f(B)}}function b(w){if(typeof w=="bigint")return!1;if(w instanceof n)return!0;const{secretKey:B,publicKey:R,publicKeyUncompressed:C}=s;if(t.allowedLengths||B===R)return;const D=Xe("key",w).length;return D===R||D===C}function A(w,B,R=!0){if(b(w)===!0)throw new Error("first arg must be private key");if(b(B)===!1)throw new Error("second arg must be public key");const C=Rn(t,w);return n.fromHex(B).multiply(C).toBytes(R)}return Object.freeze({getPublicKey:f,getSharedSecret:A,keygen:m,Point:n,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:c,isValidPrivateKey:i,randomPrivateKey:c,normPrivateKeyToScalar:w=>Rn(t,w),precompute(w=8,B=n.BASE){return B.precompute(w,!1)}},lengths:s})}function cp(n,e,t={}){gu(e),gi(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||Po,s=t.hmac||((l,...y)=>al(e,l,Xt(...y))),{Fp:i,Fn:o}=n,{ORDER:c,BITS:f}=o,{keygen:m,getPublicKey:b,getSharedSecret:A,utils:v,lengths:w}=ap(n,t),B={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},R="compact";function C(l){const y=c>>Cn;return l>y}function D(l,y){if(!o.isValidNot0(y))throw new Error(`invalid signature ${l}: out of range 1..Point.Fn.ORDER`);return y}function V(l,y){mo(y);const k=w.signature,x=y==="compact"?k:y==="recovered"?k+1:void 0;return Ht(l,x,`${y} signature`)}class W{constructor(y,k,x){this.r=D("r",y),this.s=D("s",k),x!=null&&(this.recovery=x),Object.freeze(this)}static fromBytes(y,k=R){V(y,k);let x;if(k==="der"){const{r:I,s:d}=hr.toSig(Ht(y));return new W(I,d)}k==="recovered"&&(x=y[0],k="compact",y=y.subarray(1));const P=o.BYTES,U=y.subarray(0,P),N=y.subarray(P,P*2);return new W(o.fromBytes(U),o.fromBytes(N),x)}static fromHex(y,k){return this.fromBytes(Fi(y),k)}addRecoveryBit(y){return new W(this.r,this.s,y)}recoverPublicKey(y){const k=i.ORDER,{r:x,s:P,recovery:U}=this;if(U==null||![0,1,2,3].includes(U))throw new Error("recovery id invalid");if(c*cl<k&&U>1)throw new Error("recovery id is ambiguous for h>1 curve");const I=U===2||U===3?x+c:x;if(!i.isValid(I))throw new Error("recovery id 2 or 3 invalid");const d=i.toBytes(I),p=n.fromBytes(Xt(ul((U&1)===0),d)),_=o.inv(I),T=Y(Xe("msgHash",y)),z=o.create(-T*_),G=o.create(P*_),te=n.BASE.multiplyUnsafe(z).add(p.multiplyUnsafe(G));if(te.is0())throw new Error("point at infinify");return te.assertValidity(),te}hasHighS(){return C(this.s)}toBytes(y=R){if(mo(y),y==="der")return Fi(hr.hexFromSig(this));const k=o.toBytes(this.r),x=o.toBytes(this.s);if(y==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Xt(Uint8Array.of(this.recovery),k,x)}return Xt(k,x)}toHex(y){return fn(this.toBytes(y))}assertValidity(){}static fromCompact(y){return W.fromBytes(Xe("sig",y),"compact")}static fromDER(y){return W.fromBytes(Xe("sig",y),"der")}normalizeS(){return this.hasHighS()?new W(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return fn(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return fn(this.toBytes("compact"))}}const X=t.bits2int||function(y){if(y.length>8192)throw new Error("input is too large");const k=Qi(y),x=y.length*8-f;return x>0?k>>BigInt(x):k},Y=t.bits2int_modN||function(y){return o.create(X(y))},Z=yi(f);function oe(l){return yo("num < 2^"+f,l,yr,Z),o.toBytes(l)}function ee(l,y){return Ht(l,void 0,"message"),y?Ht(e(l),void 0,"prehashed message"):l}function F(l,y,k){if(["recovered","canonical"].some(z=>z in k))throw new Error("sign() legacy options not supported");const{lowS:x,prehash:P,extraEntropy:U}=eo(k,B);l=ee(l,P);const N=Y(l),I=Rn(o,y),d=[oe(I),oe(N)];if(U!=null&&U!==!1){const z=U===!0?r(w.secretKey):U;d.push(Xe("extraEntropy",z))}const p=Xt(...d),_=N;function T(z){const G=X(z);if(!o.isValidNot0(G))return;const te=o.inv(G),ae=n.BASE.multiply(G).toAffine(),Ee=o.create(ae.x);if(Ee===yr)return;const Se=o.create(te*o.create(_+Ee*I));if(Se===yr)return;let Pe=(ae.x===Ee?0:2)|Number(ae.y&Cn),kt=Se;return x&&C(Se)&&(kt=o.neg(Se),Pe^=1),new W(Ee,kt,Pe)}return{seed:p,k2sig:T}}function K(l,y,k={}){l=Xe("message",l);const{seed:x,k2sig:P}=F(l,y,k);return th(e.outputLen,o.BYTES,s)(x,P)}function q(l){let y;const k=typeof l=="string"||pi(l),x=!k&&l!==null&&typeof l=="object"&&typeof l.r=="bigint"&&typeof l.s=="bigint";if(!k&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(x)y=new W(l.r,l.s);else if(k){try{y=W.fromBytes(Xe("sig",l),"der")}catch(P){if(!(P instanceof hr.Err))throw P}if(!y)try{y=W.fromBytes(Xe("sig",l),"compact")}catch{return!1}}return y||!1}function H(l,y,k,x={}){const{lowS:P,prehash:U,format:N}=eo(x,B);if(k=Xe("publicKey",k),y=ee(Xe("message",y),U),"strict"in x)throw new Error("options.strict was renamed to lowS");const I=N===void 0?q(l):W.fromBytes(Xe("sig",l),N);if(I===!1)return!1;try{const d=n.fromBytes(k);if(P&&I.hasHighS())return!1;const{r:p,s:_}=I,T=Y(y),z=o.inv(_),G=o.create(T*z),te=o.create(p*z),ae=n.BASE.multiplyUnsafe(G).add(d.multiplyUnsafe(te));return ae.is0()?!1:o.create(ae.x)===p}catch{return!1}}function E(l,y,k={}){const{prehash:x}=eo(k,B);return y=ee(y,x),W.fromBytes(l,"recovered").recoverPublicKey(y).toBytes()}return Object.freeze({keygen:m,getPublicKey:b,getSharedSecret:A,utils:v,lengths:w,Point:n,sign:K,verify:H,recoverPublicKey:E,Signature:W,hash:e})}function up(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=gn(e.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),i={Fp:t,Fn:s,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:i}}function lp(n){const{CURVE:e,curveOpts:t}=up(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:t,hash:n.hash,ecdsaOpts:r}}function fp(n,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},n,Uu(t.Fn.ORDER,t.Fn.BITS))})}function hp(n){const{CURVE:e,curveOpts:t,hash:r,ecdsaOpts:s}=lp(n),i=op(e,t),o=cp(i,r,s);return fp(n,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dp(n,e){const t=r=>hp({...n,hash:r});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wo={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},pp={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Za=BigInt(2);function yp(n){const e=Wo.p,t=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),f=BigInt(88),m=n*n*n%e,b=m*m*n%e,A=Ze(b,t,e)*b%e,v=Ze(A,t,e)*b%e,w=Ze(v,Za,e)*m%e,B=Ze(w,s,e)*w%e,R=Ze(B,i,e)*B%e,C=Ze(R,c,e)*R%e,D=Ze(C,f,e)*C%e,V=Ze(D,c,e)*R%e,W=Ze(V,t,e)*b%e,X=Ze(W,o,e)*B%e,Y=Ze(X,r,e)*m%e,Z=Ze(Y,Za,e);if(!bo.eql(bo.sqr(Z),n))throw new Error("Cannot find square root");return Z}const bo=gn(Wo.p,{sqrt:yp}),zo=dp({...Wo,Fp:bo,lowS:!0,endo:pp},Au),gp=Wn.utils.randomPrivateKey,Xa=()=>{const n=Wn.utils.randomPrivateKey(),e=Hi(n),t=new Uint8Array(64);return t.set(n),t.set(e,32),{publicKey:e,secretKey:t}},Hi=Wn.getPublicKey;function Ja(n){try{return Wn.ExtendedPoint.fromHex(n),!0}catch{return!1}}const qo=(n,e)=>Wn.sign(n,e.slice(0,32)),mp=Wn.verify,we=n=>pe.Buffer.isBuffer(n)?n:n instanceof Uint8Array?pe.Buffer.from(n.buffer,n.byteOffset,n.byteLength):pe.Buffer.from(n);class Vo{constructor(e){Object.assign(this,e)}encode(){return pe.Buffer.from($s.serialize(ti,this))}static decode(e){return $s.deserialize(ti,this,e)}static decodeUnchecked(e){return $s.deserializeUnchecked(ti,this,e)}}class bp extends Vo{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const ti=new Map;var fl;const hl=32,ir=32;function wp(n){return n._bn!==void 0}let Qa=1;class J extends Vo{constructor(e){if(super({}),this._bn=void 0,wp(e))this._bn=e._bn;else{if(typeof e=="string"){const t=_t.decode(e);if(t.length!=ir)throw new Error("Invalid public key input");this._bn=new go(t)}else this._bn=new go(e);if(this._bn.byteLength()>ir)throw new Error("Invalid public key input")}}static unique(){const e=new J(Qa);return Qa+=1,new J(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return _t.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(pe.Buffer);if(e.length===ir)return e;const t=pe.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const s=pe.Buffer.concat([e.toBuffer(),pe.Buffer.from(t),r.toBuffer()]),i=Fa(s);return new J(i)}static createProgramAddressSync(e,t){let r=pe.Buffer.alloc(0);e.forEach(function(i){if(i.length>hl)throw new TypeError("Max seed length exceeded");r=pe.Buffer.concat([r,we(i)])}),r=pe.Buffer.concat([r,t.toBuffer(),pe.Buffer.from("ProgramDerivedAddress")]);const s=Fa(r);if(Ja(s))throw new Error("Invalid seeds, address must fall off the curve");return new J(s)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r=255,s;for(;r!=0;){try{const i=e.concat(pe.Buffer.from([r]));s=this.createProgramAddressSync(i,t)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new J(e);return Ja(t.toBytes())}}fl=J;J.default=new fl("11111111111111111111111111111111");ti.set(J,{kind:"struct",fields:[["_bn","u256"]]});class kp{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=we(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=we(gp()),this._publicKey=we(Hi(this._secretKey))}get publicKey(){return new J(this._publicKey)}get secretKey(){return pe.Buffer.concat([this._secretKey,this._publicKey],64)}}const Ep=new J("BPFLoader1111111111111111111111111111111111"),_r=1232,ss=127,ai=64;class $o extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty($o.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Ho extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Ho.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Mn extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Mn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class ci{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const ke=(n="publicKey")=>L.blob(32,n),Ap=(n="signature")=>L.blob(64,n),ln=(n="string")=>{const e=L.struct([L.u32("length"),L.u32("lengthPadding"),L.blob(L.offset(L.u32(),-8),"chars")],n),t=e.decode.bind(e),r=e.encode.bind(e),s=e;return s.decode=(i,o)=>t(i,o).chars.toString(),s.encode=(i,o,c)=>{const f={chars:pe.Buffer.from(i,"utf8")};return r(f,o,c)},s.alloc=i=>L.u32().span+L.u32().span+pe.Buffer.from(i,"utf8").length,s},Sp=(n="authorized")=>L.struct([ke("staker"),ke("withdrawer")],n),vp=(n="lockup")=>L.struct([L.ns64("unixTimestamp"),L.ns64("epoch"),ke("custodian")],n),_p=(n="voteInit")=>L.struct([ke("nodePubkey"),ke("authorizedVoter"),ke("authorizedWithdrawer"),L.u8("commission")],n),Ip=(n="voteAuthorizeWithSeedArgs")=>L.struct([L.u32("voteAuthorizationType"),ke("currentAuthorityDerivedKeyOwnerPubkey"),ln("currentAuthorityDerivedKeySeed"),ke("newAuthorized")],n);function dl(n,e){const t=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const i=e[s.property];if(Array.isArray(i))return i.length*t(s.elementLayout)}else if("fields"in s)return dl({layout:s},e[s.property]);return 0};let r=0;return n.layout.fields.forEach(s=>{r+=t(s)}),r}function Ot(n){let e=0,t=0;for(;;){let r=n.shift();if(e|=(r&127)<<t*7,t+=1,(r&128)===0)break}return e}function Wt(n,e){let t=e;for(;;){let r=t&127;if(t>>=7,t==0){n.push(r);break}else r|=128,n.push(r)}}function Ie(n,e){if(!n)throw new Error(e||"Assertion failed")}class os{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,s=o=>{const c=o.toBase58();let f=r.get(c);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(c,f)),f},i=s(t);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const c of o.keys){const f=s(c.pubkey);f.isSigner||=c.isSigner,f.isWritable||=c.isWritable}}return new os(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Ie(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,f])=>f.isSigner&&f.isWritable),r=e.filter(([,f])=>f.isSigner&&!f.isWritable),s=e.filter(([,f])=>!f.isSigner&&f.isWritable),i=e.filter(([,f])=>!f.isSigner&&!f.isWritable),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Ie(t.length>0,"Expected at least one writable signer key");const[f]=t[0];Ie(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...t.map(([f])=>new J(f)),...r.map(([f])=>new J(f)),...s.map(([f])=>new J(f)),...i.map(([f])=>new J(f))];return[o,c]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,t){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(t(o)){const c=new J(i),f=e.findIndex(m=>m.equals(c));f>=0&&(Ie(f<256,"Max lookup table index exceeded"),r.push(f),s.push(c),this.keyMetaMap.delete(i))}return[r,s]}}const pl="Reached end of buffer unexpectedly";function Jt(n){if(n.length===0)throw new Error(pl);return n.shift()}function Lt(n,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>n.length:t>=n.length)throw new Error(pl);return n.splice(...e)}class Yt{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new J(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:_t.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new ci(this.staticAccountKeys)}static compile(e){const t=os.compile(e.instructions,e.payerKey),[r,s]=t.getMessageComponents(),o=new ci(s).compileInstructions(e.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:_t.encode(c.data)}));return new Yt({header:r,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-t,i=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Wt(t,e);const r=this.instructions.map(A=>{const{accounts:v,programIdIndex:w}=A,B=Array.from(_t.decode(A.data));let R=[];Wt(R,v.length);let C=[];return Wt(C,B.length),{programIdIndex:w,keyIndicesCount:pe.Buffer.from(R),keyIndices:v,dataLength:pe.Buffer.from(C),data:B}});let s=[];Wt(s,r.length);let i=pe.Buffer.alloc(_r);pe.Buffer.from(s).copy(i);let o=s.length;r.forEach(A=>{const w=L.struct([L.u8("programIdIndex"),L.blob(A.keyIndicesCount.length,"keyIndicesCount"),L.seq(L.u8("keyIndex"),A.keyIndices.length,"keyIndices"),L.blob(A.dataLength.length,"dataLength"),L.seq(L.u8("userdatum"),A.data.length,"data")]).encode(A,i,o);o+=w}),i=i.slice(0,o);const c=L.struct([L.blob(1,"numRequiredSignatures"),L.blob(1,"numReadonlySignedAccounts"),L.blob(1,"numReadonlyUnsignedAccounts"),L.blob(t.length,"keyCount"),L.seq(ke("key"),e,"keys"),ke("recentBlockhash")]),f={numRequiredSignatures:pe.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:pe.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:pe.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:pe.Buffer.from(t),keys:this.accountKeys.map(A=>we(A.toBytes())),recentBlockhash:_t.decode(this.recentBlockhash)};let m=pe.Buffer.alloc(2048);const b=c.encode(f,m);return i.copy(m,b),m.slice(0,b+i.length)}static from(e){let t=[...e];const r=Jt(t);if(r!==(r&ss))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Jt(t),i=Jt(t),o=Ot(t);let c=[];for(let v=0;v<o;v++){const w=Lt(t,0,ir);c.push(new J(pe.Buffer.from(w)))}const f=Lt(t,0,ir),m=Ot(t);let b=[];for(let v=0;v<m;v++){const w=Jt(t),B=Ot(t),R=Lt(t,0,B),C=Ot(t),D=Lt(t,0,C),V=_t.encode(pe.Buffer.from(D));b.push({programIdIndex:w,accounts:R,data:V})}const A={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:_t.encode(pe.Buffer.from(f)),accountKeys:c,instructions:b};return new Yt(A)}}class pn{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ci(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const s=e-r,i=this.addressTableLookups.reduce((o,c)=>o+c.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-t,o=r-t-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=t-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=e.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)t.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)t.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){const t=os.compile(e.instructions,e.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const b of i){const A=t.extractTableLookup(b);if(A!==void 0){const[v,{writable:w,readonly:B}]=A;r.push(v),s.writable.push(...w),s.readonly.push(...B)}}const[o,c]=t.getMessageComponents(),m=new ci(c,s).compileInstructions(e.instructions);return new pn({header:o,staticAccountKeys:c,recentBlockhash:e.recentBlockhash,compiledInstructions:m,addressTableLookups:r})}serialize(){const e=Array();Wt(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();Wt(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Wt(i,this.addressTableLookups.length);const o=L.struct([L.u8("prefix"),L.struct([L.u8("numRequiredSignatures"),L.u8("numReadonlySignedAccounts"),L.u8("numReadonlyUnsignedAccounts")],"header"),L.blob(e.length,"staticAccountKeysLength"),L.seq(ke(),this.staticAccountKeys.length,"staticAccountKeys"),ke("recentBlockhash"),L.blob(r.length,"instructionsLength"),L.blob(t.length,"serializedInstructions"),L.blob(i.length,"addressTableLookupsLength"),L.blob(s.length,"serializedAddressTableLookups")]),c=new Uint8Array(_r),m=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(b=>b.toBytes()),recentBlockhash:_t.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},c);return c.slice(0,m)}serializeInstructions(){let e=0;const t=new Uint8Array(_r);for(const r of this.compiledInstructions){const s=Array();Wt(s,r.accountKeyIndexes.length);const i=Array();Wt(i,r.data.length);const o=L.struct([L.u8("programIdIndex"),L.blob(s.length,"encodedAccountKeyIndexesLength"),L.seq(L.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),L.blob(i.length,"encodedDataLength"),L.blob(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(_r);for(const r of this.addressTableLookups){const s=Array();Wt(s,r.writableIndexes.length);const i=Array();Wt(i,r.readonlyIndexes.length);const o=L.struct([ke("accountKey"),L.blob(s.length,"encodedWritableIndexesLength"),L.seq(L.u8(),r.writableIndexes.length,"writableIndexes"),L.blob(i.length,"encodedReadonlyIndexesLength"),L.seq(L.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=Jt(t),s=r&ss;Ie(r!==s,"Expected versioned message but received legacy message");const i=s;Ie(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Jt(t),numReadonlySignedAccounts:Jt(t),numReadonlyUnsignedAccounts:Jt(t)},c=[],f=Ot(t);for(let B=0;B<f;B++)c.push(new J(Lt(t,0,ir)));const m=_t.encode(Lt(t,0,ir)),b=Ot(t),A=[];for(let B=0;B<b;B++){const R=Jt(t),C=Ot(t),D=Lt(t,0,C),V=Ot(t),W=new Uint8Array(Lt(t,0,V));A.push({programIdIndex:R,accountKeyIndexes:D,data:W})}const v=Ot(t),w=[];for(let B=0;B<v;B++){const R=new J(Lt(t,0,ir)),C=Ot(t),D=Lt(t,0,C),V=Ot(t),W=Lt(t,0,V);w.push({accountKey:R,writableIndexes:D,readonlyIndexes:W})}return new pn({header:o,staticAccountKeys:c,recentBlockhash:m,compiledInstructions:A,addressTableLookups:w})}}const jo={deserializeMessageVersion(n){const e=n[0],t=e&ss;return t===e?"legacy":t},deserialize:n=>{const e=jo.deserializeMessageVersion(n);if(e==="legacy")return Yt.from(n);if(e===0)return pn.deserialize(n);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let fr=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const Bp=pe.Buffer.alloc(ai).fill(0);class me{constructor(e){this.keys=void 0,this.programId=void 0,this.data=pe.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}let ge=class wo{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new me(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let R=0;R<t.length;R++)if(t[R].programId===void 0)throw new Error(`Transaction instruction index ${R} has undefined program id`);const s=[],i=[];t.forEach(R=>{R.keys.forEach(D=>{i.push({...D})});const C=R.programId.toString();s.includes(C)||s.push(C)}),s.forEach(R=>{i.push({pubkey:new J(R),isSigner:!1,isWritable:!1})});const o=[];i.forEach(R=>{const C=R.pubkey.toString(),D=o.findIndex(V=>V.pubkey.toString()===C);D>-1?(o[D].isWritable=o[D].isWritable||R.isWritable,o[D].isSigner=o[D].isSigner||R.isSigner):o.push(R)}),o.sort(function(R,C){if(R.isSigner!==C.isSigner)return R.isSigner?-1:1;if(R.isWritable!==C.isWritable)return R.isWritable?-1:1;const D={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return R.pubkey.toBase58().localeCompare(C.pubkey.toBase58(),"en",D)});const c=o.findIndex(R=>R.pubkey.equals(r));if(c>-1){const[R]=o.splice(c,1);R.isSigner=!0,R.isWritable=!0,o.unshift(R)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const R of this.signatures){const C=o.findIndex(D=>D.pubkey.equals(R.publicKey));if(C>-1)o[C].isSigner||(o[C].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${R.publicKey.toString()}`)}let f=0,m=0,b=0;const A=[],v=[];o.forEach(({pubkey:R,isSigner:C,isWritable:D})=>{C?(A.push(R.toString()),f+=1,D||(m+=1)):(v.push(R.toString()),D||(b+=1))});const w=A.concat(v),B=t.map(R=>{const{data:C,programId:D}=R;return{programIdIndex:w.indexOf(D.toString()),accounts:R.keys.map(V=>w.indexOf(V.pubkey.toString())),data:_t.encode(C)}});return B.forEach(R=>{Ie(R.programIdIndex>=0),R.accounts.forEach(C=>Ie(C>=0))}),new Yt({header:{numRequiredSignatures:f,numReadonlySignedAccounts:m,numReadonlyUnsignedAccounts:b},accountKeys:w,recentBlockhash:e,instructions:B})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((s,i)=>t[i].equals(s.publicKey))||(this.signatures=t.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(r=>{const s=r.toString();return t.has(s)?!1:(t.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach(s=>{const i=qo(r,s.secretKey);this._addSignature(s.publicKey,we(i))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Ie(t.length===64);const r=this.signatures.findIndex(s=>e.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=pe.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?t&&(r.missing||=[]).push(i):mp(s,e,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,t);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:t}=this,r=[];Wt(r,t.length);const s=r.length+t.length*64+e.length,i=pe.Buffer.alloc(s);return Ie(t.length<256),pe.Buffer.from(r).copy(i,0),t.forEach(({signature:o},c)=>{o!==null&&(Ie(o.length===64,"signature has invalid length"),pe.Buffer.from(o).copy(i,r.length+c*64))}),e.copy(i,r.length+t.length*64),Ie(i.length<=_r,`Transaction too large: ${i.length} > ${_r}`),i}get keys(){return Ie(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Ie(this.instructions.length===1),this.instructions[0].programId}get data(){return Ie(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const r=Ot(t);let s=[];for(let i=0;i<r;i++){const o=Lt(t,0,ai);s.push(_t.encode(pe.Buffer.from(o)))}return wo.populate(Yt.from(t),s)}static populate(e,t=[]){const r=new wo;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((s,i)=>{const o={signature:s==_t.encode(Bp)?null:_t.decode(s),publicKey:e.accountKeys[i]};r.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const c=e.accountKeys[o];return{pubkey:c,isSigner:r.signatures.some(f=>f.publicKey.toString()===c.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new me({keys:i,programId:e.accountKeys[s.programIdIndex],data:_t.decode(s.data)}))}),r._message=e,r._json=r.toJSON(),r}};class Yo{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:r,compiledInstructions:s,recentBlockhash:i}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:f}=r,m=o-c;Ie(m>0,"Message header is invalid");const b=e.staticAccountKeys.length-o-f;Ie(b>=0,"Message header is invalid");const A=e.getAccountKeys(t),v=A.get(0);if(v===void 0)throw new Error("Failed to decompile message because no account keys were found");const w=[];for(const B of s){const R=[];for(const D of B.accountKeyIndexes){const V=A.get(D);if(V===void 0)throw new Error(`Failed to find key for account key index ${D}`);const W=D<o;let X;W?X=D<m:D<A.staticAccountKeys.length?X=D-o<b:X=D-A.staticAccountKeys.length<A.accountKeysFromLookups.writable.length,R.push({pubkey:V,isSigner:D<r.numRequiredSignatures,isWritable:X})}const C=A.get(B.programIdIndex);if(C===void 0)throw new Error(`Failed to find program id for program id index ${B.programIdIndex}`);w.push(new me({programId:C,data:we(B.data),keys:R}))}return new Yo({payerKey:v,instructions:w,recentBlockhash:i})}compileToLegacyMessage(){return Yt.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return pn.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class Go{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)Ie(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const r=[];for(let s=0;s<e.header.numRequiredSignatures;s++)r.push(new Uint8Array(ai));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Wt(t,this.signatures.length);const r=L.struct([L.blob(t.length,"encodedSignaturesLength"),L.seq(Ap(),this.signatures.length,"signatures"),L.blob(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let t=[...e];const r=[],s=Ot(t);for(let o=0;o<s;o++)r.push(new Uint8Array(Lt(t,0,ai)));const i=jo.deserialize(new Uint8Array(t));return new Go(i,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=r.findIndex(o=>o.equals(s.publicKey));Ie(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=qo(t,s.secretKey)}}addSignature(e,t){Ie(t.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));Ie(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=t}}const xp=160,Rp=64,Mp=xp/Rp,yl=1e3/Mp,Zt=new J("SysvarC1ock11111111111111111111111111111111"),Pp=new J("SysvarEpochSchedu1e111111111111111111111111"),Tp=new J("Sysvar1nstructions1111111111111111111111111"),Oi=new J("SysvarRecentB1ockHashes11111111111111111111"),rr=new J("SysvarRent111111111111111111111111111111111"),Cp=new J("SysvarRewards111111111111111111111111111111"),Up=new J("SysvarS1otHashes111111111111111111111111111"),Op=new J("SysvarS1otHistory11111111111111111111111111"),Li=new J("SysvarStakeHistory1111111111111111111111111");class ui extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let c;switch(e){case"send":c=`Transaction ${t} resulted in an error. 
${r}. `+i+o;break;case"simulate":c=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:c=`Unknown action '${(f=>f)(e)}'`}super(c),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,t(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const Lp={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class he extends Error{constructor({code:e,message:t,data:r},s){super(s!=null?`${s}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}async function ji(n,e,t,r){const s=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},i=await n.sendTransaction(e,t,s);let o;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)o=(await n.confirmTransaction({abortSignal:r?.abortSignal,signature:i,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},r&&r.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:c}=e.nonceInfo,f=c.keys[0].pubkey;o=(await n.confirmTransaction({abortSignal:r?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:i},r&&r.commitment)).value}else r?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await n.confirmTransaction(i,r&&r.commitment)).value;if(o.err)throw i!=null?new ui({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(o)})`);return i}function on(n){return new Promise(e=>setTimeout(e,n))}function Ae(n,e){const t=n.layout.span>=0?n.layout.span:dl(n,e),r=pe.Buffer.alloc(t),s=Object.assign({instruction:n.index},e);return n.layout.encode(s,r),r}function Re(n,e){let t;try{t=n.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.instruction!==n.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${n.index}`);return t}const gl=L.nu64("lamportsPerSignature"),ml=L.struct([L.u32("version"),L.u32("state"),ke("authorizedPubkey"),ke("nonce"),L.struct([gl],"feeCalculator")]),ko=ml.span;class as{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=ml.decode(we(e),0);return new as({authorizedPubkey:new J(t.authorizedPubkey),nonce:new J(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function Fn(n){const e=L.blob(8,n),t=e.decode.bind(e),r=e.encode.bind(e),s=e,i=fd();return s.decode=(o,c)=>{const f=t(o,c);return i.decode(f)},s.encode=(o,c,f)=>{const m=i.encode(o);return r(m,c,f)},s}class Np{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=L.u32("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(De))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:r,programId:s}=Re(De.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:r,programId:new J(s)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=Re(De.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:r,programId:s}=Re(De.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:r,programId:new J(s)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=Re(De.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,space:s,programId:i}=Re(De.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new J(t),seed:r,space:s,programId:new J(i)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=Re(De.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new J(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,programId:s}=Re(De.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new J(t),seed:r,programId:new J(s)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:r,lamports:s,space:i,programId:o}=Re(De.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new J(t),seed:r,lamports:s,space:i,programId:new J(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=Re(De.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new J(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Re(De.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Re(De.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=Re(De.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new J(t)}}static checkProgramId(e){if(!e.equals(je.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const De=Object.freeze({Create:{index:0,layout:L.struct([L.u32("instruction"),L.ns64("lamports"),L.ns64("space"),ke("programId")])},Assign:{index:1,layout:L.struct([L.u32("instruction"),ke("programId")])},Transfer:{index:2,layout:L.struct([L.u32("instruction"),Fn("lamports")])},CreateWithSeed:{index:3,layout:L.struct([L.u32("instruction"),ke("base"),ln("seed"),L.ns64("lamports"),L.ns64("space"),ke("programId")])},AdvanceNonceAccount:{index:4,layout:L.struct([L.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:L.struct([L.u32("instruction"),L.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:L.struct([L.u32("instruction"),ke("authorized")])},AuthorizeNonceAccount:{index:7,layout:L.struct([L.u32("instruction"),ke("authorized")])},Allocate:{index:8,layout:L.struct([L.u32("instruction"),L.ns64("space")])},AllocateWithSeed:{index:9,layout:L.struct([L.u32("instruction"),ke("base"),ln("seed"),L.ns64("space"),ke("programId")])},AssignWithSeed:{index:10,layout:L.struct([L.u32("instruction"),ke("base"),ln("seed"),ke("programId")])},TransferWithSeed:{index:11,layout:L.struct([L.u32("instruction"),Fn("lamports"),ln("seed"),ke("programId")])},UpgradeNonceAccount:{index:12,layout:L.struct([L.u32("instruction")])}});class je{constructor(){}static createAccount(e){const t=De.Create,r=Ae(t,{lamports:e.lamports,space:e.space,programId:we(e.programId.toBuffer())});return new me({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let t,r;if("basePubkey"in e){const s=De.TransferWithSeed;t=Ae(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:we(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=De.Transfer;t=Ae(s,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new me({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){const s=De.AssignWithSeed;t=Ae(s,{base:we(e.basePubkey.toBuffer()),seed:e.seed,programId:we(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=De.Assign;t=Ae(s,{programId:we(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new me({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=De.CreateWithSeed,r=Ae(t,{base:we(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:we(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new me({keys:s,programId:this.programId,data:r})}static createNonceAccount(e){const t=new ge;"basePubkey"in e&&"seed"in e?t.add(je.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:ko,programId:this.programId})):t.add(je.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:ko,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=De.InitializeNonceAccount,r=Ae(t,{authorized:we(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Oi,isSigner:!1,isWritable:!1},{pubkey:rr,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new me(s)}static nonceAdvance(e){const t=De.AdvanceNonceAccount,r=Ae(t),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Oi,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new me(s)}static nonceWithdraw(e){const t=De.WithdrawNonceAccount,r=Ae(t,{lamports:e.lamports});return new me({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Oi,isSigner:!1,isWritable:!1},{pubkey:rr,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const t=De.AuthorizeNonceAccount,r=Ae(t,{authorized:we(e.newAuthorizedPubkey.toBuffer())});return new me({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let t,r;if("basePubkey"in e){const s=De.AllocateWithSeed;t=Ae(s,{base:we(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:we(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=De.Allocate;t=Ae(s,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new me({keys:r,programId:this.programId,data:t})}}je.programId=new J("11111111111111111111111111111111");const Fp=_r-300;class yn{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/yn.chunkSize)+1+1)}static async load(e,t,r,s,i){{const A=await e.getMinimumBalanceForRentExemption(i.length),v=await e.getAccountInfo(r.publicKey,"confirmed");let w=null;if(v!==null){if(v.executable)return console.error("Program load failed, account is already executable"),!1;v.data.length!==i.length&&(w=w||new ge,w.add(je.allocate({accountPubkey:r.publicKey,space:i.length}))),v.owner.equals(s)||(w=w||new ge,w.add(je.assign({accountPubkey:r.publicKey,programId:s}))),v.lamports<A&&(w=w||new ge,w.add(je.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:A-v.lamports})))}else w=new ge().add(je.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:A>0?A:1,space:i.length,programId:s}));w!==null&&await ji(e,w,[t,r],{commitment:"confirmed"})}const o=L.struct([L.u32("instruction"),L.u32("offset"),L.u32("bytesLength"),L.u32("bytesLengthPadding"),L.seq(L.u8("byte"),L.offset(L.u32(),-8),"bytes")]),c=yn.chunkSize;let f=0,m=i,b=[];for(;m.length>0;){const A=m.slice(0,c),v=pe.Buffer.alloc(c+16);o.encode({instruction:0,offset:f,bytes:A,bytesLength:0,bytesLengthPadding:0},v);const w=new ge().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:v});b.push(ji(e,w,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await on(1e3/4),f+=c,m=m.slice(c)}await Promise.all(b);{const A=L.struct([L.u32("instruction")]),v=pe.Buffer.alloc(A.span);A.encode({instruction:1},v);const w=new ge().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:rr,isSigner:!1,isWritable:!1}],programId:s,data:v}),B="processed",R=await e.sendTransaction(w,[t,r],{preflightCommitment:B}),{context:C,value:D}=await e.confirmTransaction({signature:R,lastValidBlockHeight:w.lastValidBlockHeight,blockhash:w.recentBlockhash},B);if(D.err)throw new Error(`Transaction ${R} failed (${JSON.stringify(D)})`);for(;;){try{if(await e.getSlot({commitment:B})>C.slot)break}catch{}await new Promise(V=>setTimeout(V,Math.round(yl/2)))}}return!0}}yn.chunkSize=Fp;const Dp=new J("BPFLoader2111111111111111111111111111111111");class Kp{static getMinNumSignatures(e){return yn.getMinNumSignatures(e)}static load(e,t,r,s,i){return yn.load(e,t,r,i,s)}}function Wp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var to,ec;function zp(){if(ec)return to;ec=1;var n=Object.prototype.toString,e=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function t(r,s){var i,o,c,f,m,b,A;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return t(r.toJSON(),s);if(A=n.call(r),A==="[object Array]"){for(c="[",o=r.length-1,i=0;i<o;i++)c+=t(r[i],!0)+",";return o>-1&&(c+=t(r[i],!0)),c+"]"}else if(A==="[object Object]"){for(f=e(r).sort(),o=f.length,c="",i=0;i<o;)m=f[i],b=t(r[m],!1),b!==void 0&&(c&&(c+=","),c+=JSON.stringify(m)+":"+b),i++;return"{"+c+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return to=function(r){var s=t(r,!1);if(s!==void 0)return""+s},to}var qp=zp(),tc=Wp(qp);const jn=32;function ro(n){let e=0;for(;n>1;)n/=2,e++;return e}function Vp(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class bl{constructor(e,t,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=ro(Vp(e+jn+1))-ro(jn)-1,r=this.getSlotsInEpoch(t),s=e-(r-jn);return[t,s]}else{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=t%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*jn:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+ro(jn)):this.slotsPerEpoch}}var $p=globalThis.fetch;class Hp extends jd{constructor(e,t,r){const s=i=>{const o=$d(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,t,r),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function jp(n,e){let t;try{t=n.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${n.index}`);return t}const rc=56;class Eo{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=jp(Yp,e),r=e.length-rc;Ie(r>=0,"lookup table is invalid"),Ie(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=L.struct([L.seq(ke(),s,"addresses")]).decode(e.slice(rc));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new J(t.authority[0]):void 0,addresses:i.map(o=>new J(o))}}}const Yp={index:1,layout:L.struct([L.u32("typeIndex"),Fn("deactivationSlot"),L.nu64("lastExtendedSlot"),L.u8("lastExtendedStartIndex"),L.u8(),L.seq(ke(),L.offset(L.u8(),-1),"authority")])},Gp=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Zp(n){const e=n.match(Gp);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[t,r,s,i]=e,o=n.startsWith("https:")?"wss:":"ws:",c=s==null?null:parseInt(s.slice(1),10),f=c==null?"":`:${c+1}`;return`${o}//${r}${f}${i}`}const Ge=ki(Fo(J),re(),n=>new J(n)),wl=Do([re(),Ye("base64")]),Zo=ki(Fo(pe.Buffer),wl,n=>pe.Buffer.from(n[0],"base64")),kl=30*1e3;function Xp(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Fe(n){let e,t;if(typeof n=="string")e=n;else if(n){const{commitment:r,...s}=n;e=r,t=s}return{commitment:e,config:t}}function nc(n){return n.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function El(n){return Ut([Q({jsonrpc:Ye("2.0"),id:re(),result:n}),Q({jsonrpc:Ye("2.0"),id:re(),error:Q({code:zn(),message:re(),data:de(md())})})])}const Jp=El(zn());function be(n){return ki(El(n),Jp,e=>"error"in e?e:{...e,result:ne(e.result,n)})}function Je(n){return be(Q({context:Q({slot:$()}),value:n}))}function cs(n){return Q({context:Q({slot:$()}),value:n})}function no(n,e){return n===0?new pn({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new J(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:_t.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Yt(e)}const Qp=Q({foundation:$(),foundationTerm:$(),initial:$(),taper:$(),terminal:$()}),e0=be(ce(ue(Q({epoch:$(),effectiveSlot:$(),amount:$(),postBalance:$(),commission:de(ue($()))})))),t0=ce(Q({slot:$(),prioritizationFee:$()})),r0=Q({total:$(),validator:$(),foundation:$(),epoch:$()}),n0=Q({epoch:$(),slotIndex:$(),slotsInEpoch:$(),absoluteSlot:$(),blockHeight:de($()),transactionCount:de($())}),i0=Q({slotsPerEpoch:$(),leaderScheduleSlotOffset:$(),warmup:sr(),firstNormalEpoch:$(),firstNormalSlot:$()}),s0=Gu(re(),ce($())),bn=ue(Ut([Q({}),re()])),o0=Q({err:bn}),a0=Ye("receivedSignature"),c0=Q({"solana-core":re(),"feature-set":de($())}),u0=Q({program:re(),programId:Ge,parsed:zn()}),l0=Q({programId:Ge,accounts:ce(Ge),data:re()}),ic=Je(Q({err:ue(Ut([Q({}),re()])),logs:ue(ce(re())),accounts:de(ue(ce(ue(Q({executable:sr(),owner:re(),lamports:$(),data:ce(re()),rentEpoch:de($())}))))),unitsConsumed:de($()),returnData:de(ue(Q({programId:re(),data:Do([re(),Ye("base64")])}))),innerInstructions:de(ue(ce(Q({index:$(),instructions:ce(Ut([u0,l0]))}))))})),f0=Je(Q({byIdentity:Gu(re(),ce($())),range:Q({firstSlot:$(),lastSlot:$()})}));function h0(n,e,t,r,s,i){const o=t||$p;let c;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let f;return r&&(f=async(b,A)=>{const v=await new Promise((w,B)=>{try{r(b,A,(R,C)=>w([R,C]))}catch(R){B(R)}});return await o(...v)}),new Wd(async(b,A)=>{const v={method:"POST",body:b,agent:c,headers:Object.assign({"Content-Type":"application/json"},e||{},hy)};try{let w=5,B,R=500;for(;f?B=await f(n,v):B=await o(n,v),!(B.status!==429||s===!0||(w-=1,w===0));)console.error(`Server responded with ${B.status} ${B.statusText}.  Retrying after ${R}ms delay...`),await on(R),R*=2;const C=await B.text();B.ok?A(null,C):A(new Error(`${B.status} ${B.statusText}: ${C}`))}catch(w){w instanceof Error&&A(w)}},{})}function d0(n){return(e,t)=>new Promise((r,s)=>{n.request(e,t,(i,o)=>{if(i){s(i);return}r(o)})})}function p0(n){return e=>new Promise((t,r)=>{e.length===0&&t([]);const s=e.map(i=>n.request(i.methodName,i.args));n.request(s,(i,o)=>{if(i){r(i);return}t(o)})})}const y0=be(Qp),g0=be(r0),m0=be(t0),b0=be(n0),w0=be(i0),k0=be(s0),E0=be($()),A0=Je(Q({total:$(),circulating:$(),nonCirculating:$(),nonCirculatingAccounts:ce(Ge)})),Ao=Q({amount:re(),uiAmount:ue($()),decimals:$(),uiAmountString:de(re())}),S0=Je(ce(Q({address:Ge,amount:re(),uiAmount:ue($()),decimals:$(),uiAmountString:de(re())}))),v0=Je(ce(Q({pubkey:Ge,account:Q({executable:sr(),owner:Ge,lamports:$(),data:Zo,rentEpoch:$()})}))),So=Q({program:re(),parsed:zn(),space:$()}),_0=Je(ce(Q({pubkey:Ge,account:Q({executable:sr(),owner:Ge,lamports:$(),data:So,rentEpoch:$()})}))),I0=Je(ce(Q({lamports:$(),address:Ge}))),li=Q({executable:sr(),owner:Ge,lamports:$(),data:Zo,rentEpoch:$()}),B0=Q({pubkey:Ge,account:li}),x0=ki(Ut([Fo(pe.Buffer),So]),Ut([wl,So]),n=>Array.isArray(n)?ne(n,Zo):n),vo=Q({executable:sr(),owner:Ge,lamports:$(),data:x0,rentEpoch:$()}),R0=Q({pubkey:Ge,account:vo}),M0=Q({state:Ut([Ye("active"),Ye("inactive"),Ye("activating"),Ye("deactivating")]),active:$(),inactive:$()}),P0=be(ce(Q({signature:re(),slot:$(),err:bn,memo:ue(re()),blockTime:de(ue($()))}))),T0=be(ce(Q({signature:re(),slot:$(),err:bn,memo:ue(re()),blockTime:de(ue($()))}))),C0=Q({subscription:$(),result:cs(li)}),U0=Q({pubkey:Ge,account:li}),O0=Q({subscription:$(),result:cs(U0)}),L0=Q({parent:$(),slot:$(),root:$()}),N0=Q({subscription:$(),result:L0}),F0=Ut([Q({type:Ut([Ye("firstShredReceived"),Ye("completed"),Ye("optimisticConfirmation"),Ye("root")]),slot:$(),timestamp:$()}),Q({type:Ye("createdBank"),parent:$(),slot:$(),timestamp:$()}),Q({type:Ye("frozen"),slot:$(),timestamp:$(),stats:Q({numTransactionEntries:$(),numSuccessfulTransactions:$(),numFailedTransactions:$(),maxTransactionsPerEntry:$()})}),Q({type:Ye("dead"),slot:$(),timestamp:$(),err:re()})]),D0=Q({subscription:$(),result:F0}),K0=Q({subscription:$(),result:cs(Ut([o0,a0]))}),W0=Q({subscription:$(),result:$()}),z0=Q({pubkey:re(),gossip:ue(re()),tpu:ue(re()),rpc:ue(re()),version:ue(re())}),sc=Q({votePubkey:re(),nodePubkey:re(),activatedStake:$(),epochVoteAccount:sr(),epochCredits:ce(Do([$(),$(),$()])),commission:$(),lastVote:$(),rootSlot:ue($())}),q0=be(Q({current:ce(sc),delinquent:ce(sc)})),V0=Ut([Ye("processed"),Ye("confirmed"),Ye("finalized")]),$0=Q({slot:$(),confirmations:ue($()),err:bn,confirmationStatus:de(V0)}),H0=Je(ce(ue($0))),j0=be($()),Al=Q({accountKey:Ge,writableIndexes:ce($()),readonlyIndexes:ce($())}),Xo=Q({signatures:ce(re()),message:Q({accountKeys:ce(re()),header:Q({numRequiredSignatures:$(),numReadonlySignedAccounts:$(),numReadonlyUnsignedAccounts:$()}),instructions:ce(Q({accounts:ce($()),data:re(),programIdIndex:$()})),recentBlockhash:re(),addressTableLookups:de(ce(Al))})}),Sl=Q({pubkey:Ge,signer:sr(),writable:sr(),source:de(Ut([Ye("transaction"),Ye("lookupTable")]))}),vl=Q({accountKeys:ce(Sl),signatures:ce(re())}),_l=Q({parsed:zn(),program:re(),programId:Ge}),Il=Q({accounts:ce(Ge),data:re(),programId:Ge}),Y0=Ut([Il,_l]),G0=Ut([Q({parsed:zn(),program:re(),programId:re()}),Q({accounts:ce(re()),data:re(),programId:re()})]),Bl=ki(Y0,G0,n=>"accounts"in n?ne(n,Il):ne(n,_l)),xl=Q({signatures:ce(re()),message:Q({accountKeys:ce(Sl),instructions:ce(Bl),recentBlockhash:re(),addressTableLookups:de(ue(ce(Al)))})}),Yi=Q({accountIndex:$(),mint:re(),owner:de(re()),programId:de(re()),uiTokenAmount:Ao}),Rl=Q({writable:ce(Ge),readonly:ce(Ge)}),us=Q({err:bn,fee:$(),innerInstructions:de(ue(ce(Q({index:$(),instructions:ce(Q({accounts:ce($()),data:re(),programIdIndex:$()}))})))),preBalances:ce($()),postBalances:ce($()),logMessages:de(ue(ce(re()))),preTokenBalances:de(ue(ce(Yi))),postTokenBalances:de(ue(ce(Yi))),loadedAddresses:de(Rl),computeUnitsConsumed:de($()),costUnits:de($())}),Jo=Q({err:bn,fee:$(),innerInstructions:de(ue(ce(Q({index:$(),instructions:ce(Bl)})))),preBalances:ce($()),postBalances:ce($()),logMessages:de(ue(ce(re()))),preTokenBalances:de(ue(ce(Yi))),postTokenBalances:de(ue(ce(Yi))),loadedAddresses:de(Rl),computeUnitsConsumed:de($()),costUnits:de($())}),qn=Ut([Ye(0),Ye("legacy")]),wn=Q({pubkey:re(),lamports:$(),postBalance:ue($()),rewardType:ue(re()),commission:de(ue($()))}),Z0=be(ue(Q({blockhash:re(),previousBlockhash:re(),parentSlot:$(),transactions:ce(Q({transaction:Xo,meta:ue(us),version:de(qn)})),rewards:de(ce(wn)),blockTime:ue($()),blockHeight:ue($())}))),X0=be(ue(Q({blockhash:re(),previousBlockhash:re(),parentSlot:$(),rewards:de(ce(wn)),blockTime:ue($()),blockHeight:ue($())}))),J0=be(ue(Q({blockhash:re(),previousBlockhash:re(),parentSlot:$(),transactions:ce(Q({transaction:vl,meta:ue(us),version:de(qn)})),rewards:de(ce(wn)),blockTime:ue($()),blockHeight:ue($())}))),Q0=be(ue(Q({blockhash:re(),previousBlockhash:re(),parentSlot:$(),transactions:ce(Q({transaction:xl,meta:ue(Jo),version:de(qn)})),rewards:de(ce(wn)),blockTime:ue($()),blockHeight:ue($())}))),ey=be(ue(Q({blockhash:re(),previousBlockhash:re(),parentSlot:$(),transactions:ce(Q({transaction:vl,meta:ue(Jo),version:de(qn)})),rewards:de(ce(wn)),blockTime:ue($()),blockHeight:ue($())}))),ty=be(ue(Q({blockhash:re(),previousBlockhash:re(),parentSlot:$(),rewards:de(ce(wn)),blockTime:ue($()),blockHeight:ue($())}))),ry=be(ue(Q({blockhash:re(),previousBlockhash:re(),parentSlot:$(),transactions:ce(Q({transaction:Xo,meta:ue(us)})),rewards:de(ce(wn)),blockTime:ue($())}))),oc=be(ue(Q({blockhash:re(),previousBlockhash:re(),parentSlot:$(),signatures:ce(re()),blockTime:ue($())}))),io=be(ue(Q({slot:$(),meta:ue(us),blockTime:de(ue($())),transaction:Xo,version:de(qn)}))),Pi=be(ue(Q({slot:$(),transaction:xl,meta:ue(Jo),blockTime:de(ue($())),version:de(qn)}))),ny=Je(Q({blockhash:re(),lastValidBlockHeight:$()})),iy=Je(sr()),sy=Q({slot:$(),numTransactions:$(),numSlots:$(),samplePeriodSecs:$()}),oy=be(ce(sy)),ay=Je(ue(Q({feeCalculator:Q({lamportsPerSignature:$()})}))),cy=be(re()),uy=be(re()),ly=Q({err:bn,logs:ce(re()),signature:re()}),fy=Q({result:cs(ly),subscription:$()}),hy={"solana-client":"js/1.0.0-maintenance"};class dy{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const m={};return async b=>{const{commitment:A,config:v}=Fe(b),w=this._buildArgs([],A,void 0,v),B=tc(w);return m[B]=m[B]??(async()=>{try{const R=await this._rpcRequest("getBlockHeight",w),C=ne(R,be($()));if("error"in C)throw new he(C.error,"failed to get block height information");return C.result}finally{delete m[B]}})(),await m[B]}})();let r,s,i,o,c,f;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,s=t.httpHeaders,i=t.fetch,o=t.fetchMiddleware,c=t.disableRetryOnRateLimit,f=t.httpAgent),this._rpcEndpoint=Xp(e),this._rpcWsEndpoint=r||Zp(e),this._rpcClient=h0(e,s,i,o,c,f),this._rpcRequest=d0(this._rpcClient),this._rpcBatchRequest=p0(this._rpcClient),this._rpcWebSocket=new Hp(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:s}=Fe(t),i=this._buildArgs([e.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),c=ne(o,Je($()));if("error"in c)throw new he(c.error,`failed to get balance for ${e.toBase58()}`);return c.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),r=ne(t,be(ue($())));if("error"in r)throw new he(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=ne(e,be($()));if("error"in t)throw new he(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=ne(e,E0);if("error"in t)throw new he(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[t]),s=ne(r,A0);if("error"in s)throw new he(s.error,"failed to get supply");return s.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenSupply",r),i=ne(s,Je(Ao));if("error"in i)throw new he(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenAccountBalance",r),i=ne(s,Je(Ao));if("error"in i)throw new he(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,t,r){const{commitment:s,config:i}=Fe(r);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const c=this._buildArgs(o,s,"base64",i),f=await this._rpcRequest("getTokenAccountsByOwner",c),m=ne(f,v0);if("error"in m)throw new he(m.error,`failed to get token accounts owned by account ${e.toBase58()}`);return m.result}async getParsedTokenAccountsByOwner(e,t,r){let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),c=ne(o,_0);if("error"in c)throw new he(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],s=await this._rpcRequest("getLargestAccounts",r),i=ne(s,I0);if("error"in i)throw new he(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenLargestAccounts",r),i=ne(s,S0);if("error"in i)throw new he(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:s}=Fe(t),i=this._buildArgs([e.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),c=ne(o,Je(ue(li)));if("error"in c)throw new he(c.error,`failed to get info about account ${e.toBase58()}`);return c.result}async getParsedAccountInfo(e,t){const{commitment:r,config:s}=Fe(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),c=ne(o,Je(ue(vo)));if("error"in c)throw new he(c.error,`failed to get info about account ${e.toBase58()}`);return c.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:s}=Fe(t),i=e.map(m=>m.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),c=await this._rpcRequest("getMultipleAccounts",o),f=ne(c,Je(ce(ue(vo))));if("error"in f)throw new he(f.error,`failed to get info for accounts ${i}`);return f.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:s}=Fe(t),i=e.map(m=>m.toBase58()),o=this._buildArgs([i],r,"base64",s),c=await this._rpcRequest("getMultipleAccounts",o),f=ne(c,Je(ce(ue(li))));if("error"in f)throw new he(f.error,`failed to get info for accounts ${i}`);return f.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:s,config:i}=Fe(t),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:r??i?.epoch}),c=await this._rpcRequest("getStakeActivation",o),f=ne(c,be(M0));if("error"in f)throw new he(f.error,`failed to get Stake Activation ${e.toBase58()}`);return f.result}async getProgramAccounts(e,t){const{commitment:r,config:s}=Fe(t),{encoding:i,...o}=s||{},c=this._buildArgs([e.toBase58()],r,i||"base64",{...o,...o.filters?{filters:nc(o.filters)}:null}),f=await this._rpcRequest("getProgramAccounts",c),m=ce(B0),b=o.withContext===!0?ne(f,Je(m)):ne(f,be(m));if("error"in b)throw new he(b.error,`failed to get accounts owned by program ${e.toBase58()}`);return b.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:s}=Fe(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),c=ne(o,be(ce(R0)));if("error"in c)throw new he(c.error,`failed to get accounts owned by program ${e.toBase58()}`);return c.result}async confirmTransaction(e,t){let r;if(typeof e=="string")r=e;else{const i=e;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let s;try{s=_t.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Ie(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,s,i=!1;const o=new Promise((f,m)=>{try{r=this.onSignature(t,(A,v)=>{r=void 0;const w={context:v,value:A};f({__type:fr.PROCESSED,response:w})},e);const b=new Promise(A=>{r==null?A():s=this._onSubscriptionStateChange(r,v=>{v==="subscribed"&&A()})});(async()=>{if(await b,i)return;const A=await this.getSignatureStatus(t);if(i||A==null)return;const{context:v,value:w}=A;if(w!=null)if(w?.err)m(w.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(w.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(w.confirmationStatus==="processed"||w.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,f({__type:fr.PROCESSED,response:{context:v,value:w}})}})()}catch(b){m(b)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(A=>{const v=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let w=await v();if(!i){for(;w<=r;)if(await on(1e3),i||(w=await v(),i))return;A({__type:fr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),m=this.getCancellationPromise(t);let b;try{const A=await Promise.race([m,f,o]);if(A.__type===fr.PROCESSED)b=A.response;else throw new $o(s)}finally{i=!0,c()}return b}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let c=!1;const f=new Promise(w=>{let B=i,R=null;const C=async()=>{try{const{context:D,value:V}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:r});return R=D.slot,V?.nonce}catch{return B}};(async()=>{if(B=await C(),!c)for(;;){if(i!==B){w({__type:fr.NONCE_INVALID,slotInWhichNonceDidAdvance:R});return}if(await on(2e3),c||(B=await C(),c))return}})()}),{abortConfirmation:m,confirmationPromise:b}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),A=this.getCancellationPromise(t);let v;try{const w=await Promise.race([A,b,f]);if(w.__type===fr.PROCESSED)v=w.response;else{let B;for(;;){const R=await this.getSignatureStatus(o);if(R==null)break;if(R.context.slot<(w.slotInWhichNonceDidAdvance??r)){await on(400);continue}B=R;break}if(B?.value){const R=e||"finalized",{confirmationStatus:C}=B.value;switch(R){case"processed":case"recent":if(C!=="processed"&&C!=="confirmed"&&C!=="finalized")throw new Mn(o);break;case"confirmed":case"single":case"singleGossip":if(C!=="confirmed"&&C!=="finalized")throw new Mn(o);break;case"finalized":case"max":case"root":if(C!=="finalized")throw new Mn(o);break;default:}v={context:B.context,value:{err:B.value.err}}}else throw new Mn(o)}}finally{c=!0,m()}return v}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const s=new Promise(f=>{let m=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{m=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>f({__type:fr.TIMED_OUT,timeoutMs:m}),m)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let c;try{const f=await Promise.race([o,s]);if(f.__type===fr.PROCESSED)c=f.response;else throw new Ho(t,f.timeoutMs/1e3)}finally{clearTimeout(r),i()}return c}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=ne(e,be(ce(z0)));if("error"in t)throw new he(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),s=ne(r,q0);if("error"in s)throw new he(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:t,config:r}=Fe(e),s=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getSlot",s),o=ne(i,be($()));if("error"in o)throw new he(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:r}=Fe(e),s=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=ne(i,be(re()));if("error"in o)throw new he(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const r=[e,t],s=await this._rpcRequest("getSlotLeaders",r),i=ne(s,be(ce(Ge)));if("error"in i)throw new he(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,t){const{context:r,value:s}=await this.getSignatureStatuses([e],t);Ie(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const s=await this._rpcRequest("getSignatureStatuses",r),i=ne(s,H0);if("error"in i)throw new he(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:t,config:r}=Fe(e),s=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=ne(i,be($()));if("error"in o)throw new he(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),s=ne(r,y0);if("error"in s)throw new he(s.error,"failed to get inflation");return s.result}async getInflationReward(e,t,r){const{commitment:s,config:i}=Fe(r),o=this._buildArgs([e.map(m=>m.toBase58())],s,void 0,{...i,epoch:t??i?.epoch}),c=await this._rpcRequest("getInflationReward",o),f=ne(c,e0);if("error"in f)throw new he(f.error,"failed to get inflation reward");return f.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=ne(e,g0);if("error"in t)throw new he(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:r}=Fe(e),s=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=ne(i,b0);if("error"in o)throw new he(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=ne(e,w0);if("error"in t)throw new he(t.error,"failed to get epoch schedule");const r=t.result;return new bl(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=ne(e,k0);if("error"in t)throw new he(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=ne(s,j0);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=ne(t,oy);if("error"in r)throw new he(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=ne(s,ay);if("error"in i)throw new he(i.error,"failed to get fee calculator");const{context:o,value:c}=i.result;return{context:o,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(e,t){const r=we(e.serialize()).toString("base64"),s=this._buildArgs([r],t),i=await this._rpcRequest("getFeeForMessage",s),o=ne(i,Je(ue($())));if("error"in o)throw new he(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map(o=>o.toBase58()),r=t?.length?[t]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=ne(s,m0);if("error"in i)throw new he(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=Fe(e),s=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=ne(i,ny);if("error"in o)throw new he(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:r,config:s}=Fe(t),i=this._buildArgs([e],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),c=ne(o,iy);if("error"in c)throw new he(c.error,"failed to determine if the blockhash `"+e+"`is valid");return c.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=ne(e,be(c0));if("error"in t)throw new he(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=ne(e,be(re()));if("error"in t)throw new he(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:r,config:s}=Fe(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=ne(o,J0);if("error"in c)throw c.error;return c.result}case"none":{const c=ne(o,X0);if("error"in c)throw c.error;return c.result}default:{const c=ne(o,Z0);if("error"in c)throw c.error;const{result:f}=c;return f?{...f,transactions:f.transactions.map(({transaction:m,meta:b,version:A})=>({meta:b,transaction:{...m,message:no(A,m.message)},version:A}))}:null}}}catch(c){throw new he(c,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:s}=Fe(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=ne(o,ey);if("error"in c)throw c.error;return c.result}case"none":{const c=ne(o,ty);if("error"in c)throw c.error;return c.result}default:{const c=ne(o,Q0);if("error"in c)throw c.error;return c.result}}}catch(c){throw new he(c,"failed to get block")}}async getBlockProduction(e){let t,r;if(typeof e=="string")r=e;else if(e){const{commitment:c,...f}=e;r=c,t=f}const s=this._buildArgs([],r,"base64",t),i=await this._rpcRequest("getBlockProduction",s),o=ne(i,f0);if("error"in o)throw new he(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:r,config:s}=Fe(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getTransaction",i),c=ne(o,io);if("error"in c)throw new he(c.error,"failed to get transaction");const f=c.result;return f&&{...f,transaction:{...f.transaction,message:no(f.version,f.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:r,config:s}=Fe(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),c=ne(o,Pi);if("error"in c)throw new he(c.error,"failed to get transaction");return c.result}async getParsedTransactions(e,t){const{commitment:r,config:s}=Fe(t),i=e.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(f=>{const m=ne(f,Pi);if("error"in m)throw new he(m.error,"failed to get transactions");return m.result})}async getTransactions(e,t){const{commitment:r,config:s}=Fe(t),i=e.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(f=>{const m=ne(f,io);if("error"in m)throw new he(m.error,"failed to get transactions");const b=m.result;return b&&{...b,transaction:{...b.transaction,message:no(b.version,b.transaction.message)}}})}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getBlock",r),i=ne(s,ry);if("error"in i)throw new he(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const c={...o,transactions:o.transactions.map(({transaction:f,meta:m})=>{const b=new Yt(f.message);return{meta:m,transaction:{...f,message:b}}})};return{...c,transactions:c.transactions.map(({transaction:f,meta:m})=>({meta:m,transaction:ge.populate(f.message,f.signatures)}))}}async getBlocks(e,t,r){const s=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],r),i=await this._rpcRequest("getBlocks",s),o=ne(i,be(ce($())));if("error"in o)throw new he(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=ne(s,oc);if("error"in i)throw new he(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=ne(s,oc);if("error"in i)throw new he(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getTransaction",r),i=ne(s,io);if("error"in i)throw new he(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const c=new Yt(o.transaction.message),f=o.transaction.signatures;return{...o,transaction:ge.populate(c,f)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=ne(s,Pi);if("error"in i)throw new he(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,t){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const c=ne(o,Pi);if("error"in c)throw new he(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(e,t,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(t--,!(t<=0||t<i));)try{const f=await this.getConfirmedBlockSignatures(t,"finalized");f.signatures.length>0&&(s.until=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const f=await this.getConfirmedBlockSignatures(r);f.signatures.length>0&&(s.before=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(f=>f.signature)}async getConfirmedSignaturesForAddress2(e,t,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=ne(i,P0);if("error"in o)throw new he(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=await this._rpcRequest("getSignaturesForAddress",s),o=ne(i,T0);if("error"in o)throw new he(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:r,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=new Eo({key:e,state:Eo.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(e,t){const{context:r,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=as.fromAccountData(s.data)),{context:r,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,t){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),s=ne(r,cy);if("error"in s)throw new he(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await on(100);const r=Date.now()-this._blockhashInfo.lastFetch>=kl;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await on(yl/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=Fe(e),s=this._buildArgs([],t,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=ne(i,Je($()));if("error"in o)throw new he(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,r){if("message"in e){const R=e.serialize(),C=pe.Buffer.from(R).toString("base64");if(Array.isArray(t)||r!==void 0)throw new Error("Invalid arguments");const D=t||{};D.encoding="base64","commitment"in D||(D.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(D.innerInstructions=t.innerInstructions);const V=[C,D],W=await this._rpcRequest("simulateTransaction",V),X=ne(W,ic);if("error"in X)throw new Error("failed to simulate transaction: "+X.error.message);return X.result}let s;if(e instanceof ge){let B=e;s=new ge,s.feePayer=B.feePayer,s.instructions=e.instructions,s.nonceInfo=B.nonceInfo,s.signatures=B.signatures}else s=ge.populate(e),s._message=s._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(s.nonceInfo&&i)s.sign(...i);else{let B=this._disableBlockhashCaching;for(;;){const R=await this._blockhashWithExpiryBlockHeight(B);if(s.lastValidBlockHeight=R.lastValidBlockHeight,s.recentBlockhash=R.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const C=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(C)&&!this._blockhashInfo.transactionSignatures.includes(C)){this._blockhashInfo.simulatedSignatures.push(C);break}else B=!0}}const o=s._compile(),c=o.serialize(),m=s._serialize(c).toString("base64"),b={encoding:"base64",commitment:this.commitment};if(r){const B=(Array.isArray(r)?r:o.nonProgramIds()).map(R=>R.toBase58());b.accounts={encoding:"base64",addresses:B}}i&&(b.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(b.innerInstructions=t.innerInstructions);const A=[m,b],v=await this._rpcRequest("simulateTransaction",A),w=ne(v,ic);if("error"in w){let B;if("data"in w.error&&(B=w.error.data.logs,B&&Array.isArray(B))){const R=`
    `,C=R+B.join(R);console.error(w.error.message,C)}throw new ui({action:"simulate",signature:"",transactionMessage:w.error.message,logs:B})}return w.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=c.lastValidBlockHeight,e.recentBlockhash=c.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const f=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(f))o=!0;else{this._blockhashInfo.transactionSignatures.push(f);break}}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,t){const r=we(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},s=t&&t.skipPreflight,i=s===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(r.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(r.minContextSlot=t.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[e,r],c=await this._rpcRequest("sendTransaction",o),f=ne(c,uy);if("error"in f){let m;throw"data"in f.error&&(m=f.error.data.logs),new ui({action:s?"send":"simulate",signature:"",transactionMessage:f.error.message,logs:m})}return f.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,r])=>{this._setSubscription(t,{...r,state:"pending"})})}_setSubscription(e,t){const r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(i=>{try{i(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return s.add(t),()=>{s.delete(t),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const c=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=s.callbacks,await this._updateSubscriptions()}catch(c){if(console.error(`Received ${c instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:c}),!t())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(c){if(c instanceof Error&&console.error(`${o} error:`,c.message),!t())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(s=>{try{s(...t)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:t,subscription:r}=ne(e,C0);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,s=tc([e.method,t]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];Ie(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:s,config:i}=Fe(r),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=ne(e,O0);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,s){const{commitment:i,config:o}=Fe(r),c=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:nc(s)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},c)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=ne(e,fy);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=ne(e,N0);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=ne(e,D0);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,s){const i=t||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,r,s){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,s)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=ne(e,K0);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const s=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,c)=>{if(o.type==="status"){t(o.result,c);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,t,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),c=this._makeSubscription({callback:(f,m)=>{t(f,m);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return c}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=ne(e,W0);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class nr{constructor(e){this._keypair=void 0,this._keypair=e??Xa()}static generate(){return new nr(Xa())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const r=e.slice(32,64);if(!t||!t.skipValidation){const s=e.slice(0,32),i=Hi(s);for(let o=0;o<32;o++)if(r[o]!==i[o])throw new Error("provided secretKey is invalid")}return new nr({publicKey:r,secretKey:e})}static fromSeed(e){const t=Hi(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new nr({publicKey:t,secretKey:r})}get publicKey(){return new J(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const pr=Object.freeze({CreateLookupTable:{index:0,layout:L.struct([L.u32("instruction"),Fn("recentSlot"),L.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:L.struct([L.u32("instruction")])},ExtendLookupTable:{index:2,layout:L.struct([L.u32("instruction"),Fn(),L.seq(ke(),L.offset(L.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:L.struct([L.u32("instruction")])},CloseLookupTable:{index:4,layout:L.struct([L.u32("instruction")])}});class py{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=L.u32("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(pr))if(o.index==r){s=i;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=Re(pr.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=Re(pr.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(r=>new J(r))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Qo.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Qo{constructor(){}static createLookupTable(e){const[t,r]=J.findProgramAddressSync([e.authority.toBuffer(),Hu().encode(e.recentSlot)],this.programId),s=pr.CreateLookupTable,i=Ae(s,{recentSlot:BigInt(e.recentSlot),bumpSeed:r}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:je.programId,isSigner:!1,isWritable:!1}];return[new me({programId:this.programId,keys:o,data:i}),t]}static freezeLookupTable(e){const t=pr.FreezeLookupTable,r=Ae(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new me({programId:this.programId,keys:s,data:r})}static extendLookupTable(e){const t=pr.ExtendLookupTable,r=Ae(t,{addresses:e.addresses.map(i=>i.toBytes())}),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&s.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:je.programId,isSigner:!1,isWritable:!1}),new me({programId:this.programId,keys:s,data:r})}static deactivateLookupTable(e){const t=pr.DeactivateLookupTable,r=Ae(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new me({programId:this.programId,keys:s,data:r})}static closeLookupTable(e){const t=pr.CloseLookupTable,r=Ae(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new me({programId:this.programId,keys:s,data:r})}}Qo.programId=new J("AddressLookupTab1e1111111111111111111111111");class yy{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=L.u8("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(Qt))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:r}=Re(Qt.RequestUnits,e.data);return{units:t,additionalFee:r}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=Re(Qt.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=Re(Qt.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=Re(Qt.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(ea.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Qt=Object.freeze({RequestUnits:{index:0,layout:L.struct([L.u8("instruction"),L.u32("units"),L.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:L.struct([L.u8("instruction"),L.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:L.struct([L.u8("instruction"),L.u32("units")])},SetComputeUnitPrice:{index:3,layout:L.struct([L.u8("instruction"),Fn("microLamports")])}});class ea{constructor(){}static requestUnits(e){const t=Qt.RequestUnits,r=Ae(t,e);return new me({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const t=Qt.RequestHeapFrame,r=Ae(t,e);return new me({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const t=Qt.SetComputeUnitLimit,r=Ae(t,e);return new me({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const t=Qt.SetComputeUnitPrice,r=Ae(t,{microLamports:BigInt(e.microLamports)});return new me({keys:[],programId:this.programId,data:r})}}ea.programId=new J("ComputeBudget111111111111111111111111111111");const ac=64,cc=32,uc=64,lc=L.struct([L.u8("numSignatures"),L.u8("padding"),L.u16("signatureOffset"),L.u16("signatureInstructionIndex"),L.u16("publicKeyOffset"),L.u16("publicKeyInstructionIndex"),L.u16("messageDataOffset"),L.u16("messageDataSize"),L.u16("messageInstructionIndex")]);class ls{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:s,instructionIndex:i}=e;Ie(t.length===cc,`Public Key must be ${cc} bytes but received ${t.length} bytes`),Ie(s.length===uc,`Signature must be ${uc} bytes but received ${s.length} bytes`);const o=lc.span,c=o+t.length,f=c+s.length,m=1,b=pe.Buffer.alloc(f+r.length),A=i??65535;return lc.encode({numSignatures:m,padding:0,signatureOffset:c,signatureInstructionIndex:A,publicKeyOffset:o,publicKeyInstructionIndex:A,messageDataOffset:f,messageDataSize:r.length,messageInstructionIndex:A},b),b.fill(t,o),b.fill(s,c),b.fill(r,f),new me({keys:[],programId:ls.programId,data:b})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:s}=e;Ie(t.length===ac,`Private key must be ${ac} bytes but received ${t.length} bytes`);try{const i=nr.fromSecretKey(t),o=i.publicKey.toBytes(),c=qo(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:c,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}ls.programId=new J("Ed25519SigVerify111111111111111111111111111");const gy=(n,e)=>{const t=zo.sign(n,e);return[t.toCompactRawBytes(),t.recovery]};zo.utils.isValidPrivateKey;const my=zo.getPublicKey,fc=32,so=20,hc=64,by=11,oo=L.struct([L.u8("numSignatures"),L.u16("signatureOffset"),L.u8("signatureInstructionIndex"),L.u16("ethAddressOffset"),L.u8("ethAddressInstructionIndex"),L.u16("messageDataOffset"),L.u16("messageDataSize"),L.u8("messageInstructionIndex"),L.blob(20,"ethAddress"),L.blob(64,"signature"),L.u8("recoveryId")]);class Un{constructor(){}static publicKeyToEthAddress(e){Ie(e.length===hc,`Public key must be ${hc} bytes but received ${e.length} bytes`);try{return pe.Buffer.from(Ya(we(e))).slice(-so)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:s,recoveryId:i,instructionIndex:o}=e;return Un.createInstructionWithEthAddress({ethAddress:Un.publicKeyToEthAddress(t),message:r,signature:s,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:r,signature:s,recoveryId:i,instructionIndex:o=0}=e;let c;typeof t=="string"?t.startsWith("0x")?c=pe.Buffer.from(t.substr(2),"hex"):c=pe.Buffer.from(t,"hex"):c=t,Ie(c.length===so,`Address must be ${so} bytes but received ${c.length} bytes`);const f=1+by,m=f,b=f+c.length,A=b+s.length+1,v=1,w=pe.Buffer.alloc(oo.span+r.length);return oo.encode({numSignatures:v,signatureOffset:b,signatureInstructionIndex:o,ethAddressOffset:m,ethAddressInstructionIndex:o,messageDataOffset:A,messageDataSize:r.length,messageInstructionIndex:o,signature:we(s),ethAddress:we(c),recoveryId:i},w),w.fill(we(r),oo.span),new me({keys:[],programId:Un.programId,data:w})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:s}=e;Ie(t.length===fc,`Private key must be ${fc} bytes but received ${t.length} bytes`);try{const i=we(t),o=my(i,!1).slice(1),c=pe.Buffer.from(Ya(we(r))),[f,m]=gy(c,i);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:f,recoveryId:m,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Un.programId=new J("KeccakSecp256k11111111111111111111111111111");var Ml;const Pl=new J("StakeConfig11111111111111111111111111111111");class Tl{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class Ei{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}Ml=Ei;Ei.default=new Ml(0,0,J.default);class wy{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=L.u32("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(St))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:r}=Re(St.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Tl(new J(t.staker),new J(t.withdrawer)),lockup:new Ei(r.unixTimestamp,r.epoch,new J(r.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),Re(St.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:r}=Re(St.Authorize,e.data),s={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new J(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:r,authoritySeed:s,authorityOwner:i}=Re(St.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:s,authorityOwner:new J(i),newAuthorizedPubkey:new J(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Re(St.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Re(St.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Re(St.Withdraw,e.data),r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Re(St.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(fs.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const St=Object.freeze({Initialize:{index:0,layout:L.struct([L.u32("instruction"),Sp(),vp()])},Authorize:{index:1,layout:L.struct([L.u32("instruction"),ke("newAuthorized"),L.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:L.struct([L.u32("instruction")])},Split:{index:3,layout:L.struct([L.u32("instruction"),L.ns64("lamports")])},Withdraw:{index:4,layout:L.struct([L.u32("instruction"),L.ns64("lamports")])},Deactivate:{index:5,layout:L.struct([L.u32("instruction")])},Merge:{index:7,layout:L.struct([L.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:L.struct([L.u32("instruction"),ke("newAuthorized"),L.u32("stakeAuthorizationType"),ln("authoritySeed"),ke("authorityOwner")])}}),ky=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class fs{constructor(){}static initialize(e){const{stakePubkey:t,authorized:r,lockup:s}=e,i=s||Ei.default,o=St.Initialize,c=Ae(o,{authorized:{staker:we(r.staker.toBuffer()),withdrawer:we(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:we(i.custodian.toBuffer())}}),f={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rr,isSigner:!1,isWritable:!1}],programId:this.programId,data:c};return new me(f)}static createAccountWithSeed(e){const t=new ge;t.add(je.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static createAccount(e){const t=new ge;t.add(je.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:r,votePubkey:s}=e,i=St.Delegate,o=Ae(i);return new ge().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:Zt,isSigner:!1,isWritable:!1},{pubkey:Li,isSigner:!1,isWritable:!1},{pubkey:Pl,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(e){const{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:o}=e,c=St.Authorize,f=Ae(c,{newAuthorized:we(s.toBuffer()),stakeAuthorizationType:i.index}),m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Zt,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&m.push({pubkey:o,isSigner:!0,isWritable:!1}),new ge().add({keys:m,programId:this.programId,data:f})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:r,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:c,custodianPubkey:f}=e,m=St.AuthorizeWithSeed,b=Ae(m,{newAuthorized:we(o.toBuffer()),stakeAuthorizationType:c.index,authoritySeed:s,authorityOwner:we(i.toBuffer())}),A=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Zt,isSigner:!1,isWritable:!1}];return f&&A.push({pubkey:f,isSigner:!0,isWritable:!1}),new ge().add({keys:A,programId:this.programId,data:b})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:s,lamports:i}=e,o=St.Split,c=Ae(o,{lamports:i});return new me({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:c})}static split(e,t){const r=new ge;return r.add(je.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,basePubkey:o,seed:c,lamports:f}=e,m=new ge;return m.add(je.allocate({accountPubkey:i,basePubkey:o,seed:c,space:this.space,programId:this.programId})),t&&t>0&&m.add(je.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),m.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,lamports:f}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:s}=e,i=St.Merge,o=Ae(i);return new ge().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Zt,isSigner:!1,isWritable:!1},{pubkey:Li,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:r,toPubkey:s,lamports:i,custodianPubkey:o}=e,c=St.Withdraw,f=Ae(c,{lamports:i}),m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:Zt,isSigner:!1,isWritable:!1},{pubkey:Li,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&m.push({pubkey:o,isSigner:!0,isWritable:!1}),new ge().add({keys:m,programId:this.programId,data:f})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:r}=e,s=St.Deactivate,i=Ae(s);return new ge().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Zt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}fs.programId=new J("Stake11111111111111111111111111111111111111");fs.space=200;class Cl{constructor(e,t,r,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=r,this.commission=s}}class Ey{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=L.u32("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(er))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=Re(er.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new Cl(new J(t.nodePubkey),new J(t.authorizedVoter),new J(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:r}=Re(er.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new J(t),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:r,newAuthorized:s,voteAuthorizationType:i}}=Re(er.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new J(t),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new J(s),voteAuthorizationType:{index:i},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Re(er.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Vn.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const er=Object.freeze({InitializeAccount:{index:0,layout:L.struct([L.u32("instruction"),_p()])},Authorize:{index:1,layout:L.struct([L.u32("instruction"),ke("newAuthorized"),L.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:L.struct([L.u32("instruction"),L.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:L.struct([L.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:L.struct([L.u32("instruction"),Ip()])}}),Ay=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Vn{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:r,voteInit:s}=e,i=er.InitializeAccount,o=Ae(i,{voteInit:{nodePubkey:we(s.nodePubkey.toBuffer()),authorizedVoter:we(s.authorizedVoter.toBuffer()),authorizedWithdrawer:we(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),c={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rr,isSigner:!1,isWritable:!1},{pubkey:Zt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new me(c)}static createAccount(e){const t=new ge;return t.add(je.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:s,voteAuthorizationType:i}=e,o=er.Authorize,c=Ae(o,{newAuthorized:we(s.toBuffer()),voteAuthorizationType:i.index}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Zt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new ge().add({keys:f,programId:this.programId,data:c})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:c}=e,f=er.AuthorizeWithSeed,m=Ae(f,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:we(r.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:we(i.toBuffer()),voteAuthorizationType:o.index}}),b=[{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:Zt,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new ge().add({keys:b,programId:this.programId,data:m})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:s,toPubkey:i}=e,o=er.Withdraw,c=Ae(o,{lamports:s}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new ge().add({keys:f,programId:this.programId,data:c})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Vn.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:s}=e,i=er.UpdateValidatorIdentity,o=Ae(i),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new ge().add({keys:c,programId:this.programId,data:o})}}Vn.programId=new J("Vote111111111111111111111111111111111111111");Vn.space=3762;const Ul=new J("Va1idator1nfo111111111111111111111111111111"),Sy=Q({name:re(),website:de(re()),details:de(re()),iconUrl:de(re()),keybaseUsername:de(re())});class ta{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(Ot(t)!==2)return null;const s=[];for(let i=0;i<2;i++){const o=new J(Lt(t,0,ir)),c=Jt(t)===1;s.push({publicKey:o,isSigner:c})}if(s[0].publicKey.equals(Ul)&&s[1].isSigner){const i=ln().decode(pe.Buffer.from(t)),o=JSON.parse(i);return ju(o,Sy),new ta(s[1].publicKey,o)}return null}}const vy=new J("Vote111111111111111111111111111111111111111"),_y=L.struct([ke("nodePubkey"),ke("authorizedWithdrawer"),L.u8("commission"),L.nu64(),L.seq(L.struct([L.nu64("slot"),L.u32("confirmationCount")]),L.offset(L.u32(),-8),"votes"),L.u8("rootSlotValid"),L.nu64("rootSlot"),L.nu64(),L.seq(L.struct([L.nu64("epoch"),ke("authorizedVoter")]),L.offset(L.u32(),-8),"authorizedVoters"),L.struct([L.seq(L.struct([ke("authorizedPubkey"),L.nu64("epochOfLastAuthorizedSwitch"),L.nu64("targetEpoch")]),32,"buf"),L.nu64("idx"),L.u8("isEmpty")],"priorVoters"),L.nu64(),L.seq(L.struct([L.nu64("epoch"),L.nu64("credits"),L.nu64("prevCredits")]),L.offset(L.u32(),-8),"epochCredits"),L.struct([L.nu64("slot"),L.nu64("timestamp")],"lastTimestamp")]);class ra{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const r=_y.decode(we(e),4);let s=r.rootSlot;return r.rootSlotValid||(s=null),new ra({nodePubkey:new J(r.nodePubkey),authorizedWithdrawer:new J(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:s,authorizedVoters:r.authorizedVoters.map(Iy),priorVoters:By(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function Iy({authorizedVoter:n,epoch:e}){return{epoch:e,authorizedVoter:new J(n)}}function dc({authorizedPubkey:n,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new J(n),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function By({buf:n,idx:e,isEmpty:t}){return t?[]:[...n.slice(e+1).map(dc),...n.slice(0,e).map(dc)]}const pc={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function xy(n,e){const t=e===!1?"http":"https";if(!n)return pc[t].devnet;const r=pc[t][n];if(!r)throw new Error(`Unknown ${t} cluster: ${n}`);return r}async function Ry(n,e,t,r){let s,i;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(s=t,i=r):i=t;const o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},c=await n.sendRawTransaction(e,o),f=i&&i.commitment,b=(await(s?n.confirmTransaction(s,f):n.confirmTransaction(c,f))).value;if(b.err)throw c!=null?new ui({action:o?.skipPreflight?"send":"simulate",signature:c,transactionMessage:`Status: (${JSON.stringify(b)})`}):new Error(`Raw transaction ${c} failed (${JSON.stringify(b)})`);return c}const My=1e9,Py=Object.freeze(Object.defineProperty({__proto__:null,Account:kp,AddressLookupTableAccount:Eo,AddressLookupTableInstruction:py,AddressLookupTableProgram:Qo,Authorized:Tl,BLOCKHASH_CACHE_TIMEOUT_MS:kl,BPF_LOADER_DEPRECATED_PROGRAM_ID:Ep,BPF_LOADER_PROGRAM_ID:Dp,BpfLoader:Kp,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:Qt,ComputeBudgetInstruction:yy,ComputeBudgetProgram:ea,Connection:dy,Ed25519Program:ls,Enum:bp,EpochSchedule:bl,FeeCalculatorLayout:gl,Keypair:nr,LAMPORTS_PER_SOL:My,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:pr,Loader:yn,Lockup:Ei,MAX_SEED_LENGTH:hl,Message:Yt,MessageAccountKeys:ci,MessageV0:pn,NONCE_ACCOUNT_LENGTH:ko,NonceAccount:as,PACKET_DATA_SIZE:_r,PUBLIC_KEY_LENGTH:ir,PublicKey:J,SIGNATURE_LENGTH_IN_BYTES:ai,SOLANA_SCHEMA:ti,STAKE_CONFIG_ID:Pl,STAKE_INSTRUCTION_LAYOUTS:St,SYSTEM_INSTRUCTION_LAYOUTS:De,SYSVAR_CLOCK_PUBKEY:Zt,SYSVAR_EPOCH_SCHEDULE_PUBKEY:Pp,SYSVAR_INSTRUCTIONS_PUBKEY:Tp,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Oi,SYSVAR_RENT_PUBKEY:rr,SYSVAR_REWARDS_PUBKEY:Cp,SYSVAR_SLOT_HASHES_PUBKEY:Up,SYSVAR_SLOT_HISTORY_PUBKEY:Op,SYSVAR_STAKE_HISTORY_PUBKEY:Li,Secp256k1Program:Un,SendTransactionError:ui,SolanaJSONRPCError:he,SolanaJSONRPCErrorCode:Lp,StakeAuthorizationLayout:ky,StakeInstruction:wy,StakeProgram:fs,Struct:Vo,SystemInstruction:Np,SystemProgram:je,Transaction:ge,TransactionExpiredBlockheightExceededError:$o,TransactionExpiredNonceInvalidError:Mn,TransactionExpiredTimeoutError:Ho,TransactionInstruction:me,TransactionMessage:Yo,TransactionStatus:fr,VALIDATOR_INFO_KEY:Ul,VERSION_PREFIX_MASK:ss,VOTE_PROGRAM_ID:vy,ValidatorInfo:ta,VersionedMessage:jo,VersionedTransaction:Go,VoteAccount:ra,VoteAuthorizationLayout:Ay,VoteInit:Cl,VoteInstruction:Ey,VoteProgram:Vn,clusterApiUrl:xy,sendAndConfirmRawTransaction:Ry,sendAndConfirmTransaction:ji},Symbol.toStringTag,{value:"Module"})),Me=di(Py);var ao={},yc;function na(){return yc||(yc=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ERROR_ACCOUNT_NOT_FOUND=n.ERROR_DEPRECATED_ACCOUNT_DATA=n.ERROR_INVALID_ACCOUNT_DATA=n.ERROR_INVALID_OWNER=n.MetaplexError=n.ErrorCode=void 0;var e;(function(c){c[c.ERROR_INVALID_OWNER=0]="ERROR_INVALID_OWNER",c[c.ERROR_INVALID_ACCOUNT_DATA=1]="ERROR_INVALID_ACCOUNT_DATA",c[c.ERROR_DEPRECATED_ACCOUNT_DATA=2]="ERROR_DEPRECATED_ACCOUNT_DATA",c[c.ERROR_ACCOUNT_NOT_FOUND=3]="ERROR_ACCOUNT_NOT_FOUND"})(e=n.ErrorCode||(n.ErrorCode={}));class t extends Error{constructor(f,m){super(m),this.errorCode=f}}n.MetaplexError=t;const r=()=>new t(e.ERROR_INVALID_OWNER,"Invalid owner");n.ERROR_INVALID_OWNER=r;const s=()=>new t(e.ERROR_INVALID_ACCOUNT_DATA,"Invalid data");n.ERROR_INVALID_ACCOUNT_DATA=s;const i=()=>new t(e.ERROR_DEPRECATED_ACCOUNT_DATA,"Account data is deprecated");n.ERROR_DEPRECATED_ACCOUNT_DATA=i;const o=c=>new t(e.ERROR_ACCOUNT_NOT_FOUND,`Unable to find account: ${c}`);n.ERROR_ACCOUNT_NOT_FOUND=o}(ao)),ao}var gc;function Ol(){if(gc)return Cr;gc=1;var n=Cr&&Cr.__awaiter||function(i,o,c,f){function m(b){return b instanceof c?b:new c(function(A){A(b)})}return new(c||(c=Promise))(function(b,A){function v(R){try{B(f.next(R))}catch(C){A(C)}}function w(R){try{B(f.throw(R))}catch(C){A(C)}}function B(R){R.done?b(R.value):m(R.value).then(v,w)}B((f=f.apply(i,o||[])).next())})};Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.Account=void 0;const e=Me,t=mr(),r=na();class s{constructor(o,c){this.pubkey=new e.PublicKey(o),this.info=c}static from(o){return new this(o.pubkey,o.info)}static load(o,c){return n(this,void 0,void 0,function*(){const f=yield s.getInfo(o,c);return new this(c,f)})}static isCompatible(o){throw new Error("method 'isCompatible' is not implemented")}static getInfo(o,c){return n(this,void 0,void 0,function*(){const f=yield o.getAccountInfo(new e.PublicKey(c));if(!f)throw(0,r.ERROR_ACCOUNT_NOT_FOUND)(c);return Object.assign(Object.assign({},f),{data:t.Buffer.from(f?.data)})})}static getInfos(o,c,f="recent"){return n(this,void 0,void 0,function*(){const b=[];for(let v=0;v<c.length;v+=99)b.push(s.getMultipleAccounts(o,c.slice(v,Math.min(c.length,v+99)),f));const A=new Map;return(yield Promise.all(b)).forEach(v=>{var w;return[...(w=v?.entries())!==null&&w!==void 0?w:[]].forEach(([B,R])=>A.set(B,R))}),A})}static getMultipleAccounts(o,c,f){return n(this,void 0,void 0,function*(){const m=o._buildArgs([c.map(v=>v.toString())],f,"base64"),b=yield o._rpcRequest("getMultipleAccounts",m);if(b.error)throw new Error("failed to get info about accounts "+b.error.message);return b.result.value?b.result.value.filter(Boolean).map(v=>Object.assign(Object.assign({},v),{data:t.Buffer.from(v.data[0],"base64")})).reduce((v,w,B)=>(v.set(c[B],w),v),new Map):void 0})}assertOwner(o){var c;return(c=this.info)===null||c===void 0?void 0:c.owner.equals(new e.PublicKey(o))}toJSON(){var o,c,f,m,b;return{pubkey:this.pubkey.toString(),info:{executable:!!(!((o=this.info)===null||o===void 0)&&o.executable),owner:!((c=this.info)===null||c===void 0)&&c.owner?new e.PublicKey((f=this.info)===null||f===void 0?void 0:f.owner):null,lamports:(m=this.info)===null||m===void 0?void 0:m.lamports,data:(b=this.info)===null||b===void 0?void 0:b.data.toJSON()},data:this.data}}toString(){return JSON.stringify(this.toJSON())}}return Cr.Account=s,Cr}var Yn={};function fi(n){"@babel/helpers - typeof";return fi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fi(n)}function Ty(n,e){if(fi(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(fi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Cy(n){var e=Ty(n,"string");return fi(e)=="symbol"?e:e+""}function Gn(n,e,t){return(e=Cy(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Be={},hs={};hs.byteLength=Ly;hs.toByteArray=Fy;hs.fromByteArray=Wy;var tr=[],qt=[],Uy=typeof Uint8Array<"u"?Uint8Array:Array,co="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var In=0,Oy=co.length;In<Oy;++In)tr[In]=co[In],qt[co.charCodeAt(In)]=In;qt[45]=62;qt[95]=63;function Ll(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function Ly(n){var e=Ll(n),t=e[0],r=e[1];return(t+r)*3/4-r}function Ny(n,e,t){return(e+t)*3/4-t}function Fy(n){var e,t=Ll(n),r=t[0],s=t[1],i=new Uy(Ny(n,r,s)),o=0,c=s>0?r-4:r,f;for(f=0;f<c;f+=4)e=qt[n.charCodeAt(f)]<<18|qt[n.charCodeAt(f+1)]<<12|qt[n.charCodeAt(f+2)]<<6|qt[n.charCodeAt(f+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=qt[n.charCodeAt(f)]<<2|qt[n.charCodeAt(f+1)]>>4,i[o++]=e&255),s===1&&(e=qt[n.charCodeAt(f)]<<10|qt[n.charCodeAt(f+1)]<<4|qt[n.charCodeAt(f+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function Dy(n){return tr[n>>18&63]+tr[n>>12&63]+tr[n>>6&63]+tr[n&63]}function Ky(n,e,t){for(var r,s=[],i=e;i<t;i+=3)r=(n[i]<<16&16711680)+(n[i+1]<<8&65280)+(n[i+2]&255),s.push(Dy(r));return s.join("")}function Wy(n){for(var e,t=n.length,r=t%3,s=[],i=16383,o=0,c=t-r;o<c;o+=i)s.push(Ky(n,o,o+i>c?c:o+i));return r===1?(e=n[t-1],s.push(tr[e>>2]+tr[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],s.push(tr[e>>10]+tr[e>>4&63]+tr[e<<2&63]+"=")),s.join("")}var ia={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ia.read=function(n,e,t,r,s){var i,o,c=s*8-r-1,f=(1<<c)-1,m=f>>1,b=-7,A=t?s-1:0,v=t?-1:1,w=n[e+A];for(A+=v,i=w&(1<<-b)-1,w>>=-b,b+=c;b>0;i=i*256+n[e+A],A+=v,b-=8);for(o=i&(1<<-b)-1,i>>=-b,b+=r;b>0;o=o*256+n[e+A],A+=v,b-=8);if(i===0)i=1-m;else{if(i===f)return o?NaN:(w?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-m}return(w?-1:1)*o*Math.pow(2,i-r)};ia.write=function(n,e,t,r,s,i){var o,c,f,m=i*8-s-1,b=(1<<m)-1,A=b>>1,v=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=r?0:i-1,B=r?1:-1,R=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,o=b):(o=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-o))<1&&(o--,f*=2),o+A>=1?e+=v/f:e+=v*Math.pow(2,1-A),e*f>=2&&(o++,f/=2),o+A>=b?(c=0,o=b):o+A>=1?(c=(e*f-1)*Math.pow(2,s),o=o+A):(c=e*Math.pow(2,A-1)*Math.pow(2,s),o=0));s>=8;n[t+w]=c&255,w+=B,c/=256,s-=8);for(o=o<<s|c,m+=s;m>0;n[t+w]=o&255,w+=B,o/=256,m-=8);n[t+w-B]|=R*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=hs,t=ia,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=c,n.SlowBuffer=V,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const h=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(h,a),h.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(h){if(h>s)throw new RangeError('The value "'+h+'" is invalid for option "size"');const a=new Uint8Array(h);return Object.setPrototypeOf(a,c.prototype),a}function c(h,a,u){if(typeof h=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(h)}return f(h,a,u)}c.poolSize=8192;function f(h,a,u){if(typeof h=="string")return v(h,a);if(ArrayBuffer.isView(h))return B(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(qe(h,ArrayBuffer)||h&&qe(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(qe(h,SharedArrayBuffer)||h&&qe(h.buffer,SharedArrayBuffer)))return R(h,a,u);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const g=h.valueOf&&h.valueOf();if(g!=null&&g!==h)return c.from(g,a,u);const S=C(h);if(S)return S;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return c.from(h[Symbol.toPrimitive]("string"),a,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}c.from=function(h,a,u){return f(h,a,u)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function m(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function b(h,a,u){return m(h),h<=0?o(h):a!==void 0?typeof u=="string"?o(h).fill(a,u):o(h).fill(a):o(h)}c.alloc=function(h,a,u){return b(h,a,u)};function A(h){return m(h),o(h<0?0:D(h)|0)}c.allocUnsafe=function(h){return A(h)},c.allocUnsafeSlow=function(h){return A(h)};function v(h,a){if((typeof a!="string"||a==="")&&(a="utf8"),!c.isEncoding(a))throw new TypeError("Unknown encoding: "+a);const u=W(h,a)|0;let g=o(u);const S=g.write(h,a);return S!==u&&(g=g.slice(0,S)),g}function w(h){const a=h.length<0?0:D(h.length)|0,u=o(a);for(let g=0;g<a;g+=1)u[g]=h[g]&255;return u}function B(h){if(qe(h,Uint8Array)){const a=new Uint8Array(h);return R(a.buffer,a.byteOffset,a.byteLength)}return w(h)}function R(h,a,u){if(a<0||h.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<a+(u||0))throw new RangeError('"length" is outside of buffer bounds');let g;return a===void 0&&u===void 0?g=new Uint8Array(h):u===void 0?g=new Uint8Array(h,a):g=new Uint8Array(h,a,u),Object.setPrototypeOf(g,c.prototype),g}function C(h){if(c.isBuffer(h)){const a=D(h.length)|0,u=o(a);return u.length===0||h.copy(u,0,0,a),u}if(h.length!==void 0)return typeof h.length!="number"||Ue(h.length)?o(0):w(h);if(h.type==="Buffer"&&Array.isArray(h.data))return w(h.data)}function D(h){if(h>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return h|0}function V(h){return+h!=h&&(h=0),c.alloc(+h)}c.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==c.prototype},c.compare=function(a,u){if(qe(a,Uint8Array)&&(a=c.from(a,a.offset,a.byteLength)),qe(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),!c.isBuffer(a)||!c.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===u)return 0;let g=a.length,S=u.length;for(let M=0,O=Math.min(g,S);M<O;++M)if(a[M]!==u[M]){g=a[M],S=u[M];break}return g<S?-1:S<g?1:0},c.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(a,u){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return c.alloc(0);let g;if(u===void 0)for(u=0,g=0;g<a.length;++g)u+=a[g].length;const S=c.allocUnsafe(u);let M=0;for(g=0;g<a.length;++g){let O=a[g];if(qe(O,Uint8Array))M+O.length>S.length?(c.isBuffer(O)||(O=c.from(O)),O.copy(S,M)):Uint8Array.prototype.set.call(S,O,M);else if(c.isBuffer(O))O.copy(S,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=O.length}return S};function W(h,a){if(c.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||qe(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);const u=h.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&u===0)return 0;let S=!1;for(;;)switch(a){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return Ce(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return Ne(h).length;default:if(S)return g?-1:Ce(h).length;a=(""+a).toLowerCase(),S=!0}}c.byteLength=W;function X(h,a,u){let g=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,a>>>=0,u<=a))return"";for(h||(h="utf8");;)switch(h){case"hex":return U(this,a,u);case"utf8":case"utf-8":return l(this,a,u);case"ascii":return x(this,a,u);case"latin1":case"binary":return P(this,a,u);case"base64":return E(this,a,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,a,u);default:if(g)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),g=!0}}c.prototype._isBuffer=!0;function Y(h,a,u){const g=h[a];h[a]=h[u],h[u]=g}c.prototype.swap16=function(){const a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<a;u+=2)Y(this,u,u+1);return this},c.prototype.swap32=function(){const a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<a;u+=4)Y(this,u,u+3),Y(this,u+1,u+2);return this},c.prototype.swap64=function(){const a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<a;u+=8)Y(this,u,u+7),Y(this,u+1,u+6),Y(this,u+2,u+5),Y(this,u+3,u+4);return this},c.prototype.toString=function(){const a=this.length;return a===0?"":arguments.length===0?l(this,0,a):X.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(a){if(!c.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:c.compare(this,a)===0},c.prototype.inspect=function(){let a="";const u=n.INSPECT_MAX_BYTES;return a=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(a+=" ... "),"<Buffer "+a+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(a,u,g,S,M){if(qe(a,Uint8Array)&&(a=c.from(a,a.offset,a.byteLength)),!c.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(u===void 0&&(u=0),g===void 0&&(g=a?a.length:0),S===void 0&&(S=0),M===void 0&&(M=this.length),u<0||g>a.length||S<0||M>this.length)throw new RangeError("out of range index");if(S>=M&&u>=g)return 0;if(S>=M)return-1;if(u>=g)return 1;if(u>>>=0,g>>>=0,S>>>=0,M>>>=0,this===a)return 0;let O=M-S,ie=g-u;const fe=Math.min(O,ie),le=this.slice(S,M),ye=a.slice(u,g);for(let se=0;se<fe;++se)if(le[se]!==ye[se]){O=le[se],ie=ye[se];break}return O<ie?-1:ie<O?1:0};function Z(h,a,u,g,S){if(h.length===0)return-1;if(typeof u=="string"?(g=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,Ue(u)&&(u=S?0:h.length-1),u<0&&(u=h.length+u),u>=h.length){if(S)return-1;u=h.length-1}else if(u<0)if(S)u=0;else return-1;if(typeof a=="string"&&(a=c.from(a,g)),c.isBuffer(a))return a.length===0?-1:oe(h,a,u,g,S);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?S?Uint8Array.prototype.indexOf.call(h,a,u):Uint8Array.prototype.lastIndexOf.call(h,a,u):oe(h,[a],u,g,S);throw new TypeError("val must be string, number or Buffer")}function oe(h,a,u,g,S){let M=1,O=h.length,ie=a.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(h.length<2||a.length<2)return-1;M=2,O/=2,ie/=2,u/=2}function fe(ye,se){return M===1?ye[se]:ye.readUInt16BE(se*M)}let le;if(S){let ye=-1;for(le=u;le<O;le++)if(fe(h,le)===fe(a,ye===-1?0:le-ye)){if(ye===-1&&(ye=le),le-ye+1===ie)return ye*M}else ye!==-1&&(le-=le-ye),ye=-1}else for(u+ie>O&&(u=O-ie),le=u;le>=0;le--){let ye=!0;for(let se=0;se<ie;se++)if(fe(h,le+se)!==fe(a,se)){ye=!1;break}if(ye)return le}return-1}c.prototype.includes=function(a,u,g){return this.indexOf(a,u,g)!==-1},c.prototype.indexOf=function(a,u,g){return Z(this,a,u,g,!0)},c.prototype.lastIndexOf=function(a,u,g){return Z(this,a,u,g,!1)};function ee(h,a,u,g){u=Number(u)||0;const S=h.length-u;g?(g=Number(g),g>S&&(g=S)):g=S;const M=a.length;g>M/2&&(g=M/2);let O;for(O=0;O<g;++O){const ie=parseInt(a.substr(O*2,2),16);if(Ue(ie))return O;h[u+O]=ie}return O}function F(h,a,u,g){return xe(Ce(a,h.length-u),h,u,g)}function K(h,a,u,g){return xe(ze(a),h,u,g)}function q(h,a,u,g){return xe(Ne(a),h,u,g)}function H(h,a,u,g){return xe(En(a,h.length-u),h,u,g)}c.prototype.write=function(a,u,g,S){if(u===void 0)S="utf8",g=this.length,u=0;else if(g===void 0&&typeof u=="string")S=u,g=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(g)?(g=g>>>0,S===void 0&&(S="utf8")):(S=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const M=this.length-u;if((g===void 0||g>M)&&(g=M),a.length>0&&(g<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");S||(S="utf8");let O=!1;for(;;)switch(S){case"hex":return ee(this,a,u,g);case"utf8":case"utf-8":return F(this,a,u,g);case"ascii":case"latin1":case"binary":return K(this,a,u,g);case"base64":return q(this,a,u,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,a,u,g);default:if(O)throw new TypeError("Unknown encoding: "+S);S=(""+S).toLowerCase(),O=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(h,a,u){return a===0&&u===h.length?e.fromByteArray(h):e.fromByteArray(h.slice(a,u))}function l(h,a,u){u=Math.min(h.length,u);const g=[];let S=a;for(;S<u;){const M=h[S];let O=null,ie=M>239?4:M>223?3:M>191?2:1;if(S+ie<=u){let fe,le,ye,se;switch(ie){case 1:M<128&&(O=M);break;case 2:fe=h[S+1],(fe&192)===128&&(se=(M&31)<<6|fe&63,se>127&&(O=se));break;case 3:fe=h[S+1],le=h[S+2],(fe&192)===128&&(le&192)===128&&(se=(M&15)<<12|(fe&63)<<6|le&63,se>2047&&(se<55296||se>57343)&&(O=se));break;case 4:fe=h[S+1],le=h[S+2],ye=h[S+3],(fe&192)===128&&(le&192)===128&&(ye&192)===128&&(se=(M&15)<<18|(fe&63)<<12|(le&63)<<6|ye&63,se>65535&&se<1114112&&(O=se))}}O===null?(O=65533,ie=1):O>65535&&(O-=65536,g.push(O>>>10&1023|55296),O=56320|O&1023),g.push(O),S+=ie}return k(g)}const y=4096;function k(h){const a=h.length;if(a<=y)return String.fromCharCode.apply(String,h);let u="",g=0;for(;g<a;)u+=String.fromCharCode.apply(String,h.slice(g,g+=y));return u}function x(h,a,u){let g="";u=Math.min(h.length,u);for(let S=a;S<u;++S)g+=String.fromCharCode(h[S]&127);return g}function P(h,a,u){let g="";u=Math.min(h.length,u);for(let S=a;S<u;++S)g+=String.fromCharCode(h[S]);return g}function U(h,a,u){const g=h.length;(!a||a<0)&&(a=0),(!u||u<0||u>g)&&(u=g);let S="";for(let M=a;M<u;++M)S+=Ve[h[M]];return S}function N(h,a,u){const g=h.slice(a,u);let S="";for(let M=0;M<g.length-1;M+=2)S+=String.fromCharCode(g[M]+g[M+1]*256);return S}c.prototype.slice=function(a,u){const g=this.length;a=~~a,u=u===void 0?g:~~u,a<0?(a+=g,a<0&&(a=0)):a>g&&(a=g),u<0?(u+=g,u<0&&(u=0)):u>g&&(u=g),u<a&&(u=a);const S=this.subarray(a,u);return Object.setPrototypeOf(S,c.prototype),S};function I(h,a,u){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+a>u)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(a,u,g){a=a>>>0,u=u>>>0,g||I(a,u,this.length);let S=this[a],M=1,O=0;for(;++O<u&&(M*=256);)S+=this[a+O]*M;return S},c.prototype.readUintBE=c.prototype.readUIntBE=function(a,u,g){a=a>>>0,u=u>>>0,g||I(a,u,this.length);let S=this[a+--u],M=1;for(;u>0&&(M*=256);)S+=this[a+--u]*M;return S},c.prototype.readUint8=c.prototype.readUInt8=function(a,u){return a=a>>>0,u||I(a,1,this.length),this[a]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(a,u){return a=a>>>0,u||I(a,2,this.length),this[a]|this[a+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(a,u){return a=a>>>0,u||I(a,2,this.length),this[a]<<8|this[a+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(a,u){return a=a>>>0,u||I(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(a,u){return a=a>>>0,u||I(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},c.prototype.readBigUInt64LE=Qe(function(a){a=a>>>0,kt(a,"offset");const u=this[a],g=this[a+7];(u===void 0||g===void 0)&&ve(a,this.length-8);const S=u+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24,M=this[++a]+this[++a]*2**8+this[++a]*2**16+g*2**24;return BigInt(S)+(BigInt(M)<<BigInt(32))}),c.prototype.readBigUInt64BE=Qe(function(a){a=a>>>0,kt(a,"offset");const u=this[a],g=this[a+7];(u===void 0||g===void 0)&&ve(a,this.length-8);const S=u*2**24+this[++a]*2**16+this[++a]*2**8+this[++a],M=this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+g;return(BigInt(S)<<BigInt(32))+BigInt(M)}),c.prototype.readIntLE=function(a,u,g){a=a>>>0,u=u>>>0,g||I(a,u,this.length);let S=this[a],M=1,O=0;for(;++O<u&&(M*=256);)S+=this[a+O]*M;return M*=128,S>=M&&(S-=Math.pow(2,8*u)),S},c.prototype.readIntBE=function(a,u,g){a=a>>>0,u=u>>>0,g||I(a,u,this.length);let S=u,M=1,O=this[a+--S];for(;S>0&&(M*=256);)O+=this[a+--S]*M;return M*=128,O>=M&&(O-=Math.pow(2,8*u)),O},c.prototype.readInt8=function(a,u){return a=a>>>0,u||I(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},c.prototype.readInt16LE=function(a,u){a=a>>>0,u||I(a,2,this.length);const g=this[a]|this[a+1]<<8;return g&32768?g|4294901760:g},c.prototype.readInt16BE=function(a,u){a=a>>>0,u||I(a,2,this.length);const g=this[a+1]|this[a]<<8;return g&32768?g|4294901760:g},c.prototype.readInt32LE=function(a,u){return a=a>>>0,u||I(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},c.prototype.readInt32BE=function(a,u){return a=a>>>0,u||I(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},c.prototype.readBigInt64LE=Qe(function(a){a=a>>>0,kt(a,"offset");const u=this[a],g=this[a+7];(u===void 0||g===void 0)&&ve(a,this.length-8);const S=this[a+4]+this[a+5]*2**8+this[a+6]*2**16+(g<<24);return(BigInt(S)<<BigInt(32))+BigInt(u+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24)}),c.prototype.readBigInt64BE=Qe(function(a){a=a>>>0,kt(a,"offset");const u=this[a],g=this[a+7];(u===void 0||g===void 0)&&ve(a,this.length-8);const S=(u<<24)+this[++a]*2**16+this[++a]*2**8+this[++a];return(BigInt(S)<<BigInt(32))+BigInt(this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+g)}),c.prototype.readFloatLE=function(a,u){return a=a>>>0,u||I(a,4,this.length),t.read(this,a,!0,23,4)},c.prototype.readFloatBE=function(a,u){return a=a>>>0,u||I(a,4,this.length),t.read(this,a,!1,23,4)},c.prototype.readDoubleLE=function(a,u){return a=a>>>0,u||I(a,8,this.length),t.read(this,a,!0,52,8)},c.prototype.readDoubleBE=function(a,u){return a=a>>>0,u||I(a,8,this.length),t.read(this,a,!1,52,8)};function d(h,a,u,g,S,M){if(!c.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>S||a<M)throw new RangeError('"value" argument is out of bounds');if(u+g>h.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(a,u,g,S){if(a=+a,u=u>>>0,g=g>>>0,!S){const ie=Math.pow(2,8*g)-1;d(this,a,u,g,ie,0)}let M=1,O=0;for(this[u]=a&255;++O<g&&(M*=256);)this[u+O]=a/M&255;return u+g},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(a,u,g,S){if(a=+a,u=u>>>0,g=g>>>0,!S){const ie=Math.pow(2,8*g)-1;d(this,a,u,g,ie,0)}let M=g-1,O=1;for(this[u+M]=a&255;--M>=0&&(O*=256);)this[u+M]=a/O&255;return u+g},c.prototype.writeUint8=c.prototype.writeUInt8=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,1,255,0),this[u]=a&255,u+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,2,65535,0),this[u]=a&255,this[u+1]=a>>>8,u+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,2,65535,0),this[u]=a>>>8,this[u+1]=a&255,u+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,4,4294967295,0),this[u+3]=a>>>24,this[u+2]=a>>>16,this[u+1]=a>>>8,this[u]=a&255,u+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,4,4294967295,0),this[u]=a>>>24,this[u+1]=a>>>16,this[u+2]=a>>>8,this[u+3]=a&255,u+4};function p(h,a,u,g,S){Pe(a,g,S,h,u,7);let M=Number(a&BigInt(4294967295));h[u++]=M,M=M>>8,h[u++]=M,M=M>>8,h[u++]=M,M=M>>8,h[u++]=M;let O=Number(a>>BigInt(32)&BigInt(4294967295));return h[u++]=O,O=O>>8,h[u++]=O,O=O>>8,h[u++]=O,O=O>>8,h[u++]=O,u}function _(h,a,u,g,S){Pe(a,g,S,h,u,7);let M=Number(a&BigInt(4294967295));h[u+7]=M,M=M>>8,h[u+6]=M,M=M>>8,h[u+5]=M,M=M>>8,h[u+4]=M;let O=Number(a>>BigInt(32)&BigInt(4294967295));return h[u+3]=O,O=O>>8,h[u+2]=O,O=O>>8,h[u+1]=O,O=O>>8,h[u]=O,u+8}c.prototype.writeBigUInt64LE=Qe(function(a,u=0){return p(this,a,u,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Qe(function(a,u=0){return _(this,a,u,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(a,u,g,S){if(a=+a,u=u>>>0,!S){const fe=Math.pow(2,8*g-1);d(this,a,u,g,fe-1,-fe)}let M=0,O=1,ie=0;for(this[u]=a&255;++M<g&&(O*=256);)a<0&&ie===0&&this[u+M-1]!==0&&(ie=1),this[u+M]=(a/O>>0)-ie&255;return u+g},c.prototype.writeIntBE=function(a,u,g,S){if(a=+a,u=u>>>0,!S){const fe=Math.pow(2,8*g-1);d(this,a,u,g,fe-1,-fe)}let M=g-1,O=1,ie=0;for(this[u+M]=a&255;--M>=0&&(O*=256);)a<0&&ie===0&&this[u+M+1]!==0&&(ie=1),this[u+M]=(a/O>>0)-ie&255;return u+g},c.prototype.writeInt8=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,1,127,-128),a<0&&(a=255+a+1),this[u]=a&255,u+1},c.prototype.writeInt16LE=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,2,32767,-32768),this[u]=a&255,this[u+1]=a>>>8,u+2},c.prototype.writeInt16BE=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,2,32767,-32768),this[u]=a>>>8,this[u+1]=a&255,u+2},c.prototype.writeInt32LE=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,4,2147483647,-2147483648),this[u]=a&255,this[u+1]=a>>>8,this[u+2]=a>>>16,this[u+3]=a>>>24,u+4},c.prototype.writeInt32BE=function(a,u,g){return a=+a,u=u>>>0,g||d(this,a,u,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[u]=a>>>24,this[u+1]=a>>>16,this[u+2]=a>>>8,this[u+3]=a&255,u+4},c.prototype.writeBigInt64LE=Qe(function(a,u=0){return p(this,a,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Qe(function(a,u=0){return _(this,a,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function T(h,a,u,g,S,M){if(u+g>h.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function z(h,a,u,g,S){return a=+a,u=u>>>0,S||T(h,a,u,4),t.write(h,a,u,g,23,4),u+4}c.prototype.writeFloatLE=function(a,u,g){return z(this,a,u,!0,g)},c.prototype.writeFloatBE=function(a,u,g){return z(this,a,u,!1,g)};function G(h,a,u,g,S){return a=+a,u=u>>>0,S||T(h,a,u,8),t.write(h,a,u,g,52,8),u+8}c.prototype.writeDoubleLE=function(a,u,g){return G(this,a,u,!0,g)},c.prototype.writeDoubleBE=function(a,u,g){return G(this,a,u,!1,g)},c.prototype.copy=function(a,u,g,S){if(!c.isBuffer(a))throw new TypeError("argument should be a Buffer");if(g||(g=0),!S&&S!==0&&(S=this.length),u>=a.length&&(u=a.length),u||(u=0),S>0&&S<g&&(S=g),S===g||a.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("sourceEnd out of bounds");S>this.length&&(S=this.length),a.length-u<S-g&&(S=a.length-u+g);const M=S-g;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,g,S):Uint8Array.prototype.set.call(a,this.subarray(g,S),u),M},c.prototype.fill=function(a,u,g,S){if(typeof a=="string"){if(typeof u=="string"?(S=u,u=0,g=this.length):typeof g=="string"&&(S=g,g=this.length),S!==void 0&&typeof S!="string")throw new TypeError("encoding must be a string");if(typeof S=="string"&&!c.isEncoding(S))throw new TypeError("Unknown encoding: "+S);if(a.length===1){const O=a.charCodeAt(0);(S==="utf8"&&O<128||S==="latin1")&&(a=O)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(u<0||this.length<u||this.length<g)throw new RangeError("Out of range index");if(g<=u)return this;u=u>>>0,g=g===void 0?this.length:g>>>0,a||(a=0);let M;if(typeof a=="number")for(M=u;M<g;++M)this[M]=a;else{const O=c.isBuffer(a)?a:c.from(a,S),ie=O.length;if(ie===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(M=0;M<g-u;++M)this[M+u]=O[M%ie]}return this};const te={};function ae(h,a,u){te[h]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:a.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${h}]`,this.stack,delete this.name}get code(){return h}set code(S){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:S,writable:!0})}toString(){return`${this.name} [${h}]: ${this.message}`}}}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(h){return h?`${h} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(h,a){return`The "${h}" argument must be of type number. Received type ${typeof a}`},TypeError),ae("ERR_OUT_OF_RANGE",function(h,a,u){let g=`The value of "${h}" is out of range.`,S=u;return Number.isInteger(u)&&Math.abs(u)>2**32?S=Ee(String(u)):typeof u=="bigint"&&(S=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(S=Ee(S)),S+="n"),g+=` It must be ${a}. Received ${S}`,g},RangeError);function Ee(h){let a="",u=h.length;const g=h[0]==="-"?1:0;for(;u>=g+4;u-=3)a=`_${h.slice(u-3,u)}${a}`;return`${h.slice(0,u)}${a}`}function Se(h,a,u){kt(a,"offset"),(h[a]===void 0||h[a+u]===void 0)&&ve(a,h.length-(u+1))}function Pe(h,a,u,g,S,M){if(h>u||h<a){const O=typeof a=="bigint"?"n":"";let ie;throw a===0||a===BigInt(0)?ie=`>= 0${O} and < 2${O} ** ${(M+1)*8}${O}`:ie=`>= -(2${O} ** ${(M+1)*8-1}${O}) and < 2 ** ${(M+1)*8-1}${O}`,new te.ERR_OUT_OF_RANGE("value",ie,h)}Se(g,S,M)}function kt(h,a){if(typeof h!="number")throw new te.ERR_INVALID_ARG_TYPE(a,"number",h)}function ve(h,a,u){throw Math.floor(h)!==h?(kt(h,u),new te.ERR_OUT_OF_RANGE("offset","an integer",h)):a<0?new te.ERR_BUFFER_OUT_OF_BOUNDS:new te.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${a}`,h)}const We=/[^+/0-9A-Za-z-_]/g;function kn(h){if(h=h.split("=")[0],h=h.trim().replace(We,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function Ce(h,a){a=a||1/0;let u;const g=h.length;let S=null;const M=[];for(let O=0;O<g;++O){if(u=h.charCodeAt(O),u>55295&&u<57344){if(!S){if(u>56319){(a-=3)>-1&&M.push(239,191,189);continue}else if(O+1===g){(a-=3)>-1&&M.push(239,191,189);continue}S=u;continue}if(u<56320){(a-=3)>-1&&M.push(239,191,189),S=u;continue}u=(S-55296<<10|u-56320)+65536}else S&&(a-=3)>-1&&M.push(239,191,189);if(S=null,u<128){if((a-=1)<0)break;M.push(u)}else if(u<2048){if((a-=2)<0)break;M.push(u>>6|192,u&63|128)}else if(u<65536){if((a-=3)<0)break;M.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((a-=4)<0)break;M.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return M}function ze(h){const a=[];for(let u=0;u<h.length;++u)a.push(h.charCodeAt(u)&255);return a}function En(h,a){let u,g,S;const M=[];for(let O=0;O<h.length&&!((a-=2)<0);++O)u=h.charCodeAt(O),g=u>>8,S=u%256,M.push(S),M.push(g);return M}function Ne(h){return e.toByteArray(kn(h))}function xe(h,a,u,g){let S;for(S=0;S<g&&!(S+u>=a.length||S>=h.length);++S)a[S+u]=h[S];return S}function qe(h,a){return h instanceof a||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===a.name}function Ue(h){return h!==h}const Ve=function(){const h="0123456789abcdef",a=new Array(256);for(let u=0;u<16;++u){const g=u*16;for(let S=0;S<16;++S)a[g+S]=h[u]+h[S]}return a}();function Qe(h){return typeof BigInt>"u"?$e:h}function $e(){throw new Error("BigInt not supported")}})(Be);var zy=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},_o;typeof Object.create=="function"?_o=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:_o=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e};var qy=_o;function hn(n,e){var t={seen:[],stylize:$y};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),Nl(e)?t.showHidden=e:e&&Jy(t,e),Pn(t.showHidden)&&(t.showHidden=!1),Pn(t.depth)&&(t.depth=2),Pn(t.colors)&&(t.colors=!1),Pn(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=Vy),Gi(t,n,t.depth)}hn.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};hn.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Vy(n,e){var t=hn.styles[e];return t?"\x1B["+hn.colors[t][0]+"m"+n+"\x1B["+hn.colors[t][1]+"m":n}function $y(n,e){return n}function Hy(n){var e={};return n.forEach(function(t,r){e[t]=!0}),e}function Gi(n,e,t){if(n.customInspect&&e&&ni(e.inspect)&&e.inspect!==hn&&!(e.constructor&&e.constructor.prototype===e)){var r=e.inspect(t,n);return Dl(r)||(r=Gi(n,r,t)),r}var s=jy(n,e);if(s)return s;var i=Object.keys(e),o=Hy(i);if(n.showHidden&&(i=Object.getOwnPropertyNames(e)),Ni(e)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return uo(e);if(i.length===0){if(ni(e)){var c=e.name?": "+e.name:"";return n.stylize("[Function"+c+"]","special")}if(ri(e))return n.stylize(RegExp.prototype.toString.call(e),"regexp");if(Zi(e))return n.stylize(Date.prototype.toString.call(e),"date");if(Ni(e))return uo(e)}var f="",m=!1,b=["{","}"];if(Zy(e)&&(m=!0,b=["[","]"]),ni(e)){var A=e.name?": "+e.name:"";f=" [Function"+A+"]"}if(ri(e)&&(f=" "+RegExp.prototype.toString.call(e)),Zi(e)&&(f=" "+Date.prototype.toUTCString.call(e)),Ni(e)&&(f=" "+uo(e)),i.length===0&&(!m||e.length==0))return b[0]+f+b[1];if(t<0)return ri(e)?n.stylize(RegExp.prototype.toString.call(e),"regexp"):n.stylize("[Object]","special");n.seen.push(e);var v;return m?v=Yy(n,e,t,o,i):v=i.map(function(w){return Io(n,e,t,o,w,m)}),n.seen.pop(),Gy(v,f,b)}function jy(n,e){if(Pn(e))return n.stylize("undefined","undefined");if(Dl(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return n.stylize(t,"string")}if(Xy(e))return n.stylize(""+e,"number");if(Nl(e))return n.stylize(""+e,"boolean");if(Fl(e))return n.stylize("null","null")}function uo(n){return"["+Error.prototype.toString.call(n)+"]"}function Yy(n,e,t,r,s){for(var i=[],o=0,c=e.length;o<c;++o)Kl(e,String(o))?i.push(Io(n,e,t,r,String(o),!0)):i.push("");return s.forEach(function(f){f.match(/^\d+$/)||i.push(Io(n,e,t,r,f,!0))}),i}function Io(n,e,t,r,s,i){var o,c,f;if(f=Object.getOwnPropertyDescriptor(e,s)||{value:e[s]},f.get?f.set?c=n.stylize("[Getter/Setter]","special"):c=n.stylize("[Getter]","special"):f.set&&(c=n.stylize("[Setter]","special")),Kl(r,s)||(o="["+s+"]"),c||(n.seen.indexOf(f.value)<0?(Fl(t)?c=Gi(n,f.value,null):c=Gi(n,f.value,t-1),c.indexOf(`
`)>-1&&(i?c=c.split(`
`).map(function(m){return"  "+m}).join(`
`).substr(2):c=`
`+c.split(`
`).map(function(m){return"   "+m}).join(`
`))):c=n.stylize("[Circular]","special")),Pn(o)){if(i&&s.match(/^\d+$/))return c;o=JSON.stringify(""+s),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=n.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=n.stylize(o,"string"))}return o+": "+c}function Gy(n,e,t){var r=n.reduce(function(s,i){return i.indexOf(`
`)>=0,s+i.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?t[0]+(e===""?"":e+`
 `)+" "+n.join(`,
  `)+" "+t[1]:t[0]+e+" "+n.join(", ")+" "+t[1]}function Zy(n){return Array.isArray(n)}function Nl(n){return typeof n=="boolean"}function Fl(n){return n===null}function Xy(n){return typeof n=="number"}function Dl(n){return typeof n=="string"}function Pn(n){return n===void 0}function ri(n){return ds(n)&&sa(n)==="[object RegExp]"}function ds(n){return typeof n=="object"&&n!==null}function Zi(n){return ds(n)&&sa(n)==="[object Date]"}function Ni(n){return ds(n)&&(sa(n)==="[object Error]"||n instanceof Error)}function ni(n){return typeof n=="function"}function mc(n){return n===null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||typeof n=="symbol"||typeof n>"u"}function sa(n){return Object.prototype.toString.call(n)}function Jy(n,e){if(!e||!ds(e))return n;for(var t=Object.keys(e),r=t.length;r--;)n[t[r]]=e[t[r]];return n}function Kl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function bc(n,e){if(n===e)return 0;for(var t=n.length,r=e.length,s=0,i=Math.min(t,r);s<i;++s)if(n[s]!==e[s]){t=n[s],r=e[s];break}return t<r?-1:r<t?1:0}var Qy=Object.prototype.hasOwnProperty,wc=Object.keys||function(n){var e=[];for(var t in n)Qy.call(n,t)&&e.push(t);return e},kc=Array.prototype.slice,lo;function Wl(){return typeof lo<"u"?lo:lo=function(){return(function(){}).name==="foo"}()}function Ec(n){return Object.prototype.toString.call(n)}function Ac(n){return Be.isBuffer(n)||typeof zy.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n?!!(n instanceof DataView||n.buffer&&n.buffer instanceof ArrayBuffer):!1}function Ct(n,e){n||Ft(n,!0,e,"==",aa)}var eg=/\s*function\s+([^\(\s]*)\s*/;function zl(n){if(ni(n)){if(Wl())return n.name;var e=n.toString(),t=e.match(eg);return t&&t[1]}}Ct.AssertionError=oa;function oa(n){this.name="AssertionError",this.actual=n.actual,this.expected=n.expected,this.operator=n.operator,n.message?(this.message=n.message,this.generatedMessage=!1):(this.message=tg(this),this.generatedMessage=!0);var e=n.stackStartFunction||Ft;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var t=new Error;if(t.stack){var r=t.stack,s=zl(e),i=r.indexOf(`
`+s);if(i>=0){var o=r.indexOf(`
`,i+1);r=r.substring(o+1)}this.stack=r}}}qy(oa,Error);function Sc(n,e){return typeof n=="string"?n.length<e?n:n.slice(0,e):n}function vc(n){if(Wl()||!ni(n))return hn(n);var e=zl(n),t=e?": "+e:"";return"[Function"+t+"]"}function tg(n){return Sc(vc(n.actual),128)+" "+n.operator+" "+Sc(vc(n.expected),128)}function Ft(n,e,t,r,s){throw new oa({message:t,actual:n,expected:e,operator:r,stackStartFunction:s})}Ct.fail=Ft;function aa(n,e){n||Ft(n,!0,e,"==",aa)}Ct.ok=aa;Ct.equal=ql;function ql(n,e,t){n!=e&&Ft(n,e,t,"==",ql)}Ct.notEqual=Vl;function Vl(n,e,t){n==e&&Ft(n,e,t,"!=",Vl)}Ct.deepEqual=$l;function $l(n,e,t){Dn(n,e,!1)||Ft(n,e,t,"deepEqual",$l)}Ct.deepStrictEqual=Hl;function Hl(n,e,t){Dn(n,e,!0)||Ft(n,e,t,"deepStrictEqual",Hl)}function Dn(n,e,t,r){if(n===e)return!0;if(Be.isBuffer(n)&&Be.isBuffer(e))return bc(n,e)===0;if(Zi(n)&&Zi(e))return n.getTime()===e.getTime();if(ri(n)&&ri(e))return n.source===e.source&&n.global===e.global&&n.multiline===e.multiline&&n.lastIndex===e.lastIndex&&n.ignoreCase===e.ignoreCase;if((n===null||typeof n!="object")&&(e===null||typeof e!="object"))return t?n===e:n==e;if(Ac(n)&&Ac(e)&&Ec(n)===Ec(e)&&!(n instanceof Float32Array||n instanceof Float64Array))return bc(new Uint8Array(n.buffer),new Uint8Array(e.buffer))===0;if(Be.isBuffer(n)!==Be.isBuffer(e))return!1;r=r||{actual:[],expected:[]};var s=r.actual.indexOf(n);return s!==-1&&s===r.expected.indexOf(e)?!0:(r.actual.push(n),r.expected.push(e),rg(n,e,t,r))}function _c(n){return Object.prototype.toString.call(n)=="[object Arguments]"}function rg(n,e,t,r){if(n==null||e===null||e===void 0)return!1;if(mc(n)||mc(e))return n===e;if(t&&Object.getPrototypeOf(n)!==Object.getPrototypeOf(e))return!1;var s=_c(n),i=_c(e);if(s&&!i||!s&&i)return!1;if(s)return n=kc.call(n),e=kc.call(e),Dn(n,e,t);var o=wc(n),c=wc(e),f,m;if(o.length!==c.length)return!1;for(o.sort(),c.sort(),m=o.length-1;m>=0;m--)if(o[m]!==c[m])return!1;for(m=o.length-1;m>=0;m--)if(f=o[m],!Dn(n[f],e[f],t,r))return!1;return!0}Ct.notDeepEqual=jl;function jl(n,e,t){Dn(n,e,!1)&&Ft(n,e,t,"notDeepEqual",jl)}Ct.notDeepStrictEqual=Yl;function Yl(n,e,t){Dn(n,e,!0)&&Ft(n,e,t,"notDeepStrictEqual",Yl)}Ct.strictEqual=Gl;function Gl(n,e,t){n!==e&&Ft(n,e,t,"===",Gl)}Ct.notStrictEqual=Zl;function Zl(n,e,t){n===e&&Ft(n,e,t,"!==",Zl)}function Ic(n,e){if(!n||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(n);try{if(n instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},n)===!0}function ng(n){var e;try{n()}catch(t){e=t}return e}function Xl(n,e,t,r){var s;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof t=="string"&&(r=t,t=null),s=ng(e),r=(t&&t.name?" ("+t.name+").":".")+(r?" "+r:"."),n&&!s&&Ft(s,t,"Missing expected exception"+r);var i=typeof r=="string",o=!n&&Ni(s),c=!n&&s&&!t;if((o&&i&&Ic(s,t)||c)&&Ft(s,t,"Got unwanted exception"+r),n&&s&&t&&!Ic(s,t)||!n&&s)throw s}Ct.throws=ig;function ig(n,e,t){Xl(!0,n,e,t)}Ct.doesNotThrow=sg;function sg(n,e,t){Xl(!1,n,e,t)}Ct.ifError=og;function og(n){if(n)throw n}class hi{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,r){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function ag(n,e){return e.property?n+"["+e.property+"]":n}class Ti extends hi{isCount(){throw new Error("ExternalLayout is abstract")}}class Jl extends hi{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,r){return r===void 0&&(r=0),t.writeUIntLE(e,r,this.span),this.span}}class cg extends hi{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((i,o)=>i&&o instanceof hi,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(const i of e)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let r=0;try{r=this.fields.reduce((s,i)=>{const o=i.getSpan(e,t);return t+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,t){t===void 0&&(t=0);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(e,t)),t+=s.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r){r===void 0&&(r=0);const s=r;let i=0,o=0;for(const c of this.fields){let f=c.span;if(o=0<f?f:0,c.property!==void 0){const m=e[c.property];m!==void 0&&(o=c.encode(m,t,r),0>f&&(f=c.getSpan(t,r)))}i=r,r+=f}return i+o-s}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class ug extends hi{constructor(e,t){if(!(e instanceof Ti&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof Ti||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t){t===void 0&&(t=0);let r=this.span;return 0>r&&(r=this.length.decode(e,t)),e.slice(t,t+r)}encode(e,t,r){let s=this.length;if(this.length instanceof Ti&&(s=e.length),!(Be.Buffer.isBuffer(e)&&s===e.length))throw new TypeError(ag("Blob.encode",this)+" requires (length "+s+") Buffer as src");if(r+s>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),r,s,"hex"),this.length instanceof Ti&&this.length.encode(s,t,r),s}}var _e=n=>new Jl(1,n),ii=n=>new Jl(4,n),mt=(n,e,t)=>new cg(n,e,t),Ql=(n,e)=>new ug(n,e);const bt=(n="publicKey")=>Ql(32,n),Vt=(n="uint64")=>Ql(8,n);function Et(n,e,t,...r){return ji(e,t,r,{skipPreflight:!1})}const lg=new J("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),ef=new J("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),Bc="Failed to find account",xc="Invalid account owner";function fo(n){return Be.Buffer.from(n.toBuffer())}class Tt extends go{toBuffer(){const e=super.toArray().reverse(),t=Be.Buffer.from(e);if(t.length===8)return t;Ct(t.length<8,"u64 too large");const r=Be.Buffer.alloc(8);return t.copy(r),r}static fromBuffer(e){return Ct(e.length===8,`Invalid buffer length: ${e.length}`),new Tt([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}function Dt(n){return"publicKey"in n}const fg={MintTokens:0,FreezeAccount:1,AccountOwner:2,CloseAccount:3},tf=new J("So11111111111111111111111111111111111111112"),ei=mt([ii("mintAuthorityOption"),bt("mintAuthority"),Vt("supply"),_e("decimals"),_e("isInitialized"),ii("freezeAuthorityOption"),bt("freezeAuthority")]),Bn=mt([bt("mint"),bt("owner"),Vt("amount"),ii("delegateOption"),bt("delegate"),_e("state"),ii("isNativeOption"),Vt("isNative"),Vt("delegatedAmount"),ii("closeAuthorityOption"),bt("closeAuthority")]),Ci=mt([_e("m"),_e("n"),_e("is_initialized"),bt("signer1"),bt("signer2"),bt("signer3"),bt("signer4"),bt("signer5"),bt("signer6"),bt("signer7"),bt("signer8"),bt("signer9"),bt("signer10"),bt("signer11")]);class Oe{constructor(e,t,r,s){Gn(this,"connection",void 0),Gn(this,"publicKey",void 0),Gn(this,"programId",void 0),Gn(this,"associatedProgramId",void 0),Gn(this,"payer",void 0),Object.assign(this,{connection:e,publicKey:t,programId:r,payer:s,associatedProgramId:ef})}static async getMinBalanceRentForExemptMint(e){return await e.getMinimumBalanceForRentExemption(ei.span)}static async getMinBalanceRentForExemptAccount(e){return await e.getMinimumBalanceForRentExemption(Bn.span)}static async getMinBalanceRentForExemptMultisig(e){return await e.getMinimumBalanceForRentExemption(Ci.span)}static async createMint(e,t,r,s,i,o){const c=nr.generate(),f=new Oe(e,c.publicKey,o,t),m=await Oe.getMinBalanceRentForExemptMint(e),b=new ge;return b.add(je.createAccount({fromPubkey:t.publicKey,newAccountPubkey:c.publicKey,lamports:m,space:ei.span,programId:o})),b.add(Oe.createInitMintInstruction(o,c.publicKey,i,r,s)),await Et("createAccount and InitializeMint",e,b,t,c),f}async createAccount(e){const t=await Oe.getMinBalanceRentForExemptAccount(this.connection),r=nr.generate(),s=new ge;s.add(je.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:r.publicKey,lamports:t,space:Bn.span,programId:this.programId}));const i=this.publicKey;return s.add(Oe.createInitAccountInstruction(this.programId,i,r.publicKey,e)),await Et("createAccount and InitializeAccount",this.connection,s,this.payer,r),r.publicKey}async createAssociatedTokenAccount(e){const t=await Oe.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);return this.createAssociatedTokenAccountInternal(e,t)}async createAssociatedTokenAccountInternal(e,t){return await Et("CreateAssociatedTokenAccount",this.connection,new ge().add(Oe.createAssociatedTokenAccountInstruction(this.associatedProgramId,this.programId,this.publicKey,t,e,this.payer.publicKey)),this.payer),t}async getOrCreateAssociatedAccountInfo(e){const t=await Oe.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,e);try{return await this.getAccountInfo(t)}catch(r){if(r.message===Bc||r.message===xc){try{await this.createAssociatedTokenAccountInternal(e,t)}catch{}return await this.getAccountInfo(t)}else throw r}}static async createWrappedNativeAccount(e,t,r,s,i){const o=await Oe.getMinBalanceRentForExemptAccount(e),c=nr.generate(),f=new ge;return f.add(je.createAccount({fromPubkey:s.publicKey,newAccountPubkey:c.publicKey,lamports:o,space:Bn.span,programId:t})),f.add(je.transfer({fromPubkey:s.publicKey,toPubkey:c.publicKey,lamports:i})),f.add(Oe.createInitAccountInstruction(t,tf,c.publicKey,r)),await Et("createAccount, transfer, and initializeAccount",e,f,s,c),c.publicKey}async createMultisig(e,t){const r=nr.generate(),s=await Oe.getMinBalanceRentForExemptMultisig(this.connection),i=new ge;i.add(je.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:r.publicKey,lamports:s,space:Ci.span,programId:this.programId}));let o=[{pubkey:r.publicKey,isSigner:!1,isWritable:!0},{pubkey:rr,isSigner:!1,isWritable:!1}];t.forEach(m=>o.push({pubkey:m,isSigner:!1,isWritable:!1}));const c=mt([_e("instruction"),_e("m")]),f=Be.Buffer.alloc(c.span);return c.encode({instruction:2,m:e},f),i.add({keys:o,programId:this.programId,data:f}),await Et("createAccount and InitializeMultisig",this.connection,i,this.payer,r),r.publicKey}async getMintInfo(){const e=await this.connection.getAccountInfo(this.publicKey);if(e===null)throw new Error("Failed to find mint account");if(!e.owner.equals(this.programId))throw new Error(`Invalid mint owner: ${JSON.stringify(e.owner)}`);if(e.data.length!=ei.span)throw new Error("Invalid mint size");const t=Be.Buffer.from(e.data),r=ei.decode(t);return r.mintAuthorityOption===0?r.mintAuthority=null:r.mintAuthority=new J(r.mintAuthority),r.supply=Tt.fromBuffer(r.supply),r.isInitialized=r.isInitialized!=0,r.freezeAuthorityOption===0?r.freezeAuthority=null:r.freezeAuthority=new J(r.freezeAuthority),r}async getAccountInfo(e,t){const r=await this.connection.getAccountInfo(e,t);if(r===null)throw new Error(Bc);if(!r.owner.equals(this.programId))throw new Error(xc);if(r.data.length!=Bn.span)throw new Error("Invalid account size");const s=Be.Buffer.from(r.data),i=Bn.decode(s);if(i.address=e,i.mint=new J(i.mint),i.owner=new J(i.owner),i.amount=Tt.fromBuffer(i.amount),i.delegateOption===0?(i.delegate=null,i.delegatedAmount=new Tt):(i.delegate=new J(i.delegate),i.delegatedAmount=Tt.fromBuffer(i.delegatedAmount)),i.isInitialized=i.state!==0,i.isFrozen=i.state===2,i.isNativeOption===1?(i.rentExemptReserve=Tt.fromBuffer(i.isNative),i.isNative=!0):(i.rentExemptReserve=null,i.isNative=!1),i.closeAuthorityOption===0?i.closeAuthority=null:i.closeAuthority=new J(i.closeAuthority),!i.mint.equals(this.publicKey))throw new Error(`Invalid account mint: ${JSON.stringify(i.mint)} !== ${JSON.stringify(this.publicKey)}`);return i}async getMultisigInfo(e){const t=await this.connection.getAccountInfo(e);if(t===null)throw new Error("Failed to find multisig");if(!t.owner.equals(this.programId))throw new Error("Invalid multisig owner");if(t.data.length!=Ci.span)throw new Error("Invalid multisig size");const r=Be.Buffer.from(t.data),s=Ci.decode(r);return s.signer1=new J(s.signer1),s.signer2=new J(s.signer2),s.signer3=new J(s.signer3),s.signer4=new J(s.signer4),s.signer5=new J(s.signer5),s.signer6=new J(s.signer6),s.signer7=new J(s.signer7),s.signer8=new J(s.signer8),s.signer9=new J(s.signer9),s.signer10=new J(s.signer10),s.signer11=new J(s.signer11),s}async transfer(e,t,r,s,i){let o,c;return Dt(r)?(o=r.publicKey,c=[r]):(o=r,c=s),await Et("Transfer",this.connection,new ge().add(Oe.createTransferInstruction(this.programId,e,t,o,s,i)),this.payer,...c)}async approve(e,t,r,s,i){let o,c;Dt(r)?(o=r.publicKey,c=[r]):(o=r,c=s),await Et("Approve",this.connection,new ge().add(Oe.createApproveInstruction(this.programId,e,t,o,s,i)),this.payer,...c)}async revoke(e,t,r){let s,i;Dt(t)?(s=t.publicKey,i=[t]):(s=t,i=r),await Et("Revoke",this.connection,new ge().add(Oe.createRevokeInstruction(this.programId,e,s,r)),this.payer,...i)}async setAuthority(e,t,r,s,i){let o,c;Dt(s)?(o=s.publicKey,c=[s]):(o=s,c=i),await Et("SetAuthority",this.connection,new ge().add(Oe.createSetAuthorityInstruction(this.programId,e,t,r,o,i)),this.payer,...c)}async mintTo(e,t,r,s){let i,o;Dt(t)?(i=t.publicKey,o=[t]):(i=t,o=r),await Et("MintTo",this.connection,new ge().add(Oe.createMintToInstruction(this.programId,this.publicKey,e,i,r,s)),this.payer,...o)}async burn(e,t,r,s){let i,o;Dt(t)?(i=t.publicKey,o=[t]):(i=t,o=r),await Et("Burn",this.connection,new ge().add(Oe.createBurnInstruction(this.programId,this.publicKey,e,i,r,s)),this.payer,...o)}async closeAccount(e,t,r,s){let i,o;Dt(r)?(i=r.publicKey,o=[r]):(i=r,o=s),await Et("CloseAccount",this.connection,new ge().add(Oe.createCloseAccountInstruction(this.programId,e,t,i,s)),this.payer,...o)}async freezeAccount(e,t,r){let s,i;Dt(t)?(s=t.publicKey,i=[t]):(s=t,i=r),await Et("FreezeAccount",this.connection,new ge().add(Oe.createFreezeAccountInstruction(this.programId,e,this.publicKey,s,r)),this.payer,...i)}async thawAccount(e,t,r){let s,i;Dt(t)?(s=t.publicKey,i=[t]):(s=t,i=r),await Et("ThawAccount",this.connection,new ge().add(Oe.createThawAccountInstruction(this.programId,e,this.publicKey,s,r)),this.payer,...i)}async transferChecked(e,t,r,s,i,o){let c,f;return Dt(r)?(c=r.publicKey,f=[r]):(c=r,f=s),await Et("TransferChecked",this.connection,new ge().add(Oe.createTransferCheckedInstruction(this.programId,e,this.publicKey,t,c,s,i,o)),this.payer,...f)}async approveChecked(e,t,r,s,i,o){let c,f;Dt(r)?(c=r.publicKey,f=[r]):(c=r,f=s),await Et("ApproveChecked",this.connection,new ge().add(Oe.createApproveCheckedInstruction(this.programId,e,this.publicKey,t,c,s,i,o)),this.payer,...f)}async mintToChecked(e,t,r,s,i){let o,c;Dt(t)?(o=t.publicKey,c=[t]):(o=t,c=r),await Et("MintToChecked",this.connection,new ge().add(Oe.createMintToCheckedInstruction(this.programId,this.publicKey,e,o,r,s,i)),this.payer,...c)}async burnChecked(e,t,r,s,i){let o,c;Dt(t)?(o=t.publicKey,c=[t]):(o=t,c=r),await Et("BurnChecked",this.connection,new ge().add(Oe.createBurnCheckedInstruction(this.programId,this.publicKey,e,o,r,s,i)),this.payer,...c)}async syncNative(e){await Et("SyncNative",this.connection,new ge().add(Oe.createSyncNativeInstruction(this.programId,e)),this.payer)}static createInitMintInstruction(e,t,r,s,i){let o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rr,isSigner:!1,isWritable:!1}];const c=mt([_e("instruction"),_e("decimals"),bt("mintAuthority"),_e("option"),bt("freezeAuthority")]);let f=Be.Buffer.alloc(1024);{const m=c.encode({instruction:0,decimals:r,mintAuthority:fo(s),option:i===null?0:1,freezeAuthority:fo(i||new J(0))},f);f=f.slice(0,m)}return new me({keys:o,programId:e,data:f})}static createInitAccountInstruction(e,t,r,s){const i=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:rr,isSigner:!1,isWritable:!1}],o=mt([_e("instruction")]),c=Be.Buffer.alloc(o.span);return o.encode({instruction:1},c),new me({keys:i,programId:e,data:c})}static createTransferInstruction(e,t,r,s,i,o){const c=mt([_e("instruction"),Vt("amount")]),f=Be.Buffer.alloc(c.span);c.encode({instruction:3,amount:new Tt(o).toBuffer()},f);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0}];return i.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),i.forEach(b=>m.push({pubkey:b.publicKey,isSigner:!0,isWritable:!1}))),new me({keys:m,programId:e,data:f})}static createApproveInstruction(e,t,r,s,i,o){const c=mt([_e("instruction"),Vt("amount")]),f=Be.Buffer.alloc(c.span);c.encode({instruction:4,amount:new Tt(o).toBuffer()},f);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1}];return i.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),i.forEach(b=>m.push({pubkey:b.publicKey,isSigner:!0,isWritable:!1}))),new me({keys:m,programId:e,data:f})}static createRevokeInstruction(e,t,r,s){const i=mt([_e("instruction")]),o=Be.Buffer.alloc(i.span);i.encode({instruction:5},o);let c=[{pubkey:t,isSigner:!1,isWritable:!0}];return s.length===0?c.push({pubkey:r,isSigner:!0,isWritable:!1}):(c.push({pubkey:r,isSigner:!1,isWritable:!1}),s.forEach(f=>c.push({pubkey:f.publicKey,isSigner:!0,isWritable:!1}))),new me({keys:c,programId:e,data:o})}static createSetAuthorityInstruction(e,t,r,s,i,o){const c=mt([_e("instruction"),_e("authorityType"),_e("option"),bt("newAuthority")]);let f=Be.Buffer.alloc(1024);{const b=c.encode({instruction:6,authorityType:fg[s],option:r===null?0:1,newAuthority:fo(r||new J(0))},f);f=f.slice(0,b)}let m=[{pubkey:t,isSigner:!1,isWritable:!0}];return o.length===0?m.push({pubkey:i,isSigner:!0,isWritable:!1}):(m.push({pubkey:i,isSigner:!1,isWritable:!1}),o.forEach(b=>m.push({pubkey:b.publicKey,isSigner:!0,isWritable:!1}))),new me({keys:m,programId:e,data:f})}static createMintToInstruction(e,t,r,s,i,o){const c=mt([_e("instruction"),Vt("amount")]),f=Be.Buffer.alloc(c.span);c.encode({instruction:7,amount:new Tt(o).toBuffer()},f);let m=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0}];return i.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),i.forEach(b=>m.push({pubkey:b.publicKey,isSigner:!0,isWritable:!1}))),new me({keys:m,programId:e,data:f})}static createBurnInstruction(e,t,r,s,i,o){const c=mt([_e("instruction"),Vt("amount")]),f=Be.Buffer.alloc(c.span);c.encode({instruction:8,amount:new Tt(o).toBuffer()},f);let m=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return i.length===0?m.push({pubkey:s,isSigner:!0,isWritable:!1}):(m.push({pubkey:s,isSigner:!1,isWritable:!1}),i.forEach(b=>m.push({pubkey:b.publicKey,isSigner:!0,isWritable:!1}))),new me({keys:m,programId:e,data:f})}static createCloseAccountInstruction(e,t,r,s,i){const o=mt([_e("instruction")]),c=Be.Buffer.alloc(o.span);o.encode({instruction:9},c);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0}];return i.length===0?f.push({pubkey:s,isSigner:!0,isWritable:!1}):(f.push({pubkey:s,isSigner:!1,isWritable:!1}),i.forEach(m=>f.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new me({keys:f,programId:e,data:c})}static createFreezeAccountInstruction(e,t,r,s,i){const o=mt([_e("instruction")]),c=Be.Buffer.alloc(o.span);o.encode({instruction:10},c);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1}];return i.length===0?f.push({pubkey:s,isSigner:!0,isWritable:!1}):(f.push({pubkey:s,isSigner:!1,isWritable:!1}),i.forEach(m=>f.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new me({keys:f,programId:e,data:c})}static createThawAccountInstruction(e,t,r,s,i){const o=mt([_e("instruction")]),c=Be.Buffer.alloc(o.span);o.encode({instruction:11},c);let f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1}];return i.length===0?f.push({pubkey:s,isSigner:!0,isWritable:!1}):(f.push({pubkey:s,isSigner:!1,isWritable:!1}),i.forEach(m=>f.push({pubkey:m.publicKey,isSigner:!0,isWritable:!1}))),new me({keys:f,programId:e,data:c})}static createTransferCheckedInstruction(e,t,r,s,i,o,c,f){const m=mt([_e("instruction"),Vt("amount"),_e("decimals")]),b=Be.Buffer.alloc(m.span);m.encode({instruction:12,amount:new Tt(c).toBuffer(),decimals:f},b);let A=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0}];return o.length===0?A.push({pubkey:i,isSigner:!0,isWritable:!1}):(A.push({pubkey:i,isSigner:!1,isWritable:!1}),o.forEach(v=>A.push({pubkey:v.publicKey,isSigner:!0,isWritable:!1}))),new me({keys:A,programId:e,data:b})}static createApproveCheckedInstruction(e,t,r,s,i,o,c,f){const m=mt([_e("instruction"),Vt("amount"),_e("decimals")]),b=Be.Buffer.alloc(m.span);m.encode({instruction:13,amount:new Tt(c).toBuffer(),decimals:f},b);let A=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return o.length===0?A.push({pubkey:i,isSigner:!0,isWritable:!1}):(A.push({pubkey:i,isSigner:!1,isWritable:!1}),o.forEach(v=>A.push({pubkey:v.publicKey,isSigner:!0,isWritable:!1}))),new me({keys:A,programId:e,data:b})}static createMintToCheckedInstruction(e,t,r,s,i,o,c){const f=mt([_e("instruction"),Vt("amount"),_e("decimals")]),m=Be.Buffer.alloc(f.span);f.encode({instruction:14,amount:new Tt(o).toBuffer(),decimals:c},m);let b=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0}];return i.length===0?b.push({pubkey:s,isSigner:!0,isWritable:!1}):(b.push({pubkey:s,isSigner:!1,isWritable:!1}),i.forEach(A=>b.push({pubkey:A.publicKey,isSigner:!0,isWritable:!1}))),new me({keys:b,programId:e,data:m})}static createBurnCheckedInstruction(e,t,r,s,i,o,c){const f=mt([_e("instruction"),Vt("amount"),_e("decimals")]),m=Be.Buffer.alloc(f.span);f.encode({instruction:15,amount:new Tt(o).toBuffer(),decimals:c},m);let b=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return i.length===0?b.push({pubkey:s,isSigner:!0,isWritable:!1}):(b.push({pubkey:s,isSigner:!1,isWritable:!1}),i.forEach(A=>b.push({pubkey:A.publicKey,isSigner:!0,isWritable:!1}))),new me({keys:b,programId:e,data:m})}static createSyncNativeInstruction(e,t){const r=mt([_e("instruction")]),s=Be.Buffer.alloc(r.span);r.encode({instruction:17},s);let i=[{pubkey:t,isSigner:!1,isWritable:!0}];return new me({keys:i,programId:e,data:s})}static async getAssociatedTokenAddress(e,t,r,s,i=!1){if(!i&&!J.isOnCurve(s.toBuffer()))throw new Error(`Owner cannot sign: ${s.toString()}`);return(await J.findProgramAddress([s.toBuffer(),t.toBuffer(),r.toBuffer()],e))[0]}static createAssociatedTokenAccountInstruction(e,t,r,s,i,o){const c=Be.Buffer.alloc(0);let f=[{pubkey:o,isSigner:!0,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:je.programId,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:rr,isSigner:!1,isWritable:!1}];return new me({keys:f,programId:e,data:c})}}const hg=Object.freeze(Object.defineProperty({__proto__:null,ASSOCIATED_TOKEN_PROGRAM_ID:ef,AccountLayout:Bn,MintLayout:ei,NATIVE_MINT:tf,TOKEN_PROGRAM_ID:lg,Token:Oe,u64:Tt},Symbol.toStringTag,{value:"Module"})),br=di(hg);var Rc;function dg(){return Rc||(Rc=1,function(n){var e=Yn&&Yn.__awaiter||function(f,m,b,A){function v(w){return w instanceof b?w:new b(function(B){B(w)})}return new(b||(b=Promise))(function(w,B){function R(V){try{D(A.next(V))}catch(W){B(W)}}function C(V){try{D(A.throw(V))}catch(W){B(W)}}function D(V){V.done?w(V.value):v(V.value).then(R,C)}D((A=A.apply(f,m||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0}),n.deserialize=n.TokenAccount=void 0;const t=na(),r=Ol(),s=br,i=Me;let o=class Bo extends r.Account{constructor(m,b){if(super(m,b),!this.assertOwner(s.TOKEN_PROGRAM_ID))throw(0,t.ERROR_INVALID_OWNER)();if(!Bo.isCompatible(this.info.data))throw(0,t.ERROR_INVALID_ACCOUNT_DATA)();this.data=(0,n.deserialize)(this.info.data)}static isCompatible(m){return m.length===s.AccountLayout.span}static getTokenAccountsByOwner(m,b){return e(this,void 0,void 0,function*(){return(yield m.getTokenAccountsByOwner(new i.PublicKey(b),{programId:s.TOKEN_PROGRAM_ID})).value.map(({pubkey:A,account:v})=>new Bo(A,v))})}};n.TokenAccount=o;const c=f=>{const m=s.AccountLayout.decode(f);return m.mint=new i.PublicKey(m.mint),m.owner=new i.PublicKey(m.owner),m.amount=s.u64.fromBuffer(m.amount),m.delegateOption===0?(m.delegate=null,m.delegatedAmount=new s.u64(0)):(m.delegate=new i.PublicKey(m.delegate),m.delegatedAmount=s.u64.fromBuffer(m.delegatedAmount)),m.isInitialized=m.state!==0,m.isFrozen=m.state===2,m.isNativeOption===1?(m.rentExemptReserve=s.u64.fromBuffer(m.isNative),m.isNative=!0):(m.rentExemptReserve=null,m.isNative=!1),m.closeAuthorityOption===0?m.closeAuthority=null:m.closeAuthority=new i.PublicKey(m.closeAuthority),m};n.deserialize=c}(Yn)),Yn}var Mc;function rf(){return Mc||(Mc=1,function(n){var e=Tr&&Tr.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[i]}})}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),t=Tr&&Tr.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,r,i)};Object.defineProperty(n,"__esModule",{value:!0}),t(Ol(),n),t(dg(),n)}(Tr)),Tr}var Zn={},Pc;function pg(){return Pc||(Pc=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.config=void 0,Zn.config={arweaveWallet:"HvwC9QSAzvGXhhVrgPmauVwFWcYZhne3hVot9EbHuFTm",programs:{auction:"auctxRXPeJoc4817jDhf4HbjnhEcr1cCXenosMhK5R8",metadata:"metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s",metaplex:"p1exdMJcjVao65QdewkaZRUnU6VPSXhus9n2GzWfh98",vault:"vau1zxA2LbssAUEF7Gpw91zMM1LvXrvpzJtmZ58rPsn",packs:"BNRmGgciUJuyznkYHnmitA9an1BcDDiU9JmjEQwvBYVR",memo:"MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr",token:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},maxCreatorLimit:5}),Zn}var Ur={},Tc;function yg(){if(Tc)return Ur;Tc=1;var n=Ur&&Ur.__awaiter||function(i,o,c,f){function m(b){return b instanceof c?b:new c(function(A){A(b)})}return new(c||(c=Promise))(function(b,A){function v(R){try{B(f.next(R))}catch(C){A(C)}}function w(R){try{B(f.throw(R))}catch(C){A(C)}}function B(R){R.done?b(R.value):m(R.value).then(v,w)}B((f=f.apply(i,o||[])).next())})};Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.Program=void 0;const e=Me,t=rf(),r=mr();let s=class{static findProgramAddress(o){return n(this,void 0,void 0,function*(){return(yield e.PublicKey.findProgramAddress(o,this.PUBKEY))[0]})}static getProgramAccounts(o,c){return n(this,void 0,void 0,function*(){const f={};let m;c&&(typeof c=="string"?m=c:(m=c.commitment,c.dataSlice&&(f.dataSlice=c.dataSlice),c.filters&&(f.filters=c.filters)));const b=o._buildArgs([this.PUBKEY.toBase58()],m,"base64",f);return(yield o._rpcRequest("getProgramAccounts",b)).result.map(({account:{data:v,executable:w,lamports:B,owner:R},pubkey:C})=>({account:{data:r.Buffer.from(v[0],"base64"),executable:w,lamports:B,owner:new e.PublicKey(R)},pubkey:new e.PublicKey(C)})).map(({pubkey:v,account:w})=>new t.Account(v,w))})}};return Ur.Program=s,Ur}var Xn={},Cc;function gg(){if(Cc)return Xn;Cc=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.Transaction=void 0;const n=Me;let e=class nf extends n.Transaction{constructor(r){super(r)}static fromCombined(r,s={}){const i=new nf(s);return r.forEach(o=>o.instructions.forEach(c=>{i.add(c)})),i}};return Xn.Transaction=e,Xn}var ho={},Uc;function mg(){return Uc||(Uc=1,Object.defineProperty(ho,"__esModule",{value:!0})),ho}var $t={},Jn={},Oc;function bg(){return Oc||(Oc=1,function(n){var e=Jn&&Jn.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(n,"__esModule",{value:!0}),n.serialize=n.deserializeUnchecked=n.deserialize=n.struct=n.Data=n.extendBorsh=void 0;const t=Me,r=qu();Object.defineProperty(n,"deserializeUnchecked",{enumerable:!0,get:function(){return r.deserializeUnchecked}}),Object.defineProperty(n,"serialize",{enumerable:!0,get:function(){return r.serialize}}),Object.defineProperty(n,"deserialize",{enumerable:!0,get:function(){return r.deserialize}});const s=e(mi()),i=()=>{r.BinaryReader.prototype.readPubkey=function(){const f=this.readFixedArray(32);return new t.PublicKey(f)},r.BinaryWriter.prototype.writePubkey=function(f){this.writeFixedArray(f.toBuffer())},r.BinaryReader.prototype.readPubkeyAsString=function(){const f=this.readFixedArray(32);return s.default.encode(f)},r.BinaryWriter.prototype.writePubkeyAsString=function(f){this.writeFixedArray(s.default.decode(f))}};n.extendBorsh=i,(0,n.extendBorsh)();class o{constructor(m={}){Object.assign(this,m)}static struct(m){return(0,n.struct)(this,m)}static serialize(m={}){return Buffer.from((0,r.serialize)(this.SCHEMA,new this(m)))}static deserialize(m){return(0,r.deserializeUnchecked)(this.SCHEMA,this,m)}}n.Data=o;const c=(f,m)=>new Map([[f,{kind:"struct",fields:m}]]);n.struct=c}(Jn)),Jn}var Qn={},Lc;function wg(){return Lc||(Lc=1,function(n){var e=Qn&&Qn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(n,"__esModule",{value:!0}),n.getBNFromData=n.TupleNumericType=void 0;const t=e(es());var r;(function(i){i[i.U8=1]="U8",i[i.U16=2]="U16",i[i.U32=4]="U32",i[i.U64=8]="U64"})(r=n.TupleNumericType||(n.TupleNumericType={}));const s=(i,o,c)=>{switch(c){case r.U8:return new t.default(i[o],"le");case r.U16:return new t.default(i.slice(o,o+2),"le");case r.U32:return new t.default(i.slice(o,o+4),"le");case r.U64:return new t.default(i.slice(o,o+8),"le")}};n.getBNFromData=s}(Qn)),Qn}var Nc;function kg(){return Nc||(Nc=1,function(n){var e=$t&&$t.__createBinding||(Object.create?function(i,o,c,f){f===void 0&&(f=c),Object.defineProperty(i,f,{enumerable:!0,get:function(){return o[c]}})}:function(i,o,c,f){f===void 0&&(f=c),i[f]=o[c]}),t=$t&&$t.__setModuleDefault||(Object.create?function(i,o){Object.defineProperty(i,"default",{enumerable:!0,value:o})}:function(i,o){i.default=o}),r=$t&&$t.__importStar||function(i){if(i&&i.__esModule)return i;var o={};if(i!=null)for(var c in i)c!=="default"&&Object.prototype.hasOwnProperty.call(i,c)&&e(o,i,c);return t(o,i),o},s=$t&&$t.__exportStar||function(i,o){for(var c in i)c!=="default"&&!Object.prototype.hasOwnProperty.call(o,c)&&e(o,i,c)};Object.defineProperty(n,"__esModule",{value:!0}),n.Borsh=void 0,n.Borsh=r(bg()),s(wg(),n)}($t)),$t}var Fc;function Le(){return Fc||(Fc=1,function(n){var e=Pr&&Pr.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[i]}})}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),t=Pr&&Pr.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,r,i)};Object.defineProperty(n,"__esModule",{value:!0}),t(rf(),n),t(pg(),n),t(na(),n),t(yg(),n),t(gg(),n),t(mg(),n),t(kg(),n)}(Pr)),Pr}var Or={},Dc;function Ke(){if(Dc)return Or;Dc=1;var n=Or&&Or.__awaiter||function(s,i,o,c){function f(m){return m instanceof o?m:new o(function(b){b(m)})}return new(o||(o=Promise))(function(m,b){function A(B){try{w(c.next(B))}catch(R){b(R)}}function v(B){try{w(c.throw(B))}catch(R){b(R)}}function w(B){B.done?m(B.value):f(B.value).then(A,v)}w((c=c.apply(s,i||[])).next())})};Object.defineProperty(Or,"__esModule",{value:!0}),Or.MetadataProgram=void 0;const e=Me,t=Le();let r=class He extends t.Program{static findEditionAccount(i,o){return n(this,void 0,void 0,function*(){return e.PublicKey.findProgramAddress([Buffer.from(He.PREFIX,"utf8"),He.PUBKEY.toBuffer(),i.toBuffer(),Buffer.from(He.EDITION,"utf8"),Buffer.from(o,"utf8")],He.PUBKEY)})}static findMasterEditionAccount(i){return n(this,void 0,void 0,function*(){return e.PublicKey.findProgramAddress([Buffer.from(He.PREFIX,"utf8"),He.PUBKEY.toBuffer(),i.toBuffer(),Buffer.from(He.EDITION,"utf8")],He.PUBKEY)})}static findMetadataAccount(i){return n(this,void 0,void 0,function*(){return e.PublicKey.findProgramAddress([Buffer.from(He.PREFIX,"utf8"),He.PUBKEY.toBuffer(),i.toBuffer()],He.PUBKEY)})}static findUseAuthorityAccount(i,o){return n(this,void 0,void 0,function*(){return e.PublicKey.findProgramAddress([Buffer.from(He.PREFIX,"utf8"),He.PUBKEY.toBuffer(),i.toBuffer(),Buffer.from(He.USER,"utf8"),o.toBuffer()],He.PUBKEY)})}static findCollectionAuthorityAccount(i,o){return n(this,void 0,void 0,function*(){return e.PublicKey.findProgramAddress([Buffer.from(He.PREFIX,"utf8"),He.PUBKEY.toBuffer(),i.toBuffer(),Buffer.from(He.COLLECTION_AUTHORITY,"utf8"),o.toBuffer()],He.PUBKEY)})}static findProgramAsBurnerAccount(){return n(this,void 0,void 0,function*(){return e.PublicKey.findProgramAddress([Buffer.from(He.PREFIX,"utf8"),He.PUBKEY.toBuffer(),Buffer.from(He.BURN,"utf8")],He.PUBKEY)})}};return Or.MetadataProgram=r,r.PREFIX="metadata",r.EDITION="edition",r.USER="user",r.COLLECTION_AUTHORITY="collection_authority",r.BURN="burn",r.PUBKEY=new e.PublicKey(t.config.programs.metadata),Or}var ur={},Kc;function ps(){if(Kc)return ur;Kc=1;var n=ur&&ur.__awaiter||function(f,m,b,A){function v(w){return w instanceof b?w:new b(function(B){B(w)})}return new(b||(b=Promise))(function(w,B){function R(V){try{D(A.next(V))}catch(W){B(W)}}function C(V){try{D(A.throw(V))}catch(W){B(W)}}function D(V){V.done?w(V.value):v(V.value).then(R,C)}D((A=A.apply(f,m||[])).next())})};Object.defineProperty(ur,"__esModule",{value:!0}),ur.Edition=ur.EditionData=void 0;const e=Le(),t=Ke(),r=Me,s=mr(),i=Kn();class o extends e.Borsh.Data{constructor(m){super(m),this.key=i.MetadataKey.EditionV1}}ur.EditionData=o,o.SCHEMA=o.struct([["key","u8"],["parent","pubkeyAsString"],["edition","u64"]]);let c=class xo extends e.Account{constructor(m,b){if(super(m,b),!this.assertOwner(t.MetadataProgram.PUBKEY))throw(0,e.ERROR_INVALID_OWNER)();if(!xo.isCompatible(this.info.data))throw(0,e.ERROR_INVALID_ACCOUNT_DATA)();this.data=o.deserialize(this.info.data)}static getPDA(m){return n(this,void 0,void 0,function*(){return t.MetadataProgram.findProgramAddress([s.Buffer.from(t.MetadataProgram.PREFIX),t.MetadataProgram.PUBKEY.toBuffer(),new r.PublicKey(m).toBuffer(),s.Buffer.from(xo.EDITION_PREFIX)])})}static isCompatible(m){return m[0]===i.MetadataKey.EditionV1}};return ur.Edition=c,c.EDITION_PREFIX="edition",ur}var Kt={},Wc;function sf(){if(Wc)return Kt;Wc=1;var n=Kt&&Kt.__awaiter||function(v,w,B,R){function C(D){return D instanceof B?D:new B(function(V){V(D)})}return new(B||(B=Promise))(function(D,V){function W(Z){try{Y(R.next(Z))}catch(oe){V(oe)}}function X(Z){try{Y(R.throw(Z))}catch(oe){V(oe)}}function Y(Z){Z.done?D(Z.value):C(Z.value).then(W,X)}Y((R=R.apply(v,w||[])).next())})},e=Kt&&Kt.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.MasterEdition=Kt.MasterEditionV2Data=Kt.MasterEditionV1Data=void 0;const t=Le(),r=e(mi()),s=ps(),i=Ke(),o=mr(),c=Me,f=Kn();class m extends t.Borsh.Data{constructor(w){super(w),this.key=f.MetadataKey.MasterEditionV1}}Kt.MasterEditionV1Data=m,m.SCHEMA=m.struct([["key","u8"],["supply","u64"],["maxSupply",{kind:"option",type:"u64"}],["printingMint","pubkeyAsString"],["oneTimePrintingAuthorizationMint","pubkeyAsString"]]);class b extends t.Borsh.Data{constructor(w){super(w),this.key=f.MetadataKey.MasterEditionV2}}Kt.MasterEditionV2Data=b,b.SCHEMA=b.struct([["key","u8"],["supply","u64"],["maxSupply",{kind:"option",type:"u64"}]]);let A=class xn extends t.Account{constructor(w,B){if(super(w,B),!this.assertOwner(i.MetadataProgram.PUBKEY))throw(0,t.ERROR_INVALID_OWNER)();if(xn.isMasterEditionV1(this.info.data))this.data=m.deserialize(this.info.data);else if(xn.isMasterEditionV2(this.info.data))this.data=b.deserialize(this.info.data);else throw(0,t.ERROR_INVALID_ACCOUNT_DATA)()}static getPDA(w){return n(this,void 0,void 0,function*(){return i.MetadataProgram.findProgramAddress([o.Buffer.from(i.MetadataProgram.PREFIX),i.MetadataProgram.PUBKEY.toBuffer(),new c.PublicKey(w).toBuffer(),o.Buffer.from(xn.EDITION_PREFIX)])})}static isCompatible(w){return xn.isMasterEditionV1(w)||xn.isMasterEditionV2(w)}static isMasterEditionV1(w){return w[0]===f.MetadataKey.MasterEditionV1}static isMasterEditionV2(w){return w[0]===f.MetadataKey.MasterEditionV2}getEditions(w){return n(this,void 0,void 0,function*(){return(yield i.MetadataProgram.getProgramAccounts(w,{filters:[{memcmp:{offset:0,bytes:r.default.encode(o.Buffer.from([f.MetadataKey.EditionV1]))}},{memcmp:{offset:1,bytes:this.pubkey.toBase58()}}]})).map(B=>s.Edition.from(B))})}};return Kt.MasterEdition=A,A.EDITION_PREFIX="edition",Kt}var Lr={},zc;function of(){if(zc)return Lr;zc=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.UseAuthorityRecord=Lr.Uses=void 0;const n=Le(),e=uf();let t=class extends n.Borsh.Data{constructor(i){super(i),this.useMethod=i.useMethod,this.total=i.total,this.remaining=i.remaining}};Lr.Uses=t,t.SCHEMA=t.struct([["useMethod","u8"],["total","u64"],["remaining","u64"]]);class r extends n.Borsh.Data{constructor(i){super(i),this.key=e.MetadataKey.UseAuthorityRecord,this.allowedUses=i.allowedUses,this.bump=i.bump}}return Lr.UseAuthorityRecord=r,r.SCHEMA=r.struct([["key","u8"],["allowedUses","u64"],["bump","u8"]]),Lr}var Nr={},qc;function af(){if(qc)return Nr;qc=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.CollctionAuthorityRecord=Nr.Collection=void 0;const n=Le(),e=Kn();let t=class extends n.Borsh.Data{constructor(i){super(i),this.key=i.key,this.verified=i.verified}};Nr.Collection=t,t.SCHEMA=t.struct([["verified","u8"],["key","pubkeyAsString"]]);class r extends n.Borsh.Data{constructor(i){super(i),this.key=e.MetadataKey.CollectionAuthorityRecord,this.bump=i.bump}}return Nr.CollctionAuthorityRecord=r,r.SCHEMA=r.struct([["key","u8"],["bump","u8"]]),Nr}var Vc;function Ai(){return Vc||(Vc=1,function(n){var e=Mr&&Mr.__awaiter||function(X,Y,Z,oe){function ee(F){return F instanceof Z?F:new Z(function(K){K(F)})}return new(Z||(Z=Promise))(function(F,K){function q(l){try{E(oe.next(l))}catch(y){K(y)}}function H(l){try{E(oe.throw(l))}catch(y){K(y)}}function E(l){l.done?F(l.value):ee(l.value).then(q,H)}E((oe=oe.apply(X,Y||[])).next())})},t=Mr&&Mr.__importDefault||function(X){return X&&X.__esModule?X:{default:X}};Object.defineProperty(n,"__esModule",{value:!0}),n.computeCreatorOffset=n.MAX_CREATOR_LEN=n.MAX_URI_LENGTH=n.MAX_SYMBOL_LENGTH=n.MAX_NAME_LENGTH=n.Metadata=n.MetadataData=n.MetadataDataData=n.DataV2=n.Creator=void 0;const r=Le(),s=Me,i=t(es()),o=t(mi()),c=mr(),f=Ke(),m=ps(),b=sf(),A=of(),v=af(),w=Kn();class B extends r.Borsh.Data{}n.Creator=B,B.SCHEMA=B.struct([["address","pubkeyAsString"],["verified","u8"],["share","u8"]]);class R extends r.Borsh.Data{}n.DataV2=R,R.SCHEMA=new Map([...B.SCHEMA,...v.Collection.SCHEMA,...A.Uses.SCHEMA,...R.struct([["name","string"],["symbol","string"],["uri","string"],["sellerFeeBasisPoints","u16"],["creators",{kind:"option",type:[B]}],["collection",{kind:"option",type:v.Collection}],["uses",{kind:"option",type:A.Uses}]])]);class C extends r.Borsh.Data{constructor(Y){super(Y);const Z=new RegExp("\0","g");this.name=Y.name.replace(Z,""),this.uri=Y.uri.replace(Z,""),this.symbol=Y.symbol.replace(Z,"")}}n.MetadataDataData=C,C.SCHEMA=new Map([...B.SCHEMA,...C.struct([["name","string"],["symbol","string"],["uri","string"],["sellerFeeBasisPoints","u16"],["creators",{kind:"option",type:[B]}]])]);class D extends r.Borsh.Data{constructor(Y){super(Y),this.key=w.MetadataKey.MetadataV1}}n.MetadataData=D,D.SCHEMA=new Map([...C.SCHEMA,...v.Collection.SCHEMA,...A.Uses.SCHEMA,...D.struct([["key","u8"],["updateAuthority","pubkeyAsString"],["mint","pubkeyAsString"],["data",C],["primarySaleHappened","u8"],["isMutable","u8"],["editionNonce",{kind:"option",type:"u8"}],["tokenStandard",{kind:"option",type:"u8"}],["collection",{kind:"option",type:v.Collection}],["uses",{kind:"option",type:A.Uses}]])]);let V=class zt extends r.Account{constructor(Y,Z){if(super(Y,Z),!this.assertOwner(f.MetadataProgram.PUBKEY))throw(0,r.ERROR_INVALID_OWNER)();if(!zt.isCompatible(this.info.data))throw(0,r.ERROR_INVALID_ACCOUNT_DATA)();this.data=D.deserialize(this.info.data)}static isCompatible(Y){return Y[0]===w.MetadataKey.MetadataV1}static getPDA(Y){return e(this,void 0,void 0,function*(){return f.MetadataProgram.findProgramAddress([c.Buffer.from(f.MetadataProgram.PREFIX),f.MetadataProgram.PUBKEY.toBuffer(),new s.PublicKey(Y).toBuffer()])})}static findMany(Y,Z={}){return e(this,void 0,void 0,function*(){const oe=[{memcmp:{offset:0,bytes:o.default.encode(c.Buffer.from([w.MetadataKey.MetadataV1]))}},Z.updateAuthority&&{memcmp:{offset:1,bytes:new s.PublicKey(Z.updateAuthority).toBase58()}},Z.mint&&{memcmp:{offset:33,bytes:new s.PublicKey(Z.mint).toBase58()}}].filter(Boolean);return Z.creators?(yield Promise.all(Array.from(Array(r.config.maxCreatorLimit).keys()).reduce((ee,F)=>[...ee,...Z.creators.map(K=>f.MetadataProgram.getProgramAccounts(Y,{filters:[...oe,{memcmp:{offset:(0,n.computeCreatorOffset)(F),bytes:new s.PublicKey(K).toBase58()}}]}))],[]))).flat().map(ee=>zt.from(ee)):(yield f.MetadataProgram.getProgramAccounts(Y,{filters:oe})).map(ee=>zt.from(ee))})}static findByMint(Y,Z){return e(this,void 0,void 0,function*(){const oe=yield zt.getPDA(Z);return zt.load(Y,oe)})}static findByOwner(Y,Z){return e(this,void 0,void 0,function*(){const oe=yield r.TokenAccount.getTokenAccountsByOwner(Y,Z),ee=new Map(oe.map(({data:K})=>[K.mint.toString(),K]));return(yield zt.findMany(Y)).filter(K=>{var q,H;return ee.has(K.data.mint)&&(((H=(q=ee?.get(K.data.mint))===null||q===void 0?void 0:q.amount)===null||H===void 0?void 0:H.toNumber())||0)>0})})}static findByOwnerV2(Y,Z){return e(this,void 0,void 0,function*(){const ee=(yield r.TokenAccount.getTokenAccountsByOwner(Y,Z)).map(({data:F})=>F).filter(({amount:F})=>F?.toNumber()>0);return(yield Promise.all(ee.map(({mint:F})=>zt.findMany(Y,{mint:F})))).flat()})}static findByOwnerV3(Y,Z){return e(this,void 0,void 0,function*(){const oe=yield zt.findInfoByOwner(Y,Z);return Array.from(oe.entries()).map(([ee,F])=>new zt(ee,F))})}static findInfoByOwner(Y,Z){return e(this,void 0,void 0,function*(){const ee=(yield r.TokenAccount.getTokenAccountsByOwner(Y,Z)).reduce((K,{data:q})=>{var H;return!((H=q.amount)===null||H===void 0)&&H.eq(new i.default(1))?[...K,zt.getPDA(q.mint)]:K},[]),F=yield Promise.all(ee);return r.Account.getInfos(Y,F)})}static findDataByOwner(Y,Z){return e(this,void 0,void 0,function*(){const oe=yield zt.findInfoByOwner(Y,Z);return Array.from(oe.values()).map(ee=>D.deserialize(ee.data))})}static getEdition(Y,Z){return e(this,void 0,void 0,function*(){const oe=yield m.Edition.getPDA(Z),ee=yield r.Account.getInfo(Y,oe);switch(ee?.data[0]){case w.MetadataKey.EditionV1:return new m.Edition(oe,ee);case w.MetadataKey.MasterEditionV1:case w.MetadataKey.MasterEditionV2:return new b.MasterEdition(oe,ee);default:return}})}};n.Metadata=V,n.MAX_NAME_LENGTH=32,n.MAX_SYMBOL_LENGTH=10,n.MAX_URI_LENGTH=200,n.MAX_CREATOR_LEN=34;const W=X=>69+n.MAX_NAME_LENGTH+4+n.MAX_URI_LENGTH+4+n.MAX_SYMBOL_LENGTH+2+1+4+X*n.MAX_CREATOR_LEN;n.computeCreatorOffset=W}(Mr)),Mr}var lr={},$c;function Eg(){if($c)return lr;$c=1;var n=lr&&lr.__awaiter||function(m,b,A,v){function w(B){return B instanceof A?B:new A(function(R){R(B)})}return new(A||(A=Promise))(function(B,R){function C(W){try{V(v.next(W))}catch(X){R(X)}}function D(W){try{V(v.throw(W))}catch(X){R(X)}}function V(W){W.done?B(W.value):w(W.value).then(C,D)}V((v=v.apply(m,b||[])).next())})};Object.defineProperty(lr,"__esModule",{value:!0}),lr.EditionMarker=lr.EditionMarkerData=void 0;const e=Le(),t=Me,r=ps(),s=Ke(),i=mr(),o=Kn();class c extends e.Borsh.Data{constructor(b){super(b),this.key=o.MetadataKey.EditionMarker}editionTaken(b){const A=b%f.DATA_SIZE,v=Math.floor(A/8);if(v>30)throw Error("Bad index for edition");const w=7-A%8,B=Math.pow(2,w);return(this.ledger[v]&B)!=0}}lr.EditionMarkerData=c,c.SCHEMA=c.struct([["key","u8"],["ledger",[31]]]);let f=class cf extends e.Account{constructor(b,A){if(super(b,A),!this.assertOwner(s.MetadataProgram.PUBKEY))throw(0,e.ERROR_INVALID_OWNER)();if(!cf.isCompatible(this.info.data))throw(0,e.ERROR_INVALID_ACCOUNT_DATA)();this.data=c.deserialize(this.info.data)}static getPDA(b,A){return n(this,void 0,void 0,function*(){const v=Math.floor(A.toNumber()/248);return s.MetadataProgram.findProgramAddress([i.Buffer.from(s.MetadataProgram.PREFIX),s.MetadataProgram.PUBKEY.toBuffer(),new t.PublicKey(b).toBuffer(),i.Buffer.from(r.Edition.EDITION_PREFIX),i.Buffer.from(v.toString())])})}static isCompatible(b){return b[0]===o.MetadataKey.EditionMarker}};return lr.EditionMarker=f,f.DATA_SIZE=248,lr}var Hc;function uf(){return Hc||(Hc=1,function(n){var e=Rr&&Rr.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[i]}})}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),t=Rr&&Rr.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,r,i)};Object.defineProperty(n,"__esModule",{value:!0}),t(Kn(),n),t(Ai(),n),t(sf(),n),t(ps(),n),t(Eg(),n),t(af(),n),t(of(),n)}(Rr)),Rr}var Fr={},Dr={},jc;function Ag(){if(jc)return Dr;jc=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.CreateMetadata=Dr.CreateMetadataArgs=void 0;const n=Le(),e=Me,t=Ai(),r=Ke();class s extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=0}}Dr.CreateMetadataArgs=s,s.SCHEMA=new Map([...t.MetadataDataData.SCHEMA,...s.struct([["instruction","u8"],["data",t.MetadataDataData],["isMutable","u8"]])]);let i=class extends n.Transaction{constructor(c,f){super(c);const{feePayer:m}=c,{metadata:b,metadataData:A,updateAuthority:v,mint:w,mintAuthority:B}=f,R=s.serialize({data:A,isMutable:!0});this.add(new e.TransactionInstruction({keys:[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!1},{pubkey:B,isSigner:!0,isWritable:!1},{pubkey:m,isSigner:!0,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:e.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:e.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:r.MetadataProgram.PUBKEY,data:R}))}};return Dr.CreateMetadata=i,Dr}var Kr={},Yc;function Sg(){if(Yc)return Kr;Yc=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.UpdateMetadata=Kr.UpdateMetadataArgs=void 0;const n=Le(),e=Me,t=Ai(),r=Ke();class s extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=1}}Kr.UpdateMetadataArgs=s,s.SCHEMA=new Map([...t.MetadataDataData.SCHEMA,...s.struct([["instruction","u8"],["data",{kind:"option",type:t.MetadataDataData}],["updateAuthority",{kind:"option",type:"pubkeyAsString"}],["primarySaleHappened",{kind:"option",type:"u8"}]])]);let i=class extends n.Transaction{constructor(c,f){super(c);const{metadata:m,metadataData:b,updateAuthority:A,newUpdateAuthority:v,primarySaleHappened:w}=f,B=s.serialize({data:b,updateAuthority:v&&v.toString(),primarySaleHappened:w||null});this.add(new e.TransactionInstruction({keys:[{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!0,isWritable:!1}],programId:r.MetadataProgram.PUBKEY,data:B}))}};return Kr.UpdateMetadata=i,Kr}var Wr={},Gc;function vg(){if(Gc)return Wr;Gc=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.CreateMasterEdition=Wr.CreateMasterEditionArgs=void 0;const n=Le(),e=br,t=Me,r=Ke();class s extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=10}}Wr.CreateMasterEditionArgs=s,s.SCHEMA=s.struct([["instruction","u8"],["maxSupply",{kind:"option",type:"u64"}]]);let i=class extends n.Transaction{constructor(c,f){super(c);const{feePayer:m}=c,{edition:b,metadata:A,updateAuthority:v,mint:w,mintAuthority:B,maxSupply:R}=f,C=s.serialize({maxSupply:R||null});this.add(new t.TransactionInstruction({keys:[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!0,isWritable:!1},{pubkey:B,isSigner:!0,isWritable:!1},{pubkey:m,isSigner:!0,isWritable:!1},{pubkey:A,isSigner:!1,isWritable:!1},{pubkey:e.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:t.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:t.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:r.MetadataProgram.PUBKEY,data:C}))}};return Wr.CreateMasterEdition=i,Wr}var zr={},Zc;function _g(){if(Zc)return zr;Zc=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.MintNewEditionFromMasterEditionViaToken=zr.MintNewEditionFromMasterEditionViaTokenArgs=void 0;const n=Le(),e=br,t=Me,r=Ke();class s extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=11}}zr.MintNewEditionFromMasterEditionViaTokenArgs=s,s.SCHEMA=s.struct([["instruction","u8"],["edition","u64"]]);let i=class extends n.Transaction{constructor(c,f){super(c);const{feePayer:m}=c,{edition:b,metadata:A,updateAuthority:v,masterEdition:w,masterMetadata:B,mint:R,editionMarker:C,mintAuthority:D,tokenOwner:V,tokenAccount:W,editionValue:X}=f,Y=s.serialize({edition:X});this.add(new t.TransactionInstruction({keys:[{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:R,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!1,isWritable:!0},{pubkey:D,isSigner:!0,isWritable:!1},{pubkey:m,isSigner:!0,isWritable:!1},{pubkey:V,isSigner:!0,isWritable:!1},{pubkey:W,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:B,isSigner:!1,isWritable:!1},{pubkey:e.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:t.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:t.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:r.MetadataProgram.PUBKEY,data:Y}))}};return zr.MintNewEditionFromMasterEditionViaToken=i,zr}var qr={},Xc;function Ig(){if(Xc)return qr;Xc=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.UpdatePrimarySaleHappenedViaToken=qr.UpdatePrimarySaleHappenedViaTokenArgs=void 0;const n=Le(),e=Me,t=Ke();class r extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=4}}qr.UpdatePrimarySaleHappenedViaTokenArgs=r,r.SCHEMA=r.struct([["instruction","u8"]]);let s=class extends n.Transaction{constructor(o,c){super(o);const{metadata:f,owner:m,tokenAccount:b}=c,A=r.serialize();this.add(new e.TransactionInstruction({keys:[{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!0,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1}],programId:t.MetadataProgram.PUBKEY,data:A}))}};return qr.UpdatePrimarySaleHappenedViaToken=s,qr}var Vr={},Jc;function Qc(){if(Jc)return Vr;Jc=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.SignMetadata=Vr.SignMetadataArgs=void 0;const n=Le(),e=Me,t=Ke();class r extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=7}}Vr.SignMetadataArgs=r,r.SCHEMA=r.struct([["instruction","u8"]]);let s=class extends n.Transaction{constructor(o,c){super(o);const{metadata:f,creator:m}=c,b=r.serialize();this.add(new e.TransactionInstruction({keys:[{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!0,isWritable:!1}],programId:t.MetadataProgram.PUBKEY,data:b}))}};return Vr.SignMetadata=s,Vr}var $r={},eu;function Bg(){if(eu)return $r;eu=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.UpdateMetadataV2=$r.UpdateMetadataV2Args=void 0;const n=Le(),e=Me,t=Ai(),r=Ke();class s extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=15}}$r.UpdateMetadataV2Args=s,s.SCHEMA=new Map([...t.DataV2.SCHEMA,...s.struct([["instruction","u8"],["data",{kind:"option",type:t.DataV2}],["updateAuthority",{kind:"option",type:"pubkeyAsString"}],["primarySaleHappened",{kind:"option",type:"u8"}],["isMutable",{kind:"option",type:"u8"}]])]);let i=class extends n.Transaction{constructor(c,f){super(c);const{metadata:m,metadataData:b,updateAuthority:A,newUpdateAuthority:v,primarySaleHappened:w,isMutable:B}=f,R=s.serialize({data:b,updateAuthority:v&&v.toString(),primarySaleHappened:w||null,isMutable:B||null});this.add(new e.TransactionInstruction({keys:[{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!0,isWritable:!1}],programId:r.MetadataProgram.PUBKEY,data:R}))}};return $r.UpdateMetadataV2=i,$r}var Hr={},tu;function xg(){if(tu)return Hr;tu=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.CreateMetadataV2=Hr.CreateMetadataV2Args=void 0;const n=Le(),e=Me,t=Ai(),r=Ke();class s extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=16}}Hr.CreateMetadataV2Args=s,s.SCHEMA=new Map([...t.DataV2.SCHEMA,...s.struct([["instruction","u8"],["data",t.DataV2],["isMutable","u8"]])]);let i=class extends n.Transaction{constructor(c,f){super(c);const{feePayer:m}=c,{metadata:b,metadataData:A,updateAuthority:v,mint:w,mintAuthority:B}=f,R=s.serialize({data:A,isMutable:!0});this.add(new e.TransactionInstruction({keys:[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!1},{pubkey:B,isSigner:!0,isWritable:!1},{pubkey:m,isSigner:!0,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:e.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:e.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:r.MetadataProgram.PUBKEY,data:R}))}};return Hr.CreateMetadataV2=i,Hr}var jr={},ru;function Rg(){if(ru)return jr;ru=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.CreateMasterEditionV3=jr.CreateMasterEditionV3Args=void 0;const n=Le(),e=br,t=Me,r=Ke();class s extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=17}}jr.CreateMasterEditionV3Args=s,s.SCHEMA=s.struct([["instruction","u8"],["maxSupply",{kind:"option",type:"u64"}]]);let i=class extends n.Transaction{constructor(c,f){super(c);const{feePayer:m}=c,{edition:b,metadata:A,updateAuthority:v,mint:w,mintAuthority:B,maxSupply:R}=f,C=s.serialize({maxSupply:R||null});this.add(new t.TransactionInstruction({keys:[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!0,isWritable:!1},{pubkey:B,isSigner:!0,isWritable:!1},{pubkey:m,isSigner:!0,isWritable:!1},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:e.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:t.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:t.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:r.MetadataProgram.PUBKEY,data:C}))}};return jr.CreateMasterEditionV3=i,jr}var Yr={},nu;function Mg(){if(nu)return Yr;nu=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.VerifyCollection=Yr.VerifyCollectionArgs=void 0;const n=Le(),e=Me,t=Ke();class r extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=18}}Yr.VerifyCollectionArgs=r,r.SCHEMA=new Map([...r.struct([["instruction","u8"]])]);let s=class extends n.Transaction{constructor(o,c){super(o);const{feePayer:f}=o,{metadata:m,collectionAuthority:b,collectionMint:A,collectionMetadata:v,collectionMasterEdition:w,collectionAuthorityRecord:B}=c,R=r.serialize(),C=[{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!0,isWritable:!0},{pubkey:f,isSigner:!0,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1}];B&&C.push({pubkey:B,isSigner:!1,isWritable:!1}),this.add(new e.TransactionInstruction({keys:C,programId:t.MetadataProgram.PUBKEY,data:R}))}};return Yr.VerifyCollection=s,Yr}var Gr={},iu;function Pg(){if(iu)return Gr;iu=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.UnVerifyCollection=Gr.UnVerifyCollectionArgs=void 0;const n=Le(),e=Me,t=Ke();class r extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=22}}Gr.UnVerifyCollectionArgs=r,r.SCHEMA=new Map([...r.struct([["instruction","u8"]])]);class s extends n.Transaction{constructor(o,c){super(o);const{feePayer:f}=o,{metadata:m,collectionAuthority:b,collectionMint:A,collectionMetadata:v,collectionMasterEdition:w,collectionAuthorityRecord:B}=c,R=r.serialize(),C=[{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!0,isWritable:!0},{pubkey:f,isSigner:!0,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1}];B&&C.push({pubkey:B,isSigner:!1,isWritable:!1}),this.add(new e.TransactionInstruction({keys:C,programId:t.MetadataProgram.PUBKEY,data:R}))}}return Gr.UnVerifyCollection=s,Gr}var Zr={},su;function Tg(){if(su)return Zr;su=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.SetAndVerifyCollectionCollection=Zr.SetAndVerifyCollectionArgs=void 0;const n=Le(),e=Me,t=Ke();class r extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=25}}Zr.SetAndVerifyCollectionArgs=r,r.SCHEMA=new Map([...r.struct([["instruction","u8"]])]);class s extends n.Transaction{constructor(o,c){super(o);const{feePayer:f}=o,{metadata:m,collectionAuthority:b,collectionMint:A,updateAuthority:v,collectionMetadata:w,collectionMasterEdition:B,collectionAuthorityRecord:R}=c,C=r.serialize(),D=[{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!0,isWritable:!0},{pubkey:f,isSigner:!0,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:A,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1},{pubkey:B,isSigner:!1,isWritable:!1}];R&&D.push({pubkey:R,isSigner:!1,isWritable:!1}),this.add(new e.TransactionInstruction({keys:D,programId:t.MetadataProgram.PUBKEY,data:C}))}}return Zr.SetAndVerifyCollectionCollection=s,Zr}var Xr={},ou;function Cg(){if(ou)return Xr;ou=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.ApproveUseAuthority=Xr.ApproveUseAuthorityArgs=void 0;const n=Le(),e=br,t=Me,r=Ke();class s extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=20}}Xr.ApproveUseAuthorityArgs=s,s.SCHEMA=new Map([...s.struct([["instruction","u8"],["numberOfUses","u8"]])]);let i=class extends n.Transaction{constructor(c,f){super(c);const{feePayer:m}=c,{useAuthorityRecord:b,user:A,owner:v,ownerTokenAccount:w,metadata:B,mint:R,burner:C,numberOfUses:D}=f,V=s.serialize({numberOfUses:D}),W=[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!0,isWritable:!0},{pubkey:m,isSigner:!0,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:B,isSigner:!1,isWritable:!1},{pubkey:R,isSigner:!1,isWritable:!1},{pubkey:C,isSigner:!1,isWritable:!1},{pubkey:e.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:t.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:t.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];this.add(new t.TransactionInstruction({keys:W,programId:r.MetadataProgram.PUBKEY,data:V}))}};return Xr.ApproveUseAuthority=i,Xr}var Jr={},au;function Ug(){if(au)return Jr;au=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.RevokeUseAuthority=Jr.RevokeUseAuthorityArgs=void 0;const n=Le(),e=br,t=Me,r=Ke();class s extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=21}}Jr.RevokeUseAuthorityArgs=s,s.SCHEMA=new Map([...s.struct([["instruction","u8"]])]);let i=class extends n.Transaction{constructor(c,f){super(c);const{useAuthorityRecord:m,user:b,owner:A,ownerTokenAccount:v,metadata:w,mint:B}=f,R=s.serialize(),C=[{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!0,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:B,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1},{pubkey:e.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:t.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:t.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];this.add(new t.TransactionInstruction({keys:C,programId:r.MetadataProgram.PUBKEY,data:R}))}};return Jr.RevokeUseAuthority=i,Jr}var Qr={},cu;function Og(){if(cu)return Qr;cu=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.ApproveCollectionAuthority=Qr.ApproveCollectionAuthorityArgs=void 0;const n=Le(),e=Me,t=Ke();class r extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=23}}Qr.ApproveCollectionAuthorityArgs=r,r.SCHEMA=new Map([...r.struct([["instruction","u8"]])]);let s=class extends n.Transaction{constructor(o,c){super(o);const{feePayer:f}=o,{metadata:m,collectionAuthorityRecord:b,newCollectionAuthority:A,updateAuthority:v,mint:w}=c,B=r.serialize(),R=[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!0,isWritable:!1},{pubkey:f,isSigner:!0,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1},{pubkey:e.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:e.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];this.add(new e.TransactionInstruction({keys:R,programId:t.MetadataProgram.PUBKEY,data:B}))}};return Qr.ApproveCollectionAuthority=s,Qr}var en={},uu;function Lg(){if(uu)return en;uu=1,Object.defineProperty(en,"__esModule",{value:!0}),en.RevokeCollectionAuthority=en.RevokeCollectionAuthorityArgs=void 0;const n=Le(),e=Me,t=Ke();class r extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=24}}en.RevokeCollectionAuthorityArgs=r,r.SCHEMA=new Map([...r.struct([["instruction","u8"]])]);let s=class extends n.Transaction{constructor(o,c){super(o);const{metadata:f,collectionAuthorityRecord:m,delegateAuthority:b,newCollectionAuthority:A,updateAuthority:v,mint:w}=c,B=b||A;if(!B)throw new Error("Must provide either a delegateAuthority");const R=r.serialize(),C=[{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:B,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!0,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1},{pubkey:e.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:e.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];this.add(new e.TransactionInstruction({keys:C,programId:t.MetadataProgram.PUBKEY,data:R}))}};return en.RevokeCollectionAuthority=s,en}var tn={},lu;function Ng(){if(lu)return tn;lu=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.Utilize=tn.UtilizeArgs=void 0;const n=Le(),e=br,t=Me,r=Ke();class s extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=19}}tn.UtilizeArgs=s,s.SCHEMA=new Map([...s.struct([["instruction","u8"],["numberOfUses","u8"]])]);let i=class extends n.Transaction{constructor(c,f){super(c);const{metadata:m,useAuthority:b,numberOfUses:A,burner:v,tokenAccount:w}=f,B=s.serialize({numberOfUses:A}),R=[{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!0,isWritable:!1},{pubkey:e.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:t.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:t.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];b&&(R.push({pubkey:b,isSigner:!1,isWritable:!1}),R.push({pubkey:v,isSigner:!1,isWritable:!1})),this.add(new t.TransactionInstruction({keys:R,programId:r.MetadataProgram.PUBKEY,data:B}))}};return tn.Utilize=i,tn}var rn={},fu;function Fg(){if(fu)return rn;fu=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.FreezeDelegatedAccount=rn.FreezeDelegatedAccountArgs=void 0;const n=Le(),e=Me,t=Ke(),r=br;class s extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=26}}rn.FreezeDelegatedAccountArgs=s,s.SCHEMA=new Map([...s.struct([["instruction","u8"]])]);let i=class extends n.Transaction{constructor(c,f){super(c);const{delegate:m,token_account:b,edition:A,mint:v}=f,w=s.serialize();this.add(new e.TransactionInstruction({keys:[{pubkey:m,isSigner:!0,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:r.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}],programId:t.MetadataProgram.PUBKEY,data:w}))}};return rn.FreezeDelegatedAccount=i,rn}var nn={},hu;function Dg(){if(hu)return nn;hu=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.ThawDelegatedAccount=nn.ThawDelegatedAccountArgs=void 0;const n=Le(),e=Me,t=Ke(),r=br;class s extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=27}}nn.ThawDelegatedAccountArgs=s,s.SCHEMA=new Map([...s.struct([["instruction","u8"]])]);let i=class extends n.Transaction{constructor(c,f){super(c);const{delegate:m,token_account:b,edition:A,mint:v}=f,w=s.serialize();this.add(new e.TransactionInstruction({keys:[{pubkey:m,isSigner:!0,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:r.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}],programId:t.MetadataProgram.PUBKEY,data:w}))}};return nn.ThawDelegatedAccount=i,nn}var sn={},du;function Kg(){if(du)return sn;du=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.RemoveCreatorVerification=sn.RemoveCreatorVerificationArgs=void 0;const n=Le(),e=Me,t=Ke();class r extends n.Borsh.Data{constructor(){super(...arguments),this.instruction=28}}sn.RemoveCreatorVerificationArgs=r,r.SCHEMA=r.struct([["instruction","u8"]]);let s=class extends n.Transaction{constructor(o,c){super(o);const{metadata:f,creator:m}=c,b=r.serialize();this.add(new e.TransactionInstruction({keys:[{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!0,isWritable:!1}],programId:t.MetadataProgram.PUBKEY,data:b}))}};return sn.RemoveCreatorVerification=s,sn}var pu;function Wg(){return pu||(pu=1,function(n){var e=Fr&&Fr.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[i]}})}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),t=Fr&&Fr.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,r,i)};Object.defineProperty(n,"__esModule",{value:!0}),t(Ag(),n),t(Sg(),n),t(vg(),n),t(_g(),n),t(Ig(),n),t(Qc(),n),t(Bg(),n),t(xg(),n),t(Rg(),n),t(Mg(),n),t(Pg(),n),t(Qc(),n),t(Tg(),n),t(Cg(),n),t(Ug(),n),t(Og(),n),t(Lg(),n),t(Ng(),n),t(Fg(),n),t(Dg(),n),t(Kg(),n)}(Fr)),Fr}var yu;function zg(){return yu||(yu=1,function(n){var e=xr&&xr.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[i]}})}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),t=xr&&xr.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,r,i)};Object.defineProperty(n,"__esModule",{value:!0}),t(uf(),n),t(Ke(),n),t(Wg(),n)}(xr)),xr}var qg=zg();window.runMint=async function(n){if(!window.solana||!window.solana.isPhantom){alert("Please install Phantom wallet");return}await window.solana.connect();const e=window.solana,t=_f();t.use(vf({publicKey:e.publicKey.toBytes(),signTransaction:e.signTransaction,signAllTransactions:e.signAllTransactions}));const r=qg.mplTokenMetadata();t.use(r),t.programs.add(r);const s=Af(t);await t.nfts().create({mint:s,name:"WAGMIK Meme",uri:n,symbol:"WAGMIK",sellerFeeBasisPoints:0}).sendAndConfirm(t),console.log(` NFT minted: https://explorer.solana.com/address/${s.publicKey}?cluster=mainnet`)};
